//Cashius, 03-01-2015, 21:49:34
Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),"function"!=typeof Object.create&&!function(){var a=function(){};Object.create=function(b){if(arguments.length>1)throw Error("Second argument not supported");if(null===b)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof b)throw TypeError("Argument must be an object");return a.prototype=b,new a}}(),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(function(){a()},1e3/60)});var App=App||{};App.MathUtils={rgbToHex:function(a,b,c){return((1<<24)+(a<<16)+(b<<8)+c).toString(16).slice(1)},hexToRgb:function(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null}},App.DateUtils={_daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],_dayLabels:["S","M","T","W","T","F","S"],getDayLabels:function(a){for(var b=a;b;)this._dayLabels.push(this._dayLabels.shift()),b--;return this._dayLabels},getMonth:function(a,b){for(var c=1,d=a.getYear(),e=a.getMonth(),f=e?e-1:11,g=this.getDaysInMonth(d,e),h=this.getDaysInMonth(d,f),i=new Date(1900+d,e,1).getDay(),j=new Array(6),k=null,l=1,m=0;6>m;m++){l=m?0:1,0===m&&i!==b?c=h-i+1+b:(c=7*m-(i-1-b),c>g&&(c-=g,l=1)),1===c&&0===m&&(l=0),k=new Array(14);for(var n=0;14>n;n++)c>h&&0===m&&(c=1,l=0),c>g&&m>0&&(c=1,l=1),k[n++]=c++,k[n]=l;j[m]=k}return j},getDaysInMonth:function(a,b){return 1===b&&a%4===0?29:this._daysInMonth[b]}},App.Device={TOUCH_SUPPORTED:"ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0},App.EventType={CHANGE_SCREEN:"CHANGE_SCREEN",COMPLETE:"COMPLETE",UPDATE:"UPDATE",PROGRESS:"PROGRESS",ERROR:"ERROR",CHANGE:"change",LAYOUT_UPDATE:"LAYOUT_UPDATE",TICK:"TICK",ADDED:"ADDED",REMOVED:"REMOVED",RESIZE:"resize",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",CLICK:"click",FOCUS:"focus",BLUR:"blur",KEY_PRESS:"keypress",PASTE:"paste",TEXT_INPUT:"textInput",INPUT:"input"},App.ModelName={TICKER:"TICKER",EVENT_LISTENER_POOL:"EVENT_LISTENER_POOL",RECTANGLE_POOL:"RECTANGLE_POOL",ACCOUNTS:"ACCOUNTS",TRANSACTIONS:"TRANSACTIONS",SETTINGS:"SETTINGS",FILTERS:"FILTERS",CURRENCIES:"CURRENCIES"},App.ViewName={APPLICATION_VIEW:"APPLICATION_VIEW",LOG:"LOG"},App.InteractiveState={OVER:"OVER",OUT:"OUT",DRAGGING:"DRAGGING",SCROLLING:"SCROLLING",SNAPPING:"SNAPPING",SWIPING:"SWIPING"},App.TransitionState={SHOWING:"SHOWING",SHOWN:"SHOWN",HIDING:"HIDING",HIDDEN:"HIDDEN",OPEN:"OPEN",OPENING:"OPENING",CLOSED:"CLOSED",CLOSING:"CLOSING"},App.ScrollPolicy={ON:"ON",OFF:"OFF",AUTO:"AUTO"},App.Direction={X:"x",Y:"y",LEFT:"LEFT",RIGHT:"RIGHT"},App.ScreenName={ACCOUNT:0,CATEGORY:1,SELECT_TIME:2},App.EventListener=function(a){this.allocated=!1,this.poolIndex=a,this.type=null,this.scope=null,this.handler=null},App.EventListener.prototype.reset=function(){this.allocated=!1,this.type=null,this.scope=null,this.handler=null},App.EventDispatcher=function(a){this._listeners=[],this._listenersPool=a},App.EventDispatcher.prototype.addEventListener=function(a,b,c){if(!this.hasEventListener(a,b,c)){var d=this._listenersPool.allocate();d.type=a,d.scope=b,d.handler=c,this._listeners[this._listeners.length]=d}},App.EventDispatcher.prototype.hasEventListener=function(a,b,c){for(var d=0,e=this._listeners.length,f=null;e>d;)if(f=this._listeners[d++],f.type===a&&f.scope===b&&f.handler===c)return f=null,!0;return f=null,!1},App.EventDispatcher.prototype.removeEventListener=function(a,b,c){for(var d=0,e=this._listeners.length,f=null;e>d;d++)if(f=this._listeners[d],f.type===a&&f.scope===b&&f.handler===c){this._listenersPool.release(f),f.reset(),this._listeners.splice(d,1);break}f=null},App.EventDispatcher.prototype.removeAllListeners=function(){for(var a=0,b=this._listeners.length,c=null;b>a;a++)c=this._listeners[a],this._listenersPool.release(c),c.reset(),this._listeners.splice(a,1);c=null,this._listeners.length=0},App.EventDispatcher.prototype.dispatchEvent=function(a,b){for(var c=0,d=this._listeners.length,e=null;d>c;)e=this._listeners[c++],e&&e.type===a&&e.handler.call(e.scope,b,a);e=null},App.EventDispatcher.prototype.pipe=function(a,b){a.addEventListener(b,this,this._pipeListener)},App.EventDispatcher.prototype.unPipe=function(a,b){a.removeEventListener(b,this,this._pipeListener)},App.EventDispatcher.prototype._pipeListener=function(a,b){this.dispatchEvent(b,a)},App.EventDispatcher.prototype.destroy=function(){this.removeAllListeners(),this._listeners.length=0,this._listeners=null,this._listenersPool=null},App.Rectangle=function(a){this.allocated=!1,this.poolIndex=a,this.x=0,this.y=0,this.width=0,this.height=0},App.EventListener.prototype.reset=function(){this.allocated=!1,this.x=0,this.y=0,this.width=0,this.height=0},App.ModelLocator={_proxies:{},addProxy:function(a,b){if(this._proxies[a])throw Error("Proxy "+a+" already exist");this._proxies[a]=b},hasProxy:function(a){return this._proxies[a]},getProxy:function(a){return this._proxies[a]}},App.ObjectPool=function(a,b){this._objectClass=a,this._size=b,this._items=[],this._freeItems=[]},App.ObjectPool.prototype.preAllocate=function(){var a=this._items.length,b=a+this._size,c=a;for(this._items.length=b;b>c;c++)this._items[c]=new this._objectClass(c),this._freeItems.push(c)},App.ObjectPool.prototype.allocate=function(){0===this._freeItems.length&&this.preAllocate();var a=this._freeItems.shift(),b=this._items[a];return b.allocated=!0,b},App.ObjectPool.prototype.release=function(a){a.allocated=!1,this._freeItems.push(a.poolIndex)},App.Collection=function(a,b,c,d){if(App.EventDispatcher.call(this,d),a){var e=0,f=a.length;for(this._items=new Array(f);f>e;e++)this._items[e]=new b(a[e],this,c,d)}this._items||(this._items=[]),this._currentItem=null,this._currentIndex=-1},App.Collection.prototype=Object.create(App.EventDispatcher.prototype),App.Collection.prototype.constructor=App.Collection,App.Collection.prototype.addItem=function(a){this._items[this._items.length]=a,this.dispatchEvent(App.EventType.ADDED,a)},App.Collection.prototype.setCurrent=function(a,b){(a!==this._currentItem||b)&&(this._currentItem=a,this._updateCurrentIndex(),this.dispatchEvent(App.EventType.CHANGE,data))},App.Collection.prototype.getCurrent=function(){return this._currentItem},App.Collection.prototype.getItemAt=function(a){return this._items[a]},App.Collection.prototype.previous=function(){var a=this._currentIndex;return-1===a&&(a=0),0>=a?a=this._items.length-1:a-=1,this._items[a]},App.Collection.prototype.next=function(){var a=this._currentIndex;return-1===a||a>=this._items.length-1?a=0:a+=1,this._items[a]},App.Collection.prototype.other=function(a){var b=this._items.length;return this._items[this._currentIndex+b+a]%b},App.Collection.prototype.hasItem=function(a){return this.indexOf(a)>-1},App.Collection.prototype.removeItemAt=function(a){var b=this._items.splice(a,1)[0];return this._updateCurrentIndex(),this.dispatchEvent(App.EventType.REMOVED,b),b},App.Collection.prototype._updateCurrentIndex=function(){this._currentIndex=this.indexOf(this._currentItem)},App.Collection.prototype.indexOf=function(a){for(var b=8,c=0,d=Math.floor(this._items.length/b)*b;d>c;){if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1}for(d=this._items.length;d>c;)if(this._items[c++]===a)return c-1;return-1},App.Collection.prototype.index=function(){return this._currentIndex},App.Collection.prototype.length=function(){return this._items.length},App.Account=function(a,b,c,d){this._data=a,this._name=null,this._categories=null,this._eventListenerPool=d},App.Account.prototype.getName=function(){return this._name||(this._name=this._data.name),this._name},App.Account.prototype.getBalance=function(){},App.Account.prototype.getExpenses=function(){},App.Account.prototype.getIncome=function(){},App.Account.prototype.getCategories=function(){return this._categories||(this._categories=new App.Collection(this._data.categories,App.Category,this,this._eventListenerPool)),this._categories},App.Transaction=function(a,b,c,d,e,f,g,h){this.amount=a,this.currency=b,this.category=c,this.date=d,this.type=e,this.mode=f,this.repeating=g,this.pending=h},App.Category=function(a,b,c){this._data=a,this._account=c,this.name=a.name,this.color=a.color,this.icon=a.icon,this.subCategories=a.subCategories},App.Filter=function(a,b,c){this.startDate=a,this.endDate=b,this.categories=c},App.ViewLocator={_viewSegments:{},addViewSegment:function(a,b){if(this._viewSegments[a])throw Error("View segment "+a+" already exist");return this._viewSegments[a]=b,b},hasViewSegment:function(a){return this._viewSegments[a]},getViewSegment:function(a){return this._viewSegments[a]}},App.ListHeader=function(a,b,c){PIXI.Graphics.call(this),this._width=b,this._pixelRatio=c,this._textField=new PIXI.Text(a,{font:Math.round(12*c)+"px HelveticaNeueCond",fill:"#ffffff"}),this._render(),this.addChild(this._textField)},App.ListHeader.prototype=Object.create(PIXI.Graphics.prototype),App.ListHeader.prototype.constructor=App.ListHeader,App.ListHeader.prototype._render=function(){var a=this._pixelRatio,b=Math.round(30*a);this.clear(),this.beginFill(3752548),this.drawRect(0,0,this._width,b),this.beginFill(2435908),this.drawRect(0,b-a,this._width,a),this.endFill(),this._textField.x=Math.round((this._width-this._textField.width)/2),this._textField.y=Math.round((b-this._textField.height)/2)},App.ScrollIndicator=function(a,b){PIXI.Graphics.call(this),this.visible=!1,this.boundingBox=new PIXI.Rectangle(0,0,0,0),this._direction=a,this._pixelRatio=b,this._minIndicatorSize=Math.round(50*b),this._padding=Math.round(4*b),this._size=0,this._indicatorSize=0,this._indicatorThickness=0,this._contentPosition=0,this._positionStep=0,this._showHideTween=new App.TweenProxy(.2,App.Easing.linear,0,App.ModelLocator.getProxy(App.ModelName.EVENT_LISTENER_POOL)),this._state=App.TransitionState.HIDDEN},App.ScrollIndicator.prototype=Object.create(PIXI.Graphics.prototype),App.ScrollIndicator.prototype.constructor=App.ScrollIndicator,App.ScrollIndicator.prototype.show=function(){var a=App.TransitionState;(this._state===a.HIDING||this._state===a.HIDDEN)&&(this._state=a.SHOWING,this.visible=!0,this._showHideTween.start(!0))},App.ScrollIndicator.prototype.hide=function(a){var b=App.TransitionState;a?(this._state=b.HIDDEN,this.alpha=0,this.visible=!1):(this._state===b.SHOWING||this._state===b.SHOWN)&&(this._state=b.HIDING,this._showHideTween.start(!0))},App.ScrollIndicator.prototype.update=function(a){this._contentPosition=a;var b=App.TransitionState;(this._state===b.SHOWING||this._state===b.HIDING)&&this._updateVisibility(b),this._render()},App.ScrollIndicator.prototype._updateVisibility=function(a){var b=this._showHideTween.progress;this._state===a.SHOWING?(this.alpha=b,1===b&&(this._state=a.SHOWN)):this._state===a.HIDING&&(this.alpha=1-b,1===b&&(this._state=a.HIDDEN,this.visible=!1))},App.ScrollIndicator.prototype.resize=function(a,b){this._size=a,this._direction===App.Direction.X?(this.boundingBox.width=this._size,this.boundingBox.height=Math.round(8*this._pixelRatio),this._indicatorThickness=this.boundingBox.height-this._padding,this._indicatorSize=Math.round(this._size*(this._size/b)),this._indicatorSize<this._minIndicatorSize&&(this._indicatorSize=this._minIndicatorSize),this._positionStep=(this._size-this._indicatorSize)/(b-this._size)):this._direction===App.Direction.Y&&(this.boundingBox.width=Math.round(8*this._pixelRatio),this.boundingBox.height=this._size,this._indicatorThickness=this.boundingBox.width-this._padding,this._indicatorSize=Math.round(this._size*(this._size/b)),this._indicatorSize<this._minIndicatorSize&&(this._indicatorSize=this._minIndicatorSize),this._positionStep=(this._size-this._indicatorSize)/(b-this._size)),this._render()},App.ScrollIndicator.prototype._render=function(){var a=this._indicatorSize,b=-Math.round(this._contentPosition*this._positionStep);b+a>this._size?a=this._size-b:0>b&&(a+=b,b=0),this.clear(),this.beginFill(0,.3),this._direction===App.Direction.X?this.drawRoundedRect(b+this._padding,Math.round(.5*this._padding),a-2*this._padding,this._indicatorThickness,.5*this._indicatorThickness):this._direction===App.Direction.Y&&this.drawRoundedRect(Math.round(.5*this._padding),b+this._padding,this._indicatorThickness,a-2*this._padding,.5*this._indicatorThickness),this.endFill()},App.ScrollIndicator.prototype.destroy=function(){this._showHideTween.destroy(),this._showHideTween=null,this.boundingBox=null,this._direction=null,this._state=null,this.clear()},App.Input=function(a,b,c,d,e,f){PIXI.Graphics.call(this);var g=Math.round(b*e)+"px HelveticaNeueCond";this._fontSize=b,this._width=c,this._height=d,this._pixelRatio=e,this._enabled=!1,this._placeholder=a,this._placeholderStyle={font:g,fill:"#efefef"},this._currentStyle=this._placeholderStyle,this._textStyle={font:g,fill:"#394264"},this._text="",this._textField=new PIXI.Text(this._placeholder,this._currentStyle),this._inputProxy=document.getElementById("textInputProxy"),this._inputProxyListeners={focus:this._onFocus.bind(this),blur:this._onBlur.bind(this),change:this._onChange.bind(this)},f&&(this._icon=PIXI.Sprite.fromFrame("clear")),this._render(),this.addChild(this._textField),this._icon&&this.addChild(this._icon)},App.Input.prototype=Object.create(PIXI.Graphics.prototype),App.Input.prototype.constructor=App.Input,App.Input.prototype._render=function(){var a=this._pixelRatio;this._renderBackground(!1,a),this._textField.x=Math.round(10*a),this._textField.y=Math.round(9*a),this._icon&&(this._icon.width=Math.round(20*a),this._icon.height=Math.round(20*a),this._icon.x=Math.round(this._width-this._icon.width-10*a),this._icon.y=Math.round((this._height-this._icon.height)/2),this._icon.tint=14540253)},App.Input.prototype._renderBackground=function(a,b){this.clear(),this.beginFill(a?39423:13421772),this.drawRoundedRect(0,0,this._width,this._height,Math.round(5*b)),this.beginFill(16777215),this.drawRoundedRect(Math.round(b),Math.round(b),this._width-Math.round(2*b),this._height-Math.round(2*b),Math.round(4*b)),this.endFill()},App.Input.prototype.enable=function(){this._enabled||(this._enabled=!0,this._registerEventListeners(),this.interactive=!0)},App.Input.prototype.disable=function(){this._unRegisterEventListeners(),this.interactive=!1,this._enabled=!1},App.Input.prototype._registerEventListeners=function(){App.Device.TOUCH_SUPPORTED?this.tap=this._onClick:this.click=this._onClick;var a=App.EventType;this._inputProxy.addEventListener(a.FOCUS,this._inputProxyListeners.focus,!1),this._inputProxy.addEventListener(a.BLUR,this._inputProxyListeners.blur,!1),this._inputProxy.addEventListener(a.CHANGE,this._inputProxyListeners.change,!1),this._inputProxy.addEventListener(a.KEY_PRESS,this._inputProxyListeners.change,!1),this._inputProxy.addEventListener(a.PASTE,this._inputProxyListeners.change,!1),this._inputProxy.addEventListener(a.TEXT_INPUT,this._inputProxyListeners.change,!1),this._inputProxy.addEventListener(a.INPUT,this._inputProxyListeners.change,!1)},App.Input.prototype._unRegisterEventListeners=function(){App.Device.TOUCH_SUPPORTED?this.tap=null:this.click=null;var a=App.EventType;this._inputProxy.removeEventListener(a.FOCUS,this._inputProxyListeners.focus,!1),this._inputProxy.removeEventListener(a.BLUR,this._inputProxyListeners.blur,!1),this._inputProxy.removeEventListener(a.CHANGE,this._inputProxyListeners.change,!1),this._inputProxy.removeEventListener(a.KEY_PRESS,this._inputProxyListeners.change,!1),this._inputProxy.removeEventListener(a.PASTE,this._inputProxyListeners.change,!1),this._inputProxy.removeEventListener(a.TEXT_INPUT,this._inputProxyListeners.change,!1),this._inputProxy.removeEventListener(a.INPUT,this._inputProxyListeners.change,!1)},App.Input.prototype._onClick=function(a){this._inputProxy!==document.activeElement&&this._inputProxy.focus(),this._icon&&a.getLocalPosition(this).x>=Math.round(this._width-40*this._pixelRatio)&&(this._inputProxy.value="",this._onChange())},App.Input.prototype._onFocus=function(){var a=this._pixelRatio;this._renderBackground(!0,a),this._inputProxy.style.display="none",this._inputProxy.style.left=Math.round(this.x/a)+"px",this._inputProxy.style.top=Math.round(this.y/a)+"px",this._inputProxy.style.width=Math.round(this._width/a-0)+"px",this._inputProxy.style.height=Math.round(this._height/a)+"px",this._inputProxy.style.fontSize=this._fontSize+"px",this._inputProxy.style.lineHeight=this._fontSize+"px",this._inputProxy.value=this._text,this._inputProxy.style.display="block"},App.Input.prototype._onBlur=function(){this._updateText(!0),this._inputProxy.style.top="-1000px",this._inputProxy.value="",this._renderBackground(!1,this._pixelRatio)},App.Input.prototype._onChange=function(a){this._updateText(!1),a&&13===a.keyCode&&this._inputProxy.blur()},App.Input.prototype._updateText=function(a){this._text=this._format(a),this._text===this._placeholder||0===this._text.length?(this._currentStyle===this._textStyle&&(this._currentStyle=this._placeholderStyle,this._textField.setStyle(this._currentStyle)),this._textField.setText(this._placeholder)):(this._currentStyle===this._placeholderStyle&&(this._currentStyle=this._textStyle,this._textField.setStyle(this._currentStyle)),this._textField.setText(this._text))},App.Input.prototype._format=function(){return this._inputProxy.value},App.TimeInput=function(a,b,c,d,e,f){App.Input.call(this,a,b,c,d,e,f),this._inputProxy=document.getElementById("numberInputProxy")},App.TimeInput.prototype=Object.create(App.Input.prototype),App.TimeInput.prototype.constructor=App.TimeInput,App.TimeInput.prototype._render=function(){var a=this._pixelRatio;this._renderBackground(!1,a),this._updateAlignment(),this._textField.y=Math.round(9*a)},App.TimeInput.prototype._updateText=function(a){App.Input.prototype._updateText.call(this,a),this._updateAlignment()},App.TimeInput.prototype._format=function(a){if(0===this._inputProxy.value.length)return"";var b=parseInt(this._inputProxy.value.replace(/\D/g,"")),c=b.toString(),d=c.substr(0,2),e=c.substr(2,2);return isNaN(b)?c="":(1===d.length&&parseInt(d)>2?d="2":2===d.length&&parseInt(d)>24?d="24":1===e.length&&parseInt(e)>5?e="5":e.length>=2&&parseInt(e)>59&&(e="59"),a&&(1===d.length&&(d+="0"),0===e.length?e+="00":1===e.length&&(e+="0")),c=e.length>0?d+":"+e:d),this._inputProxy.value=c,c},App.TimeInput.prototype._updateAlignment=function(){this._textField.x=Math.round((this._width-this._textField.width)/2)},App.CalendarWeekRow=function(a,b,c){PIXI.Graphics.call(this);var d={font:Math.round(14*c)+"px HelveticaNeueCond",fill:"#cccccc"},e=a.length/2,f=PIXI.Text,g=0,h=0;for(this.boundingBox=App.ModelLocator.getProxy(App.ModelName.RECTANGLE_POOL).allocate(),this.boundingBox.width=this._width,this.boundingBox.height=Math.round(40*c),this._week=a,this._width=b,this._pixelRatio=c,this._dateFields=new Array(7);e>h;h++,g+=2)this._dateFields[h]=new f(a[g],d);for(this._render(),h=0;e>h;)this.addChild(this._dateFields[h++])},App.CalendarWeekRow.prototype=Object.create(PIXI.Graphics.prototype),App.CalendarWeekRow.prototype.constructor=App.CalendarWeekRow,App.CalendarWeekRow.prototype._render=function(){var a=Math.round(this._pixelRatio),b=this._week.length/2,c=Math.round(this._width/b),d=this.boundingBox.height,e=null,f=-1,g=-1,h=0,i=0;for(this.clear(),this.beginFill(16777215),this.drawRect(0,0,this._width,d),this.beginFill(15724527);b>i;i++,h+=2)e=this._dateFields[i],e.x=Math.round(i*c+(c-e.width)/2+1),e.y=Math.round((d-e.height)/2+1),this._week[h+1]?-1===f&&(f=i):(-1===g&&f>-1&&(g=i),i&&this.drawRect(Math.round(i*c),0,a,d));f>-1&&this.drawRect(f?f*c:0,0,-1===g?this._width:g*c,d),this.endFill()},App.Calendar=function(a,b,c){PIXI.Graphics.call(this);var d={font:"bold "+Math.round(12*c)+"px Arial",fill:"#999999"},e=App.CalendarWeekRow,f=PIXI.Text,g=App.DateUtils.getMonth(a,1),h=App.DateUtils.getDayLabels(1),i=h.length,j=g.length,k=0;for(this.boundingBox=App.ModelLocator.getProxy(App.ModelName.RECTANGLE_POOL).allocate(),this.boundingBox.width=this._width,this.boundingBox.height=Math.round(321*c),this._width=b,this._pixelRatio=c,this._monthField=new PIXI.Text("January 2015",{font:Math.round(18*c)+"px HelveticaNeueCond",fill:"#394264"}),this._prevButton=PIXI.Sprite.fromFrame("arrow"),this._nextButton=PIXI.Sprite.fromFrame("arrow"),this._dayLabelFields=new Array(i),this._weekRows=new Array(j),this._separatorContainer=new PIXI.Graphics;i>k;k++)this._dayLabelFields[k]=new f(h[k],d);for(k=0;j>k;k++)this._weekRows[k]=new e(g[k],b,c);for(this._render(),this.addChild(this._monthField),this.addChild(this._prevButton),this.addChild(this._nextButton),k=0;i>k;)this.addChild(this._dayLabelFields[k++]);for(k=0;j>k;)this.addChild(this._weekRows[k++]);this.addChild(this._separatorContainer)},App.Calendar.prototype=Object.create(PIXI.Graphics.prototype),App.Calendar.prototype.constructor=App.Calendar,App.Calendar.prototype._render=function(){var a=this._pixelRatio,b=Math.round(a),c=this._width,d=this.boundingBox.height,e=Math.round(12*a)/this._prevButton.height,f=Math.round(15*a),g=c-2*f,h=null,i=this._dayLabelFields.length,j=Math.round(c/i),k=Math.round(40*a),l=this._weekRows[0],m=l.boundingBox.height,n=Math.round(81*a),o=this._dayLabelFields.length,p=0;for(this.clear(),this.beginFill(15724527),this.drawRect(0,0,c,d),this.beginFill(13421772),this.drawRect(0,Math.round(80*a),c,b),this.drawRect(f,k,g,b),this.beginFill(16777215),this.drawRect(f,k+b,g,b),this.endFill(),this._monthField.x=Math.round((c-this._monthField.width)/2),this._monthField.y=Math.round((k-this._monthField.height)/2),this._prevButton.scale.x=e,this._prevButton.scale.y=e,this._prevButton.x=Math.round(20*a+this._prevButton.width),this._prevButton.y=Math.round((k-this._prevButton.height)/2+this._prevButton.height),this._prevButton.rotation=Math.PI,this._prevButton.tint=3752548,this._nextButton.scale.x=e,this._nextButton.scale.y=e,this._nextButton.x=Math.round(c-20*a-this._nextButton.width),this._nextButton.y=Math.round((k-this._prevButton.height)/2),this._nextButton.tint=3752548;o>p;p++)h=this._dayLabelFields[p],h.x=Math.round(p*j+(j-h.width)/2),h.y=Math.round(k+a+(k-h.height)/2);for(p=0,o=this._weekRows.length,this._separatorContainer.clear(),this._separatorContainer.beginFill(15724527,1);o>p;p++)l=this._weekRows[p],l.y=n+p*m,this._separatorContainer.drawRect(0,l.y+m,c,b);this._separatorContainer.endFill()},App.Pane=function(a,b,c,d,e){PIXI.DisplayObjectContainer.call(this),this._ticker=App.ModelLocator.getProxy(App.ModelName.TICKER),this._content=null,this._width=c,this._height=d,this._contentHeight=0,this._contentWidth=0,this._enabled=!1,this._eventsRegistered=!1,this._state=null,this._xOriginalScrollPolicy=a,this._yOriginalScrollPolicy=b,this._xScrollPolicy=a,this._yScrollPolicy=b,this._xScrollIndicator=new App.ScrollIndicator(App.Direction.X,e),this._yScrollIndicator=new App.ScrollIndicator(App.Direction.Y,e),this._mouseData=null,this._oldMouseX=0,this._oldMouseY=0,this._xSpeed=0,this._ySpeed=0,this._xOffset=0,this._yOffset=0,this._friction=.9,this._dumpForce=.5,this._snapForce=.2},App.Pane.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.Pane.prototype.constructor=App.Pane,App.Pane.prototype.setContent=function(a){this.removeContent(),this._content=a,this._contentHeight=Math.round(this._content.height),this._contentWidth=Math.round(this._content.width),this.addChildAt(this._content,0),this._updateScrollers()},App.Pane.prototype.removeContent=function(){this._content&&this.contains(this._content)&&(this.removeChild(this._content),this._content=null)},App.Pane.prototype.resize=function(a,b){this._width=a||this._width,this._height=b||this._height,this._content&&(this._contentHeight=Math.round(this._content.height),this._contentWidth=Math.round(this._content.width),this._content.x>0?this._updateX(0):this._content.y>0?this._updateY(0):this._content.x+this._contentWidth<this._width?this._updateX(this._width-this._contentWidth):this._content.y+this._contentHeight<this._height&&this._updateY(this._height-this._contentHeight),this._updateScrollers())},App.Pane.prototype._updateX=function(a){this._content.x=Math.round(a)},App.Pane.prototype._updateY=function(a){this._content.y=Math.round(a)},App.Pane.prototype.enable=function(){if(!this._enabled){var a=App.ScrollPolicy;(this._xScrollPolicy!==a.OFF||this._yScrollPolicy!==a.OFF)&&this._registerEventListeners(),this.interactive=!0,this._enabled=!0}},App.Pane.prototype.disable=function(){this._unRegisterEventListeners(),this.cancelScroll(),this._content.x>0?this._updateX(0):this._content.y>0?this._updateY(0):this._content.x+this._contentWidth<this._width?this._updateX(this._width-this._contentWidth):this._content.y+this._contentHeight<this._height&&this._updateY(this._height-this._contentHeight),this.interactive=!1,this._enabled=!1},App.Pane.prototype.resetScroll=function(){this._state=null,this._xSpeed=0,this._ySpeed=0,this._content&&(this._updateX(0),this._updateY(0),this._xScrollIndicator.hide(!0),this._yScrollIndicator.hide(!0))},App.Pane.prototype.cancelScroll=function(){this._state=null,this._xSpeed=0,this._ySpeed=0,this._xScrollIndicator.hide(!0),this._yScrollIndicator.hide(!0)},App.Pane.prototype._registerEventListeners=function(){this._eventsRegistered||(this._eventsRegistered=!0,App.Device.TOUCH_SUPPORTED?(this.touchstart=this._onPointerDown,this.touchend=this._onPointerUp,this.touchendoutside=this._onPointerUp,this.touchmove=this._onPointerMove):(this.mousedown=this._onPointerDown,this.mouseup=this._onPointerUp,this.mouseupoutside=this._onPointerUp,this.mousemove=this._onPointerMove),this._ticker.addEventListener(App.EventType.TICK,this,this._onTick))},App.Pane.prototype._unRegisterEventListeners=function(){this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),App.Device.TOUCH_SUPPORTED?(this.touchstart=null,this.touchend=null,this.touchendoutside=null,this.touchmove=null):(this.mousedown=null,this.mouseup=null,this.mouseupoutside=null,this.mousemove=null),this._eventsRegistered=!1},App.Pane.prototype._onPointerDown=function(a){this._mouseData=a;var b=this._mouseData.getLocalPosition(this.stage);this._xOffset=b.x-this._content.x,this._yOffset=b.y-this._content.y,this._xSpeed=0,this._ySpeed=0,this._state=App.InteractiveState.DRAGGING,this._xScrollPolicy===App.ScrollPolicy.ON&&this._xScrollIndicator.show(),this._yScrollPolicy===App.ScrollPolicy.ON&&this._yScrollIndicator.show()},App.Pane.prototype._onPointerUp=function(){this._isContentPulled()?(this._state=App.InteractiveState.SNAPPING,this._xSpeed=0,this._ySpeed=0):this._state=App.InteractiveState.SCROLLING,this._mouseData=null},App.Pane.prototype._onPointerMove=function(a){this._mouseData=a},App.Pane.prototype._onTick=function(){var a=App.InteractiveState;this._state===a.DRAGGING?this._drag(App.ScrollPolicy):this._state===a.SCROLLING?this._scroll(App.ScrollPolicy,a):this._state===a.SNAPPING&&this._snap(App.ScrollPolicy,a),this._xScrollIndicator.visible&&this._xScrollIndicator.update(this._content.x),this._yScrollIndicator.visible&&this._yScrollIndicator.update(this._content.y)},App.Pane.prototype._drag=function(a){var b=0;if(this.stage){if(this._xScrollPolicy===a.ON){var c=this._mouseData.getLocalPosition(this.stage).x,d=this._content.x,e=d+this._contentWidth,f=d-this._contentWidth;d>0?(b=(1-d/this._width)*this._dumpForce,this._updateX(c*b-this._xOffset*b)):e<this._width?(b=e/this._width*this._dumpForce,this._updateX(f-(this._width-c)*b+(this._contentWidth-this._xOffset)*b)):this._updateX(c-this._xOffset),this._xSpeed=c-this._oldMouseX,this._oldMouseX=c}if(this._yScrollPolicy===a.ON){var g=this._mouseData.getLocalPosition(this.stage).y,h=this._content.y,i=h+this._contentHeight,j=this._height-this._contentHeight;if(-1e4>=g)return;h>0?(b=(1-h/this._height)*this._dumpForce,this._updateY(g*b-this._yOffset*b)):i<this._height?(b=i/this._height*this._dumpForce,this._updateY(j-(this._height-g)*b+(this._contentHeight-this._yOffset)*b)):this._updateY(g-this._yOffset),this._ySpeed=g-this._oldMouseY,this._oldMouseY=g}}},App.Pane.prototype._scroll=function(a,b){if(this._xScrollPolicy===a.ON){this._updateX(this._content.x+this._xSpeed);var c=this._content.x,d=c+this._contentWidth;c>0?this._xSpeed*=(1-c/this._width)*this._dumpForce:d<this._width&&(this._xSpeed*=d/this._width*this._dumpForce),Math.abs(this._xSpeed)<.1?(this._xSpeed=0,this._state=null,this._xScrollIndicator.hide(),(c>0||d<this._width)&&(this._state=b.SNAPPING)):this._xSpeed*=this._friction}if(this._yScrollPolicy===a.ON){this._updateY(this._content.y+this._ySpeed);var e=this._content.y,f=e+this._contentHeight;e>0?this._ySpeed*=(1-e/this._height)*this._dumpForce:f<this._height&&(this._ySpeed*=f/this._height*this._dumpForce),Math.abs(this._ySpeed)<.1?(this._ySpeed=0,this._state=null,this._yScrollIndicator.hide(),(e>0||f<this._height)&&(this._state=b.SNAPPING)):this._ySpeed*=this._friction}},App.Pane.prototype._snap=function(a){if(this._xScrollPolicy===a.ON){var b=this._content.x,c=b+this._contentWidth,d=b-this._contentWidth,e=b*this._snapForce;b>0?5>e?(this._state=null,this._updateX(0),this._xScrollIndicator.hide()):this._updateX(e):c<this._width&&(e=d+(b-d)*this._snapForce,e>=this._width-5?(this._state=null,this._updateX(d),this._xScrollIndicator.hide()):this._updateX(e))}if(this._yScrollPolicy===a.ON){var f=this._content.y,g=f+this._contentHeight,h=this._height-this._contentHeight;f>0?(e=f*this._snapForce,5>e?(this._state=null,this._updateY(0),this._yScrollIndicator.hide()):this._updateY(e)):g<this._height&&(e=h+(f-h)*this._snapForce,e>=h-5?(this._state=null,this._updateY(h),this._yScrollIndicator.hide()):this._updateY(e))}},App.Pane.prototype._isContentPulled=function(){return this._content.x>0||this._content.y>0||this._content.y+this._contentHeight<this._height||this._content.x+this._contentWidth<this._width},App.Pane.prototype._updateScrollers=function(){var a=App.ScrollPolicy;this._xOriginalScrollPolicy===a.AUTO&&(this._contentWidth>=this._width?(this._xScrollPolicy=a.ON,this._xScrollIndicator.resize(this._width,this._contentWidth),this._xScrollIndicator.x=this._height-this._xScrollIndicator.boundingBox.height,this.contains(this._xScrollIndicator)||this.addChild(this._xScrollIndicator)):(this._xScrollPolicy=a.OFF,this._xScrollIndicator.hide(),this.contains(this._xScrollIndicator)&&this.removeChild(this._xScrollIndicator))),this._yOriginalScrollPolicy===a.AUTO&&(this._contentHeight>=this._height?(this._yScrollPolicy=a.ON,this._yScrollIndicator.resize(this._height,this._contentHeight),this._yScrollIndicator.x=this._width-this._yScrollIndicator.boundingBox.width,this.contains(this._yScrollIndicator)||this.addChild(this._yScrollIndicator)):(this._yScrollPolicy=a.OFF,this._yScrollIndicator.hide(),this.contains(this._yScrollIndicator)&&this.removeChild(this._yScrollIndicator))),this._xScrollPolicy===a.OFF&&this._yScrollPolicy===a.OFF&&this._unRegisterEventListeners()},App.Pane.prototype.destroy=function(){this.disable(),this._ticker=null,this._state=null,this._xSpeed=0,this._ySpeed=0,this._mouseData=null,this.removeContent(),this.contains(this._xScrollIndicator)&&this.removeChild(this._xScrollIndicator),this._xScrollIndicator.destroy(),this._xScrollIndicator=null,this.contains(this._yScrollIndicator)&&this.removeChild(this._yScrollIndicator),this._yScrollIndicator.destroy(),this._yScrollIndicator=null,this._xOriginalScrollPolicy=null,this._yOriginalScrollPolicy=null,this._xScrollPolicy=null,this._yScrollPolicy=null
},App.TileList=function(a,b){PIXI.DisplayObjectContainer.call(this),this._direction=a,this._windowSize=b,this._items=[],this.boundingBox=App.ModelLocator.getProxy(App.ModelName.RECTANGLE_POOL).allocate()},App.TileList.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.TileList.prototype.constructor=App.TileList,App.TileList.prototype.add=function(a,b){this._items[this._items.length]=a,this.addChild(a),b&&this.updateLayout()},App.TileList.prototype.updateX=function(a){this.x=Math.round(a);for(var b=0,c=this._items.length,d=0,e=0,f=null;c>b;)f=this._items[b++],d=f.boundingBox.width,e=this.x+f.x,f.visible=e+d>0&&e<this._windowSize},App.TileList.prototype.updateY=function(a){this.y=Math.round(a);for(var b=0,c=this._items.length,d=0,e=0,f=null;c>b;)f=this._items[b++],d=f.boundingBox.height,e=this.y+f.y,f.visible=e+d>0&&e<this._windowSize},App.TileList.prototype.updateLayout=function(a){var b=0,c=this._items.length,d=null,e=0,f=App.Direction;if(this._direction===f.X){for(;c>b;)d=this._items[b++],d.x=e,e=Math.round(e+d.boundingBox.width);this.boundingBox.width=e,this.boundingBox.height=d.boundingBox.height,a&&this.updateY(this.x)}else if(this._direction===f.Y){for(;c>b;)d=this._items[b++],d.y=e,e=Math.round(e+d.boundingBox.height);this.boundingBox.height=e,this.boundingBox.width=d.boundingBox.width,a&&this.updateY(this.y)}},App.TileList.prototype.destroy=function(){},App.TilePane=function(a,b,c,d,e){App.Pane.call(this,a,b,c,d,e)},App.TilePane.prototype=Object.create(App.Pane.prototype),App.TilePane.prototype.constructor=App.TilePane,App.TilePane.prototype.setContent=function(a){this.removeContent(),this._content=a,this._contentHeight=Math.round(this._content.boundingBox.height),this._contentWidth=Math.round(this._content.boundingBox.width),this.addChildAt(this._content,0),this._updateScrollers()},App.TilePane.prototype.resize=function(a,b){this._width=a||this._width,this._height=b||this._height,this._content&&(this._contentHeight=Math.round(this._content.boundingBox.height),this._contentWidth=Math.round(this._content.boundingBox.width),this._content.x>0?this._updateX(0):this._content.y>0?this._updateY(0):this._content.x+this._contentWidth<this._width?this._updateX(this._width-this._contentWidth):this._content.y+this._contentHeight<this._height&&this._updateY(this._height-this._contentHeight),this._updateScrollers())},App.TilePane.prototype._updateX=function(a){this._content.updateX(a)},App.TilePane.prototype._updateY=function(a){this._content.updateY(a)},App.ViewStack=function(a,b){if(PIXI.DisplayObjectContainer.call(this),this._children=[],this._selectedChild=null,this._selectedIndex=-1,this._childrenToHide=[],a)for(var c=0,d=a.length;d>c;)this.add(a[c++],b)},App.ViewStack.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.ViewStack.prototype.constructor=App.ViewStack,App.ViewStack.prototype.add=function(a,b){this._children[this._children.length]=a,b&&this.addChild(a)},App.ViewStack.prototype.selectChild=function(a){if(this._selectedChild){if(!a||this._selectedChild===a)return;this._childrenToHide[this._childrenToHide.length]=this._selectedChild}for(var b=0,c=this._children.length;c>b;)a===this._children[b++]&&(this._selectedChild=a,this._selectedIndex=b-1)},App.ViewStack.prototype.selectChildByIndex=function(a){if(!(0>a||a>=this._children.length)){if(this._selectedChild){if(this._selectedChild===this._children[a])return;this._childrenToHide[this._childrenToHide.length]=this._selectedChild}this._selectedChild=this._children[a],this._selectedIndex=a}},App.ViewStack.prototype.getSelectedChild=function(){return this._selectedChild},App.ViewStack.prototype.getSelectedIndex=function(){return this._selectedIndex},App.ViewStack.prototype.getChildByIndex=function(a){return 0>a||a>=this._children.length?null:this._children[a]},App.ViewStack.prototype.show=function(){if(this._selectedChild){for(var a=0,b=this._childrenToHide.length;b>a;a++)if(this._selectedChild===this._childrenToHide[a]){this._selectedChild.removeEventListener(App.EventType.COMPLETE,this,this._onHideComplete),this._childrenToHide.splice(a,1);break}this.contains(this._selectedChild)||this.addChild(this._selectedChild),this._selectedChild.show()}},App.ViewStack.prototype.hide=function(){for(var a=0,b=this._childrenToHide.length,c=null,d=App.EventType;b>a;)c=this._childrenToHide[a++],c.addEventListener(d.COMPLETE,this,this._onHideComplete),c.hide()},App.ViewStack.prototype._onHideComplete=function(a){if(a.state===App.TransitionState.HIDDEN){var b=a.target;b.removeEventListener(App.EventType.COMPLETE,this,this._onHideComplete),this.contains(b)&&this.removeChild(b);for(var c=0,d=this._childrenToHide.length;d>c;c++)if(b===this._childrenToHide[c]){this._childrenToHide.splice(c,1);break}}},App.Screen=function(a,b,c){PIXI.DisplayObjectContainer.call(this);var d=App.ModelLocator,e=App.ModelName,f=b.pixelRatio;this._model=a,this._layout=b,this._enabled=!1,this._eventsRegistered=!1,this._transitionState=App.TransitionState.HIDDEN,this._interactiveState=null,this._mouseDownPosition=null,this._mouseX=0,this._mouseY=0,this._leftSwipeThreshold=Math.round(30*f),this._rightSwipeThreshold=Math.round(5*f),this._swipeEnabled=!1,this._preferScroll=!0,this._ticker=d.getProxy(e.TICKER),this._eventDispatcher=new App.EventDispatcher(d.getProxy(e.EVENT_LISTENER_POOL)),this._showHideTween=new App.TweenProxy(c,App.Easing.outExpo,0,d.getProxy(e.EVENT_LISTENER_POOL)),this.alpha=0},App.Screen.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.Screen.prototype.constructor=App.Screen,App.Screen.prototype.show=function(){var a=App.TransitionState;(this._transitionState===a.HIDDEN||this._transitionState===a.HIDING)&&(this.enable(),this._transitionState=a.SHOWING,this._showHideTween.restart(),this.visible=!0)},App.Screen.prototype.hide=function(){var a=App.TransitionState;(this._transitionState===a.SHOWN||this._transitionState===a.SHOWING)&&(this._transitionState=a.HIDING,this._showHideTween.start(!0))},App.Screen.prototype.enable=function(){this._enabled||(this.interactive=!0,this._registerEventListeners(),this._enabled=!0)},App.Screen.prototype.disable=function(){this.interactive=!1,this._unRegisterEventListeners(),this._enabled=!1,this._interactiveState=null},App.Screen.prototype.addEventListener=function(a,b,c){this._eventDispatcher.addEventListener(a,b,c)},App.Screen.prototype.removeEventListener=function(a,b,c){this._eventDispatcher.removeEventListener(a,b,c)},App.Screen.prototype._registerEventListeners=function(){this._eventsRegistered||(this._eventsRegistered=!0,App.Device.TOUCH_SUPPORTED?(this.touchstart=this._onPointerDown,this.touchend=this._onPointerUp,this.touchendoutside=this._onPointerUp):(this.mousedown=this._onPointerDown,this.mouseup=this._onPointerUp,this.mouseupoutside=this._onPointerUp),this._ticker.addEventListener(App.EventType.TICK,this,this._onTick),this._showHideTween.addEventListener(App.EventType.COMPLETE,this,this._onTweenComplete))},App.Screen.prototype._unRegisterEventListeners=function(){this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),this._showHideTween.removeEventListener(App.EventType.COMPLETE,this,this._onTweenComplete),App.Device.TOUCH_SUPPORTED?(this.touchstart=null,this.touchend=null,this.touchendoutside=null):(this.mousedown=null,this.mouseup=null,this.mouseupoutside=null),this._eventsRegistered=!1},App.Screen.prototype._onTick=function(){if(this._showHideTween.isRunning()){var a=App.TransitionState;this._transitionState===a.SHOWING?this.alpha=this._showHideTween.progress:this._transitionState===a.HIDING&&(this.alpha=1-this._showHideTween.progress)}this._swipeEnabled&&this._interactiveState===App.InteractiveState.DRAGGING&&this._drag()},App.Screen.prototype._onTweenComplete=function(){var a=App.TransitionState;this._transitionState===a.SHOWING?(this._transitionState=a.SHOWN,this.alpha=1):this._transitionState===a.HIDING&&(this._transitionState=a.HIDDEN,this.disable(),this.alpha=0,this.visible=!1,this._eventDispatcher.dispatchEvent(App.EventType.COMPLETE,{target:this,state:this._transitionState}))},App.Screen.prototype._onPointerDown=function(a){this.stage&&(this._mouseDownPosition=a.getLocalPosition(this.stage),this._mouseX=this._mouseDownPosition.x,this._mouseY=this._mouseDownPosition.y),this._swipeEnabled&&(this._interactiveState=App.InteractiveState.DRAGGING)},App.Screen.prototype._onPointerUp=function(a){if(this._swipeEnabled&&(this._interactiveState===App.InteractiveState.SWIPING&&this._swipeEnd(),this._interactiveState=null),this.stage&&this._mouseDownPosition&&this._enabled){var b=this._mouseDownPosition.x,c=this._mouseDownPosition.y;this._mouseDownPosition=a.getLocalPosition(this.stage,this._mouseDownPosition);var d=b-this._mouseDownPosition.x,e=c-this._mouseDownPosition.y,f=d*d-e*e,g=App.TransitionState;Math.abs(f)<5&&(this._transitionState===g.SHOWING||this._transitionState===g.SHOWN)&&this._onClick(),this._mouseDownPosition=null}},App.Screen.prototype._drag=function(){var a=App.InteractiveState;if(this._interactiveState===a.DRAGGING&&this.stage&&this._mouseX){var b=this.stage.getTouchPosition(),c=b.x,d=b.y;this._mouseX-c>this._leftSwipeThreshold?(this._interactiveState=a.SWIPING,this._swipeStart(Math.abs(this._mouseY-d)>Math.abs(this._mouseX-c)&&this._preferScroll,App.Direction.LEFT)):c-this._mouseX>this._rightSwipeThreshold&&(this._interactiveState=a.SWIPING,this._swipeStart(Math.abs(this._mouseY-d)>Math.abs(this._mouseX-c)&&this._preferScroll,App.Direction.RIGHT)),this._mouseX=c,this._mouseY=d}},App.Screen.prototype._onClick=function(){this._eventDispatcher.dispatchEvent(App.EventType.CLICK)},App.Screen.prototype._swipeStart=function(){},App.Screen.prototype._swipeEnd=function(){},App.Screen.prototype.destroy=function(){this.disable(),this._eventDispatcher.destroy(),this._eventDispatcher=null,this._showHideTween.destroy(),this._showHideTween=null,this._ticker=null,this._model=null,this._layout=null,this._transitionState=null,this._mouseDownPosition=null},App.SelectTimeScreen=function(a,b){App.Screen.call(this,a,b,.4);var c=b.pixelRatio,d=b.width;this._inputBackground=new PIXI.Graphics,this._input=new App.TimeInput("00:00",30,d-Math.round(20*c),Math.round(40*c),c),this._header=new App.ListHeader("Select Date",d,c),this._calendar=new App.Calendar(new Date,d,c),this._render(),this.addChild(this._inputBackground),this.addChild(this._input),this.addChild(this._header),this.addChild(this._calendar)},App.SelectTimeScreen.prototype=Object.create(App.Screen.prototype),App.SelectTimeScreen.prototype.constructor=App.SelectTimeScreen,App.SelectTimeScreen.prototype._render=function(){var a=this._layout.pixelRatio,b=Math.round(60*a),c=this._layout.width;this._inputBackground.clear(),this._inputBackground.beginFill(15724527),this._inputBackground.drawRect(0,0,c,b),this._inputBackground.beginFill(13421772),this._inputBackground.drawRect(0,b-a,c,a),this._inputBackground.endFill(),this._input.x=Math.round(10*a),this._input.y=Math.round((b-this._input.height)/2),this._header.y=b,this._calendar.y=Math.round(this._header.y+this._header.height)},App.SelectTimeScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._input.enable()},App.SelectTimeScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._input.disable()},App.AccountButton=function(a,b,c){PIXI.Graphics.call(this),this._model=a,this._layout=b;var d=this._layout.pixelRatio,e=Math.round(70*d);this.boundingBox=new PIXI.Rectangle(0,0,this._layout.width,e),this._nameLabel=new PIXI.Text(this._model.name+" "+c,{font:Math.round(24*d)+"px HelveticaNeueCond",fill:"#394264"}),this._nameLabel.x=Math.round(15*d),this._nameLabel.y=Math.round(15*d),this._detailsLabel=new PIXI.Text("Balance: 2.876, Expenses: -250, Income: 1.500",{font:Math.round(12*d)+"px Arial",fill:"#999999"}),this._detailsLabel.x=Math.round(15*d),this._detailsLabel.y=Math.round(45*d),this.addChild(this._nameLabel),this.addChild(this._detailsLabel),this.interactive=!0,this._render()},App.AccountButton.prototype=Object.create(PIXI.Graphics.prototype),App.AccountButton.prototype.constructor=App.AccountButton,App.AccountButton.prototype.resize=function(a){this.boundingBox.width=a,this._render()},App.AccountButton.prototype._render=function(){var a=Math.round(10*this._layout.pixelRatio);this.clear(),this.beginFill(15724527),this.drawRect(0,0,this.boundingBox.width,this.boundingBox.height),this.beginFill(16777215),this.drawRect(a,0,this.boundingBox.width-2*a,1),this.beginFill(13421772),this.drawRect(a,this.boundingBox.height-1,this.boundingBox.width-2*a,1),this.endFill()},App.AccountButton.prototype.destroy=function(){this.clear(),this.interactive=!1,this._layout=null,this._model=null,this.boundingBox=null,this.removeChild(this._nameLabel),this._nameLabel=null,this.removeChild(this._detailsLabel),this._detailsLabel=null},App.AccountScreen=function(a,b){App.Screen.call(this,a,b,.4);var c=0,d=this._model.length(),e=App.AccountButton,f=null;for(this._buttons=new Array(d),this._buttonList=new App.TileList(App.Direction.Y,b.height);30>c;c++)f=new e(this._model.getItemAt(0),this._layout,c),this._buttons[c]=f,this._buttonList.add(f);this._buttonList.updateLayout(),this._pane=new App.TilePane(App.ScrollPolicy.OFF,App.ScrollPolicy.AUTO,this._layout.width,this._layout.height,this._layout.pixelRatio),this._pane.setContent(this._buttonList),this.addChild(this._pane)},App.AccountScreen.prototype=Object.create(App.Screen.prototype),App.AccountScreen.prototype.constructor=App.AccountScreen,App.AccountScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._pane.resetScroll(),this._pane.enable()},App.AccountScreen.prototype._onClick=function(){App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,App.ScreenName.CATEGORY)},App.AccountScreen.prototype.destroy=function(){App.Screen.prototype.destroy.call(this),this.disable(),this.removeChild(this._pane),this._pane.destroy(),this._pane=null,this._buttons.length=0,this._buttons=null},App.CategoryButton=function(a,b,c){PIXI.DisplayObjectContainer.call(this);var d=App.ModelLocator,e=App.ModelName;this._model=a,this._layout=b,this.boundingBox=d.getProxy(e.RECTANGLE_POOL).allocate(),this.boundingBox.width=b.width,this.boundingBox.height=Math.round(50*b.pixelRatio),this._model=a,this._layout=b,this._ticker=d.getProxy(e.TICKER),this._surfaceSkin=new PIXI.Graphics,this._colorStripe=new PIXI.Graphics,this._icon=PIXI.Sprite.fromFrame(a.icon),this._nameLabel=new PIXI.Text(a.name,c),this._surfaceSkin.addChild(this._colorStripe),this._surfaceSkin.addChild(this._icon),this._surfaceSkin.addChild(this._nameLabel),this.addChild(this._surfaceSkin)},App.CategoryButton.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.CategoryButton.prototype.constructor=App.CategoryButton,App.CategoryButton.prototype._render=function(){var a=this._layout.pixelRatio,b=Math.round(10*a),c=this.boundingBox.width,d=this.boundingBox.height;this._surfaceSkin.clear(),this._surfaceSkin.beginFill(15724527),this._surfaceSkin.drawRect(0,0,c,d),this._surfaceSkin.beginFill(16777215),this._surfaceSkin.drawRect(b,0,c-2*b,1),this._surfaceSkin.beginFill(13421772),this._surfaceSkin.drawRect(b,d-1,c-2*b,1),this._surfaceSkin.endFill(),this._colorStripe.clear(),this._colorStripe.beginFill("0x"+App.MathUtils.rgbToHex(Math.round(127*Math.sin(3)+128),Math.round(127*Math.sin(5)+128),Math.round(127*Math.sin(7)+128))),this._colorStripe.drawRect(0,0,Math.round(4*a),d),this._colorStripe.endFill(),this._icon.width=Math.round(20*a),this._icon.height=Math.round(20*a),this._icon.x=Math.round(25*a),this._icon.y=Math.round((d-this._icon.height)/2),this._icon.tint=3752548,this._nameLabel.x=Math.round(64*a),this._nameLabel.y=Math.round(18*a)},App.CategoryButton.prototype.destroy=function(){this.clear(),this.allocated=!1,this.interactive=!1,App.ModelLocator.getProxy(App.ModelName.RECTANGLE_POOL).release(this.boundingBox),this.boundingBox.reset(),this.boundingBox=null,this._layout=null,this._model=null,this._ticker=null,this._surfaceSkin.removeChild(this._colorStripe),this._colorStripe.clear(),this._colorStripe=null,this._surfaceSkin.removeChild(this._icon),this._icon=null,this._surfaceSkin.removeChild(this._nameLabel),this._nameLabel=null,this.removeChild(this._surfaceSkin),this._surfaceSkin.clear(),this._surfaceSkin=null},App.CategoryButtonEdit=function(a,b,c,d){App.CategoryButton.call(this,a,b,c),this._enabled=!1,this._interactiveState=null,this._dragFriction=.5,this._snapForce=.5,this._editOffset=Math.round(80*b.pixelRatio),this._editButtonShown=!1,this._background=new PIXI.Graphics,this._editLabel=new PIXI.Text("Edit",d),this._render(),this.addChildAt(this._editLabel,0),this.addChildAt(this._background,0)},App.CategoryButtonEdit.prototype=Object.create(App.CategoryButton.prototype),App.CategoryButtonEdit.prototype.constructor=App.CategoryButtonEdit,App.CategoryButtonEdit.prototype._render=function(){App.CategoryButton.prototype._render.call(this);var a=this._layout.pixelRatio,b=this.boundingBox.width,c=this.boundingBox.height;this._background.beginFill(15020051),this._background.drawRect(0,0,b,c),this._background.endFill(),this._editLabel.x=Math.round(b-50*a),this._editLabel.y=Math.round(18*a)},App.CategoryButtonEdit.prototype._enableInteraction=function(){this._enabled||(this._enabled=!0,this._ticker.addEventListener(App.EventType.TICK,this,this._onTick),this.interactive=!0)},App.CategoryButtonEdit.prototype._disableInteraction=function(){this.interactive=!1,this._interactiveState=null,this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),this._enabled=!1},App.CategoryButtonEdit.prototype._onTick=function(){var a=App.InteractiveState;this._interactiveState===a.SWIPING?this._swipe():this._interactiveState===a.SNAPPING&&this._snap()},App.CategoryButtonEdit.prototype.swipeStart=function(a){var b=App.Direction,c=App.InteractiveState;this._interactiveState||(this._editButtonShown||a!==b.LEFT?this._editButtonShown&&a===b.RIGHT&&(this._interactiveState=c.SNAPPING,this._enableInteraction()):(this._interactiveState=c.SWIPING,this._enableInteraction()))},App.CategoryButtonEdit.prototype.swipeEnd=function(){this._interactiveState===App.InteractiveState.SWIPING&&(this._interactiveState=App.InteractiveState.SNAPPING)},App.CategoryButtonEdit.prototype._swipe=function(){if(this.stage&&!this._editButtonShown){var a=this._layout.width;this._surfaceSkin.x=-Math.round(a*(1-this.stage.getTouchPosition().x/a)*this._dragFriction)}},App.CategoryButtonEdit.prototype._snap=function(){var a=Math.round(this._surfaceSkin.x*this._snapForce);this._surfaceSkin.x<-this._editOffset?a>=-this._editOffset?(this._editButtonShown=!0,this._disableInteraction(),this._surfaceSkin.x=-this._editOffset):this._surfaceSkin.x=a:a>=-1?(this._editButtonShown=!1,this._disableInteraction(),this._surfaceSkin.x=0):this._surfaceSkin.x=a},App.CategoryButtonEdit.prototype.close=function(a){this._editButtonShown&&(a?(this._surfaceSkin.x=0,this._editButtonShown=!1):(this._interactiveState=App.InteractiveState.SNAPPING,this._enableInteraction()))},App.CategoryButtonEdit.prototype.destroy=function(){},App.CategoryButtonExpand=function(a,b,c){App.CategoryButton.call(this,a,b,c);var d=App.ModelLocator.getProxy(App.ModelName.EVENT_LISTENER_POOL);this._eventsRegistered=!1,this._transitionState=App.TransitionState.CLOSED,this._buttonHeight=this.boundingBox.height,this._subCategoryListHeight=Math.round(150*this._layout.pixelRatio),this._openCloseTween=new App.TweenProxy(.4,App.Easing.outExpo,0,d),this._eventDispatcher=new App.EventDispatcher(d),this._subCategoryList=new PIXI.Graphics,this._subCategoryList.visible=!1,this._render(),this.addChildAt(this._subCategoryList,0)},App.CategoryButtonExpand.prototype=Object.create(App.CategoryButton.prototype),App.CategoryButtonExpand.prototype.constructor=App.CategoryButtonExpand,App.CategoryButtonExpand.prototype._render=function(){App.CategoryButton.prototype._render.call(this),this._subCategoryList.beginFill(16777215),this._subCategoryList.drawRect(0,0,this.boundingBox.width,this._subCategoryListHeight),this._subCategoryList.endFill(),this._subCategoryList.y=this._buttonHeight},App.CategoryButtonExpand.prototype._registerEventListeners=function(){this._eventsRegistered||(this._eventsRegistered=!0,this._ticker.addEventListener(App.EventType.TICK,this,this._onTick),this._openCloseTween.addEventListener(App.EventType.COMPLETE,this,this._onTransitionComplete))},App.CategoryButtonExpand.prototype._unRegisterEventListeners=function(){this._openCloseTween.removeEventListener(App.EventType.COMPLETE,this,this._onTransitionComplete),this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),this._eventsRegistered=!1},App.CategoryButtonExpand.prototype._onTick=function(){this._openCloseTween.isRunning()&&this._updateTransition()},App.CategoryButtonExpand.prototype._updateTransition=function(){var a=App.TransitionState;this._transitionState===a.OPENING?this.boundingBox.height=Math.round(this._buttonHeight+this._subCategoryListHeight*this._openCloseTween.progress):this._transitionState===a.CLOSING&&(this.boundingBox.height=Math.round(this._buttonHeight+this._subCategoryListHeight*(1-this._openCloseTween.progress))),this._eventDispatcher.dispatchEvent(App.EventType.LAYOUT_UPDATE)},App.CategoryButtonExpand.prototype._onTransitionComplete=function(){var a=App.TransitionState;this._transitionState===a.OPENING?(this._transitionState=a.OPEN,this.boundingBox.height=this._buttonHeight+this._subCategoryListHeight):this._transitionState===a.CLOSING&&(this._transitionState=a.CLOSED,this.boundingBox.height=this._buttonHeight,this._subCategoryList.visible=!1),this._unRegisterEventListeners(),this._eventDispatcher.dispatchEvent(App.EventType.COMPLETE,this)},App.CategoryButtonExpand.prototype.onClick=function(){var a=App.TransitionState;this._transitionState===a.CLOSED||this._transitionState===a.CLOSING?this.open():(this._transitionState===a.OPEN||this._transitionState===a.OPENING)&&this.close()},App.CategoryButtonExpand.prototype.isOpen=function(){return this._transitionState!==App.TransitionState.CLOSED},App.CategoryButtonExpand.prototype.open=function(){var a=App.TransitionState;(this._transitionState===a.CLOSED||this._transitionState===a.CLOSING)&&(this._registerEventListeners(),this._subCategoryList.visible=!0,this._transitionState=a.OPENING,this._openCloseTween.restart())},App.CategoryButtonExpand.prototype.close=function(){var a=App.TransitionState;this._transitionState===a.OPEN||this._transitionState===a.OPENING?(this._registerEventListeners(),this._transitionState=a.CLOSING,this._openCloseTween.start(!0)):this._eventDispatcher.dispatchEvent(App.EventType.COMPLETE,this)},App.CategoryButtonExpand.prototype.addEventListener=function(a,b,c){this._eventDispatcher.addEventListener(a,b,c)},App.CategoryButtonExpand.prototype.removeEventListener=function(a,b,c){this._eventDispatcher.removeEventListener(a,b,c)},App.CategoryScreen=function(a,b){App.Screen.call(this,a,b,.4);var c=App.CategoryButtonExpand,d=Math.round(18*b.pixelRatio)+"px HelveticaNeueCond",e={font:d,fill:"#394264"},f=0,g=this._model.length(),h=null;for(this._interactiveButton=null,this._buttons=new Array(g),this._buttonList=new App.TileList(App.Direction.Y,b.height);g>f;f++)h=new c(this._model.getItemAt(f),b,e),this._buttons[f]=h,this._buttonList.add(h);this._buttonList.updateLayout(),this._buttonsInTransition=[],this._layoutDirty=!1,this._pane=new App.TilePane(App.ScrollPolicy.OFF,App.ScrollPolicy.AUTO,b.width,b.height,b.pixelRatio),this._pane.setContent(this._buttonList),this.addChild(this._pane)},App.CategoryScreen.prototype=Object.create(App.Screen.prototype),App.CategoryScreen.prototype.constructor=App.CategoryScreen,App.CategoryScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._pane.resetScroll(),this._pane.enable()},App.CategoryScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._pane.disable()},App.CategoryScreen.prototype._onTick=function(){App.Screen.prototype._onTick.call(this),this._layoutDirty&&this._updateLayout()},App.CategoryScreen.prototype._onTweenComplete=function(){App.Screen.prototype._onTweenComplete.call(this),this._transitionState===App.TransitionState.HIDDEN&&this._closeButtons(!0)},App.CategoryScreen.prototype._swipeStart=function(a,b){a||this._pane.cancelScroll(),this._interactiveButton=this._getButtonUnderPoint(this.stage.getTouchPosition()),this._interactiveButton.swipeStart(b),this._closeButtons(!1)},App.CategoryScreen.prototype._swipeEnd=function(){this._interactiveButton&&(this._interactiveButton.swipeEnd(),this._interactiveButton=null)},App.CategoryScreen.prototype._closeButtons=function(a){for(var b=0,c=this._buttons.length,d=null,e=App.EventType;c>b;)d=this._buttons[b++],d!==this._interactiveButton&&d.isOpen()&&(-1===this._buttonsInTransition.indexOf(d)&&(this._buttonsInTransition.push(d),d.addEventListener(e.LAYOUT_UPDATE,this,this._onButtonLayoutUpdate),d.addEventListener(e.COMPLETE,this,this._onButtonTransitionComplete)),d.close(a))},App.CategoryScreen.prototype._onClick=function(){var a=this.stage.getTouchData().getLocalPosition(this),b=App.EventType;this._interactiveButton=this._getButtonUnderPoint(a),-1===this._buttonsInTransition.indexOf(this._interactiveButton)&&(this._buttonsInTransition.push(this._interactiveButton),this._interactiveButton.addEventListener(b.LAYOUT_UPDATE,this,this._onButtonLayoutUpdate),this._interactiveButton.addEventListener(b.COMPLETE,this,this._onButtonTransitionComplete)),this._interactiveButton.onClick(a),this._pane.cancelScroll()},App.CategoryScreen.prototype._onButtonLayoutUpdate=function(){this._layoutDirty=!0},App.CategoryScreen.prototype._onButtonTransitionComplete=function(a){var b=0,c=this._buttonsInTransition.length,d=App.EventType;for(a.removeEventListener(d.LAYOUT_UPDATE,this,this._onButtonLayoutUpdate),a.removeEventListener(d.COMPLETE,this,this._onButtonTransitionComplete);c>b;b++)if(a===this._buttonsInTransition[b]){this._buttonsInTransition.splice(b,1);break}0===this._buttonsInTransition.length&&(this._interactiveButton=null,this._layoutDirty=!1,this._updateLayout())},App.CategoryScreen.prototype._updateLayout=function(){this._buttonList.updateLayout(!0),this._pane.resize()},App.CategoryScreen.prototype._getButtonUnderPoint=function(a){for(var b=0,c=this._buttons.length,d=a.y,e=0,f=0,g=this.y+this._buttonList.y,h=null;c>b;)if(h=this._buttons[b++],f=h.y+g,e=h.boundingBox.height,d>=f&&f+e>=d)return h;return null},App.CategoryScreen.prototype.destroy=function(){App.Screen.prototype.destroy.call(this),this.disable(),this.removeChild(this._pane),this._pane.destroy(),this._pane=null,this._buttons.length=0,this._buttons=null},App.ApplicationView=function(a,b,c,d,e){PIXI.DisplayObjectContainer.call(this);var f=App.ModelLocator,g=App.ModelName,h=f.getProxy(g.ACCOUNTS).getItemAt(0).getCategories();this._renderer=b,this._stage=a,this._layout={originalWidth:c,originalHeight:d,width:Math.round(c*e),height:Math.round(d*e),headerHeight:Math.round(50*e),bodyHeight:Math.round(d-50-e),pixelRatio:e},this._background=new PIXI.Graphics,this._background.beginFill(12245589,1),this._background.drawRect(0,0,this._layout.width,this._layout.height),this._background.endFill(),this._screenStack=new App.ViewStack([new App.AccountScreen(h,this._layout),new App.CategoryScreen(h,this._layout),new App.SelectTimeScreen(null,this._layout)]),this._screenStack.selectChildByIndex(App.ScreenName.SELECT_TIME),this._screenStack.show(),this.addChild(this._background),this.addChild(this._screenStack),this._registerEventListeners()},App.ApplicationView.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.ApplicationView.prototype.constructor=App.ApplicationView,App.ApplicationView.prototype._registerEventListeners=function(){App.ModelLocator.getProxy(App.ModelName.TICKER).addEventListener(App.EventType.TICK,this,this._onTick)},App.ApplicationView.prototype.changeScreen=function(a){this._screenStack.selectChildByIndex(a),this._screenStack.show(),this._screenStack.hide()},App.ApplicationView.prototype._onTick=function(){this._renderer.render(this._stage)},App.ApplicationView.prototype._onResize=function(){},App.Easing={linear:function(a){return a},inQuad:function(a){return a*a},outQuad:function(a){return-(a-=1)*a+1},inOutQuad:function(a){return(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1)},inCubic:function(a){return a*a*a},outCubic:function(a){return--a*a*a+1},inOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},inExpo:function(a){return 0===a?0:Math.pow(2,10*(a-1))},outExpo:function(a){return 1===a?1:1-Math.pow(2,-10*a)},inOutExpo:function(a){return 0===a?0:1===a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},inElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1===a?1:(c||(c=.3),b=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c)))},outElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1===a?1:(c||(c=.3),b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/c)+1)},inOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:2===(a/=.5)?1:(c||(c=.3*1.5),b=c/(2*Math.PI)*Math.asin(1/d),1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c):d*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c)*.5+1)}},App.TweenProxy=function(a,b,c,d){App.EventDispatcher.call(this,d),this.progress=c||0,this._interval=-1,this._running=!1,this._reversed=!1,this._start=-1,this._end=-1,this._reversedEnd=-1,this._now=-1,this._duration=1e3*a||1e3,this._ease=b||App.Easing.linear,this._timeStamp=window.performance&&window.performance.now?window.performance:Date,this._intervalReference=this._tweenInterval.bind(this)},App.TweenProxy.prototype=Object.create(App.EventDispatcher.prototype),App.TweenProxy.prototype.constructor=App.TweenProxy,App.TweenProxy.prototype.setEase=function(a){this._ease=a},App.TweenProxy.prototype.start=function(a,b){b&&this.setEase(b),this._running?a&&(this._reversed?this._reversed=!1:(this._reversed=!0,this._reversedEnd=this._start+2*(this._now-this._start))):(this._running=!0,this._reversed=!1,this._tween())},App.TweenProxy.prototype.stop=function(){this._running=!1,clearInterval(this._interval),this._interval=-1},App.TweenProxy.prototype.restart=function(){this._running&&this.stop(),this.start()},App.TweenProxy.prototype.isRunning=function(){return this._running},App.TweenProxy.prototype._tween=function(){this._interval>0&&(clearInterval(this._interval),this._interval=-1),this.progress=0,this._start=this._timeStamp.now(),this._end=this._start+this._duration,this._interval=setInterval(this._intervalReference,1e3/120)},App.TweenProxy.prototype._tweenInterval=function(){this._now=this._timeStamp.now();var a=this._reversed?this._reversedEnd:this._end,b=(this._duration-(a-this._now))/this._duration;0>b?b=0:b>1&&(b=1),this.progress=this._ease(b),this._now>=a&&(this.progress=1,this.stop(),this.dispatchEvent(App.EventType.COMPLETE))},App.TweenProxy.prototype.destroy=function(){App.EventDispatcher.prototype.destroy.call(this),this.stop(),this._intervalReference=null,this._timeStamp=null,this._ease=null},App.Ticker=function(a){App.EventDispatcher.call(this,a),this._rafListener=this._raf.bind(this),this._isRunning=!1},App.Ticker.prototype=Object.create(App.EventDispatcher.prototype),App.Ticker.prototype.constructor=App.Ticker,App.Ticker.prototype.addEventListener=function(a,b,c){App.EventDispatcher.prototype.addEventListener.call(this,a,b,c),this._isRunning||(this._isRunning=!0,window.requestAnimationFrame(this._rafListener))},App.Ticker.prototype.removeEventListener=function(a,b,c){App.EventDispatcher.prototype.removeEventListener.call(this,a,b,c),0===this._listeners.length&&(this._isRunning=!1)},App.Ticker.prototype.removeAllListeners=function(){App.EventDispatcher.prototype.removeAllListeners.call(this),this._isRunning=!1},App.Ticker.prototype._raf=function(){this._isRunning&&(window.requestAnimationFrame(this._rafListener),this.dispatchEvent(App.EventType.TICK))},App.Controller={_eventListenerPool:null,_eventCommandMap:{},_commands:[],init:function(a,b){this._eventListenerPool=a;
for(var c=0,d=b.length,e=null;d>c;)e=b[c++],this._eventCommandMap[e.eventType]={constructor:e.command};e=null,b=null},_onCommandComplete:function(a){this._destroyCommand(a)},_destroyCommand:function(a){for(var b=0,c=this._commands.length,d=null;c>b;)if(d=this._commands[b++],d===a){d.removeEventListener(App.EventType.COMPLETE,this,this._onCommandComplete),d.destroy(),this._commands.splice(b,1);break}},dispatchEvent:function(a,b,c){var d=this._eventCommandMap[a].constructor;if(d){var e=null;if(c)for(var f=0,g=this._commands.length;g>f;)e=this._commands[f++],e instanceof d&&!e.allowMultipleInstances&&this._destroyCommand(e);e=new d(this._eventListenerPool),this._commands.push(e),e.addEventListener(App.EventType.COMPLETE,this,this._onCommandComplete),e.execute(b)}}},App.Command=function(a,b){App.EventDispatcher.call(this,b),this.allowMultipleInstances=a},App.Command.prototype=Object.create(App.EventDispatcher.prototype),App.Command.prototype.constructor=App.Command,App.Command.prototype.execute=function(){},App.Command.prototype.destroy=function(){App.EventDispatcher.prototype.destroy.call(this)},App.LoadData=function(a){App.Command.call(this,!1,a),this._jsonLoader=null,this._fontLoadingInterval=-1,this._fontInfoElement=null},App.LoadData.prototype=Object.create(App.Command.prototype),App.LoadData.prototype.constructor=App.LoadData,App.LoadData.prototype.execute=function(){this._loadAssets()},App.LoadData.prototype._loadAssets=function(){this._jsonLoader=new PIXI.JsonLoader("./data/icons-big.json"),this._jsonLoader.on("loaded",function(){this._jsonLoader.removeAllListeners("loaded"),this._jsonLoader=null,this._loadFont()}.bind(this)),this._jsonLoader.load()},App.LoadData.prototype._loadFont=function(){this._fontInfoElement=document.getElementById("fontInfo");var a=this._fontInfoElement.offsetWidth;this._fontLoadingInterval=setInterval(function(){this._fontInfoElement.offsetWidth!==a&&(clearInterval(this._fontLoadingInterval),this._loadData())}.bind(this),100),this._fontInfoElement.style.fontFamily="HelveticaNeueCond"},App.LoadData.prototype._loadData=function(){var a=new XMLHttpRequest;a.open("GET","./data/accounts.json",!0),a.onload=function(){a.status>=200&&a.status<400?this.dispatchEvent(App.EventType.COMPLETE,a.responseText):console.log("error")}.bind(this),a.onerror=function(){console.log("on error"),this.dispatchEvent(App.EventType.COMPLETE)},a.send()},App.LoadData.prototype.destroy=function(){App.Command.prototype.destroy.call(this),this._jsonLoader=null,clearInterval(this._fontLoadingInterval),this._fontInfoElement=null},App.Initialize=function(){this._eventListenerPool=new App.ObjectPool(App.EventListener,10),App.Command.call(this,!1,this._eventListenerPool),this._loadDataCommand=new App.LoadData(this._eventListenerPool)},App.Initialize.prototype=Object.create(App.Command.prototype),App.Initialize.prototype.constructor=App.Initialize,App.Initialize.prototype.execute=function(){this._loadDataCommand.addEventListener(App.EventType.COMPLETE,this,this._onLoadDataComplete),this._loadDataCommand.execute()},App.Initialize.prototype._onLoadDataComplete=function(a){this._loadDataCommand.destroy(),this._loadDataCommand=null,this._initModel(a),this._initCommands(),this._initView(),this.dispatchEvent(App.EventType.COMPLETE)},App.Initialize.prototype._initModel=function(a){var b=App.ModelLocator,c=App.ModelName,d=App.Collection;b.addProxy(c.EVENT_LISTENER_POOL,this._eventListenerPool),b.addProxy(c.RECTANGLE_POOL,new App.ObjectPool(App.Rectangle,20)),b.addProxy(c.TICKER,new App.Ticker(this._eventListenerPool)),b.addProxy(c.ACCOUNTS,new d(JSON.parse(a).accounts,App.Account,null,this._eventListenerPool))},App.Initialize.prototype._initCommands=function(){App.Controller.init(this._eventListenerPool,[{eventType:App.EventType.CHANGE_SCREEN,command:App.ChangeScreen}])},App.Initialize.prototype._initView=function(){var a=document.getElementsByTagName("canvas")[0],b=a.getContext("2d"),c=window.devicePixelRatio||1,d=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1,e=c/d,f=window.innerWidth,g=window.innerHeight,h=new PIXI.Stage(16777215),i=new PIXI.CanvasRenderer(f,g,{view:a,resolution:1,transparent:!1,autoResize:!1,clearBeforeRender:!1});e>1&&(e>2&&(e=2),a.style.width=f+"px",a.style.height=g+"px",a.width=a.width*e,a.height=a.height*e,b.scale(e,e),h.interactionManager.setPixelRatio(e)),PIXI.CanvasTinter.tintMethod=PIXI.CanvasTinter.tintWithOverlay,App.ViewLocator.addViewSegment(App.ViewName.APPLICATION_VIEW,h.addChild(new App.ApplicationView(h,i,f,g,e))),i.render(h)},App.Initialize.prototype.destroy=function(){App.Command.prototype.destroy.call(this),this._loadDataCommand&&(this._loadDataCommand.destroy(),this._loadDataCommand=null),this._eventListenerPool=null},App.ChangeScreen=function(a){App.Command.call(this,!1,a)},App.ChangeScreen.prototype=Object.create(App.Command.prototype),App.ChangeScreen.prototype.constructor=App.ChangeScreen,App.ChangeScreen.prototype.execute=function(a){App.ViewLocator.getViewSegment(App.ViewName.APPLICATION_VIEW).changeScreen(a),this.dispatchEvent(App.EventType.COMPLETE,this)},App.ChangeScreen.prototype.destroy=function(){App.Command.prototype.destroy.call(this)},function(){function a(){b.destroy(),b=null}var b=new App.Initialize;b.addEventListener(App.EventType.COMPLETE,this,a),b.execute()}();