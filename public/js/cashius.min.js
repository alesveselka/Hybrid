//Cashius, 06-12-2014, 14:12:19
Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),"function"!=typeof Object.create&&!function(){var a=function(){};Object.create=function(b){if(arguments.length>1)throw Error("Second argument not supported");if(null===b)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof b)throw TypeError("Argument must be an object");return a.prototype=b,new a}}(),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(function(){a(+new Date)},1e3/60)}),window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelRequestAnimationFrame;var App=App||{};App.MathUtils={rgbToHex:function(a,b,c){return((1<<24)+(a<<16)+(b<<8)+c).toString(16).slice(1)},hexToRgb:function(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null}},App.EventType={INITIALIZE:"INITIALIZE",COMPLETE:"COMPLETE",UPDATE:"UPDATE",PROGRESS:"PROGRESS",ERROR:"ERROR",CHANGE:"CHANGE",LAYOUT_UPDATE:"LAYOUT_UPDATE",TICK:"TICK",ADDED:"ADDED",REMOVED:"REMOVED",RESIZE:"resize",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",CLICK:"click"},App.ModelName={TICKER:"TICKER",EVENT_LISTENER_POOL:"EVENT_LISTENER_POOL",ACCOUNTS:"ACCOUNTS",TRANSACTIONS:"TRANSACTIONS",SETTINGS:"SETTINGS",FILTERS:"FILTERS",CURRENCIES:"CURRENCIES"},App.ViewName={APPLICATION_VIEW:"APPLICATION_VIEW"},App.InteractiveState={OVER:"OVER",OUT:"OUT",DRAGGING:"DRAGGING",SCROLLING:"SCROLLING",SNAPPING:"SNAPPING"},App.TransitionState={SHOWING:"SHOWING",SHOWN:"SHOWN",HIDING:"HIDING",HIDDEN:"HIDDEN"},App.ScrollPolicy={ON:"ON",OFF:"OFF",AUTO:"AUTO"},App.Direction={X:"x",Y:"y"},App.EventListener=function(a){this.allocated=!1,this.poolIndex=a,this.type=null,this.scope=null,this.handler=null},App.EventListener.prototype.reset=function(){this.allocated=!1,this.type=null,this.scope=null,this.handler=null},App.EventDispatcher=function(a){this._listeners=[],this._listenersPool=a},App.EventDispatcher.prototype.addEventListener=function(a,b,c){if(!this.hasEventListener(a,b,c)){var d=this._listenersPool.allocate();d.type=a,d.scope=b,d.handler=c,this._listeners[this._listeners.length]=d}},App.EventDispatcher.prototype.hasEventListener=function(a,b,c){for(var d=0,e=this._listeners.length,f=null;e>d;)if(f=this._listeners[d++],f.type===a&&f.scope===b&&f.handler===c)return f=null,!0;return f=null,!1},App.EventDispatcher.prototype.removeEventListener=function(a,b,c){for(var d=0,e=this._listeners.length,f=null;e>d;d++)if(f=this._listeners[d],f.type===a&&f.scope===b&&f.handler===c){this._listenersPool.release(f),f.reset(),this._listeners.splice(d,1);break}f=null},App.EventDispatcher.prototype.removeAllListeners=function(){for(var a=0,b=this._listeners.length,c=null;b>a;a++)c=this._listeners[a],this._listenersPool.release(c),c.reset(),this._listeners.splice(a,1);c=null,this._listeners.length=0},App.EventDispatcher.prototype.dispatchEvent=function(a,b){for(var c=0,d=this._listeners.length,e=null;d>c;)e=this._listeners[c++],e&&e.type===a&&e.handler.call(e.scope,b,a);e=null},App.EventDispatcher.prototype.pipe=function(a,b){a.addEventListener(b,this,this._pipeListener)},App.EventDispatcher.prototype.unPipe=function(a,b){a.removeEventListener(b,this,this._pipeListener)},App.EventDispatcher.prototype._pipeListener=function(a,b){this.dispatchEvent(b,a)},App.EventDispatcher.prototype.destroy=function(){this.removeAllListeners(),this._listeners.length=0,this._listeners=null,this._listenersPool=null},App.ModelLocator={_proxies:{},addProxy:function(a,b){if(this._proxies[a])throw Error("Proxy "+a+" already exist");this._proxies[a]=b},hasProxy:function(a){return this._proxies[a]},getProxy:function(a){return this._proxies[a]}},App.ObjectPool=function(a,b){this._objectClass=a,this._size=b,this._items=[],this._freeItems=[]},App.ObjectPool.prototype.preAllocate=function(){var a=this._items.length,b=a+this._size;this._items.length=b;for(var c=a;b>c;c++)this._items[c]=new this._objectClass(c),this._freeItems.push(c)},App.ObjectPool.prototype.allocate=function(){0===this._freeItems.length&&this.preAllocate();var a=this._freeItems.shift(),b=this._items[a];return b.allocated=!0,b},App.ObjectPool.prototype.release=function(a){a.allocated=!1,this._freeItems.push(a.poolIndex)},App.Collection=function(a,b,c,d){if(App.EventDispatcher.call(this,d),a){var e=0,f=a.length;for(this._items=new Array(f);f>e;e++)this._items[e]=new b(a[e],this,c)}this._items||(this._items=[]),this._currentItem=null,this._currentIndex=-1},App.Collection.prototype=Object.create(App.EventDispatcher.prototype),App.Collection.prototype.constructor=App.Collection,App.Collection.prototype.addItem=function(a){this._items[this._items.length]=a,this.dispatchEvent(App.EventType.ADDED,a)},App.Collection.prototype.setCurrent=function(a,b){(a!==this._currentItem||b)&&(this._currentItem=a,this._updateCurrentIndex(),this.dispatchEvent(App.EventType.CHANGE,data))},App.Collection.prototype.getCurrent=function(){return this._currentItem},App.Collection.prototype.getItemAt=function(a){return this._items[a]},App.Collection.prototype.previous=function(){var a=this._currentIndex;return-1===a&&(a=0),0>=a?a=this._items.length-1:a-=1,this._items[a]},App.Collection.prototype.next=function(){var a=this._currentIndex;return-1===a||a>=this._items.length-1?a=0:a+=1,this._items[a]},App.Collection.prototype.other=function(a){var b=this._items.length;return this._items[this._currentIndex+b+a]%b},App.Collection.prototype.hasItem=function(a){return this.indexOf(a)>-1},App.Collection.prototype.removeItemAt=function(a){var b=this._items.splice(a,1)[0];return this._updateCurrentIndex(),this.dispatchEvent(App.EventType.REMOVED,b),b},App.Collection.prototype._updateCurrentIndex=function(){this._currentIndex=this.indexOf(this._currentItem)},App.Collection.prototype.indexOf=function(a){for(var b=8,c=0,d=Math.floor(this._items.length/b)*b;d>c;){if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1}for(d=this._items.length;d>c;)if(this._items[c++]===a)return c-1;return-1},App.Collection.prototype.index=function(){return this._currentIndex},App.Collection.prototype.length=function(){return this._items.length},App.Account=function(a){this._data=a,this._name=null,this._categories=null},App.Account.prototype.getName=function(){return this._name||(this._name=this._data.name),this._name},App.Account.prototype.getBalance=function(){},App.Account.prototype.getExpenses=function(){},App.Account.prototype.getIncome=function(){},App.Account.prototype.getCategories=function(){return this._categories||(this._categories=new App.Collection),this._categories},App.Transaction=function(a,b,c,d,e,f,g,h){this.amount=a,this.currency=b,this.category=c,this.date=d,this.type=e,this.mode=f,this.repeating=g,this.pending=h},App.Category=function(a,b,c,d,e,f){this.name=a,this.color=b,this.icon=c,this.subCategories=d,this.account=e,this.budget=f},App.Filter=function(a,b,c){this.startDate=a,this.endDate=b,this.categories=c},App.ViewLocator={_viewSegments:{},addViewSegment:function(a,b){if(this._viewSegments[a])throw Error("View segment "+a+" already exist");return this._viewSegments[a]=b,b},hasViewSegment:function(a){return this._viewSegments[a]},getViewSegment:function(a){return this._viewSegments[a]}},App.ScrollIndicator=function(a,b){PIXI.Graphics.call(this),this.visible=!1,this.boundingBox=new PIXI.Rectangle(0,0,0,0),this._direction=a,this._pixelRatio=b,this._minIndicatorSize=Math.round(50*b),this._padding=Math.round(4*b),this._size=0,this._indicatorSize=0,this._indicatorThickness=0,this._contentPosition=0,this._positionStep=0,this._showHideTween=new App.TweenProxy(.2,App.Easing.linear,0,App.ModelLocator.getProxy(App.ModelName.EVENT_LISTENER_POOL)),this._state=App.TransitionState.HIDDEN},App.ScrollIndicator.prototype=Object.create(PIXI.Graphics.prototype),App.ScrollIndicator.prototype.constructor=App.ScrollIndicator,App.ScrollIndicator.prototype.show=function(){var a=App.TransitionState;(this._state===a.HIDING||this._state===a.HIDDEN)&&(this._state=a.SHOWING,this.visible=!0,this._showHideTween.start(!0))},App.ScrollIndicator.prototype.hide=function(){var a=App.TransitionState;(this._state===a.SHOWING||this._state===a.SHOWN)&&(this._state=a.HIDING,this._showHideTween.start(!0))},App.ScrollIndicator.prototype.update=function(a){this._contentPosition=a;var b=App.TransitionState;(this._state===b.SHOWING||this._state===b.HIDING)&&this._updateVisibility(b),this._render()},App.ScrollIndicator.prototype._updateVisibility=function(a){var b=this._showHideTween.progress;this._state===a.SHOWING?(this.alpha=b,1===b&&(this._state=a.SHOWN)):this._state===a.HIDING&&(this.alpha=1-b,1===b&&(this._state=a.HIDDEN,this.visible=!1))},App.ScrollIndicator.prototype.resize=function(a,b){this._size=a,this._direction===App.Direction.X?(this.boundingBox.width=this._size,this.boundingBox.height=Math.round(8*this._pixelRatio),this._indicatorThickness=this.boundingBox.height-this._padding,this._indicatorSize=Math.round(this._size*(this._size/b)),this._indicatorSize<this._minIndicatorSize&&(this._indicatorSize=this._minIndicatorSize),this._positionStep=(this._size-this._indicatorSize)/(b-this._size)):this._direction===App.Direction.Y&&(this.boundingBox.width=Math.round(8*this._pixelRatio),this.boundingBox.height=this._size,this._indicatorThickness=this.boundingBox.width-this._padding,this._indicatorSize=Math.round(this._size*(this._size/b)),this._indicatorSize<this._minIndicatorSize&&(this._indicatorSize=this._minIndicatorSize),this._positionStep=(this._size-this._indicatorSize)/(b-this._size)),this._render()},App.ScrollIndicator.prototype._render=function(){var a=this._indicatorSize,b=-Math.round(this._contentPosition*this._positionStep);b+a>this._size?a=this._size-b:0>b&&(a+=b,b=0),this.clear(),this.beginFill(0,.3),this._direction===App.Direction.X?this.drawRoundedRect(b+this._padding,Math.round(.5*this._padding),a-2*this._padding,this._indicatorThickness,.5*this._indicatorThickness):this._direction===App.Direction.Y&&this.drawRoundedRect(Math.round(.5*this._padding),b+this._padding,this._indicatorThickness,a-2*this._padding,.5*this._indicatorThickness),this.endFill()},App.ScrollIndicator.prototype.destroy=function(){this._showHideTween.destroy(),this._showHideTween=null,this.boundingBox=null,this._direction=null,this._state=null,this.clear()},App.Pane=function(a,b,c,d,e){PIXI.DisplayObjectContainer.call(this),this._ticker=App.ModelLocator.getProxy(App.ModelName.TICKER),this._content=null,this._width=c,this._height=d,this._contentHeight=0,this._contentWidth=0,this._enabled=!1,this._state=null,this._xOriginalScrollPolicy=a,this._yOriginalScrollPolicy=b,this._xScrollPolicy=a,this._yScrollPolicy=b,this._xScrollIndicator=new App.ScrollIndicator(App.Direction.X,e),this._yScrollIndicator=new App.ScrollIndicator(App.Direction.Y,e),this._mouseData=null,this._oldMouseX=0,this._oldMouseY=0,this._xSpeed=0,this._ySpeed=0,this._xOffset=0,this._yOffset=0,this._friction=.9,this._dumpForce=.5,this._snapForce=.2},App.Pane.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.Pane.prototype.constructor=App.Pane,App.Pane.prototype.setContent=function(a){this.removeContent(),this._content=a,this._contentHeight=this._content.height,this._contentWidth=this._content.width,this.addChildAt(this._content,0),this._updateScrollers()},App.Pane.prototype.removeContent=function(){this._content&&this.contains(this._content)&&(this.removeChild(this._content),this._content=null)},App.Pane.prototype.resize=function(a,b){this._width=a,this._height=b,this._content&&(this._contentHeight=this._content.height,this._contentWidth=this._content.width,this._updateScrollers())},App.Pane.prototype.enable=function(){this._enabled||(this._registerEventListeners(),this.interactive=!0,this._enabled=!0)},App.Pane.prototype.disable=function(){this._unRegisterEventListeners(),this._state===App.InteractiveState.DRAGGING&&this._onPointerUp(),this.interactive=!1,this._enabled=!1},App.Pane.prototype._registerEventListeners=function(){this.mousedown=this._onPointerDown,this.mouseup=this._onPointerUp,this.mouseupoutside=this._onPointerUp,this.touchstart=this._onPointerDown,this.touchend=this._onPointerUp,this.touchendoutside=this._onPointerUp,this.mousemove=this._onPointerMove,this.touchmove=this._onPointerMove,this._ticker.addEventListener(App.EventType.TICK,this,this._onTick)},App.Pane.prototype._unRegisterEventListeners=function(){this.mousedown=null,this.mouseup=null,this.mouseupoutside=null,this.touchstart=null,this.touchend=null,this.touchendoutside=null,this.mousemove=null,this.touchmove=null,this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick)},App.Pane.prototype._onPointerDown=function(a){a.originalEvent.preventDefault(),this._mouseData=a;var b=this._mouseData.getLocalPosition(this.stage);this._xOffset=b.x-this._content.x,this._yOffset=b.y-this._content.y,this._xSpeed=0,this._ySpeed=0,this._state=App.InteractiveState.DRAGGING,this._xScrollPolicy===App.ScrollPolicy.ON&&this._xScrollIndicator.show(),this._yScrollPolicy===App.ScrollPolicy.ON&&this._yScrollIndicator.show()},App.Pane.prototype._onPointerUp=function(){this._isContentPulled()?(this._state=App.InteractiveState.SNAPPING,this._xSpeed=0,this._ySpeed=0):this._state=App.InteractiveState.SCROLLING,this._mouseData=null},App.Pane.prototype._onPointerMove=function(a){a.originalEvent.preventDefault(),this._mouseData=a},App.Pane.prototype._onTick=function(){var a=App.InteractiveState;this._state===a.DRAGGING?this._drag(App.ScrollPolicy):this._state===a.SCROLLING?this._scroll(App.ScrollPolicy,a):this._state===a.SNAPPING&&this._snap(App.ScrollPolicy,a),this._xScrollIndicator.visible&&this._xScrollIndicator.update(this._content.x),this._yScrollIndicator.visible&&this._yScrollIndicator.update(this._content.y)},App.Pane.prototype._drag=function(a){var b=0;if(this._xScrollPolicy===a.ON){var c=this._mouseData.getLocalPosition(this.stage).x,d=this._content.x,e=d+this._contentWidth,f=d-this._contentWidth;d>0?(b=(1-d/this._width)*this._dumpForce,this._content.x=Math.round(c*b-this._xOffset*b)):e<this._width?(b=e/this._width*this._dumpForce,this._content.x=Math.round(f-(this._width-c)*b+(this._contentWidth-this._xOffset)*b)):this._content.x=Math.round(c-this._xOffset),this._xSpeed=c-this._oldMouseX,this._oldMouseX=c}if(this._yScrollPolicy===a.ON){var g=this._mouseData.getLocalPosition(this.stage).y,h=this._content.y,i=h+this._contentHeight,j=this._height-this._contentHeight;h>0?(b=(1-h/this._height)*this._dumpForce,this._content.y=Math.round(g*b-this._yOffset*b)):i<this._height?(b=i/this._height*this._dumpForce,this._content.y=Math.round(j-(this._height-g)*b+(this._contentHeight-this._yOffset)*b)):this._content.y=Math.round(g-this._yOffset),this._ySpeed=g-this._oldMouseY,this._oldMouseY=g}},App.Pane.prototype._scroll=function(a,b){if(this._xScrollPolicy===a.ON){this._content.x=Math.round(this._content.x+this._xSpeed);var c=this._content.x,d=c+this._contentWidth;c>0?this._xSpeed*=(1-c/this._width)*this._dumpForce:d<this._width&&(this._xSpeed*=d/this._width*this._dumpForce),Math.abs(this._xSpeed)<.1?(this._xSpeed=0,this._state=null,this._xScrollIndicator.hide(),(c>0||d<this._width)&&(this._state=b.SNAPPING)):this._xSpeed*=this._friction}if(this._yScrollPolicy===a.ON){this._content.y=Math.round(this._content.y+this._ySpeed);var e=this._content.y,f=e+this._contentHeight;e>0?this._ySpeed*=(1-e/this._height)*this._dumpForce:f<this._height&&(this._ySpeed*=f/this._height*this._dumpForce),Math.abs(this._ySpeed)<.1?(this._ySpeed=0,this._state=null,this._yScrollIndicator.hide(),(e>0||f<this._height)&&(this._state=b.SNAPPING)):this._ySpeed*=this._friction}},App.Pane.prototype._snap=function(a){if(this._xScrollPolicy===a.ON){var b=this._content.x,c=b+this._contentWidth,d=b-this._contentWidth,e=b*this._snapForce;b>0?5>e?(this._state=null,this._content.x=0,this._xScrollIndicator.hide()):this._content.x=Math.round(e):c<this._width&&(e=d+(b-d)*this._snapForce,e>=this._width-5?(this._state=null,this._content.x=d,this._xScrollIndicator.hide()):this._content.x=Math.round(e))}if(this._yScrollPolicy===a.ON){var f=this._content.y,g=f+this._contentHeight,h=this._height-this._contentHeight;f>0?(e=f*this._snapForce,5>e?(this._state=null,this._content.y=0,this._yScrollIndicator.hide()):this._content.y=Math.round(e)):g<this._height&&(e=h+(f-h)*this._snapForce,e>=h-5?(this._state=null,this._content.y=h,this._yScrollIndicator.hide()):this._content.y=Math.round(e))}},App.Pane.prototype._isContentPulled=function(){return this._content.x>0||this._content.y>0||this._content.y+this._contentHeight<this._height||this._content.x+this._contentWidth<this._width},App.Pane.prototype._updateScrollers=function(){var a=App.ScrollPolicy;this._xOriginalScrollPolicy===a.AUTO&&(this._contentWidth>=this._width?(this._xScrollPolicy=a.ON,this._xScrollIndicator.resize(this._width,this._contentWidth),this._xScrollIndicator.x=this._height-this._xScrollIndicator.boundingBox.height,this.contains(this._xScrollIndicator)||this.addChild(this._xScrollIndicator)):(this._xScrollPolicy=a.OFF,this._xScrollIndicator.hide(),this.contains(this._xScrollIndicator)&&this.removeChild(this._xScrollIndicator))),this._yOriginalScrollPolicy===a.AUTO&&(this._contentHeight>=this._height?(this._yScrollPolicy=a.ON,this._yScrollIndicator.resize(this._height,this._contentHeight),this._yScrollIndicator.x=this._width-this._yScrollIndicator.boundingBox.width,this.contains(this._yScrollIndicator)||this.addChild(this._yScrollIndicator)):(this._yScrollPolicy=a.OFF,this._yScrollIndicator.hide(),this.contains(this._yScrollIndicator)&&this.removeChild(this._yScrollIndicator)))},App.Pane.prototype.destroy=function(){this.disable(),this._ticker=null,this._state=null,this._xSpeed=0,this._ySpeed=0,this._mouseData=null,this.removeContent(),this.contains(this._xScrollIndicator)&&this.removeChild(this._xScrollIndicator),this._xScrollIndicator.destroy(),this._xScrollIndicator=null,this.contains(this._yScrollIndicator)&&this.removeChild(this._yScrollIndicator),this._yScrollIndicator.destroy(),this._yScrollIndicator=null,this._xOriginalScrollPolicy=null,this._yOriginalScrollPolicy=null,this._xScrollPolicy=null,this._yScrollPolicy=null},App.AccountButton=function(a,b,c){PIXI.Graphics.call(this),this._model=a,this._layout=b;var d=this._layout.pixelRatio,e=Math.round(70*d);this.boundingBox=new PIXI.Rectangle(0,0,this._layout.width,e),this._nameLabel=new PIXI.Text(this._model.getName()+" "+c,{font:Math.round(24*d)+"px HelveticaNeueCond",fill:"#394264"}),this._nameLabel.x=Math.round(15*d),this._nameLabel.y=Math.round(15*d),this._detailsLabel=new PIXI.Text("Balance: 2.876, Expenses: -250, Income: 1.500",{font:Math.round(12*d)+"px Arial",fill:"#999999"}),this._detailsLabel.x=Math.round(15*d),this._detailsLabel.y=Math.round(45*d),this.addChild(this._nameLabel),this.addChild(this._detailsLabel),this.interactive=!0,this._render()},App.AccountButton.prototype=Object.create(PIXI.Graphics.prototype),App.AccountButton.prototype.constructor=App.AccountButton,App.AccountButton.prototype.resize=function(a){this.boundingBox.width=a,this._render()},App.AccountButton.prototype._render=function(){var a=Math.round(10*this._layout.pixelRatio);this.clear(),this.beginFill(15724527),this.drawRect(0,0,this.boundingBox.width,this.boundingBox.height),this.beginFill(16777215),this.drawRect(a,0,this.boundingBox.width-2*a,1),this.beginFill(13421772),this.drawRect(a,this.boundingBox.height-1,this.boundingBox.width-2*a,1),this.endFill()},App.AccountButton.prototype.destroy=function(){this.clear(),this.interactive=!1,this._layout=null,this._model=null,this.boundingBox=null,this.removeChild(this._nameLabel),this._nameLabel=null,this.removeChild(this._detailsLabel),this._detailsLabel=null},App.AccountScreen=function(a,b){PIXI.DisplayObjectContainer.call(this),this._eventDispatcher=new App.EventDispatcher(App.ModelLocator.getProxy(App.ModelName.EVENT_LISTENER_POOL)),this._model=a,this._layout=b,this._enabled=!1;var c=0,d=this._model.length(),e=App.AccountButton,f=null;for(this._buttons=new Array(d),this._buttonContainer=new PIXI.DisplayObjectContainer;30>c;c++)f=new e(this._model.getItemAt(0),this._layout,c),this._buttons[c]=f,this._buttonContainer.addChild(f);this._pane=new App.Pane(App.ScrollPolicy.OFF,App.ScrollPolicy.AUTO,this._layout.width,this._layout.height,this._layout.pixelRatio),this._pane.setContent(this._buttonContainer),this._updateLayout(),this.addChild(this._pane)},App.AccountScreen.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.AccountScreen.prototype.constructor=App.AccountScreen,App.AccountScreen.prototype.show=function(){this.visible=!0,this.enable()},App.AccountScreen.prototype.hide=function(){this.disable(),this.visible=!1},App.AccountScreen.prototype.enable=function(){this._enabled||(this._pane.enable(),this.interactive=!0,this._registerEventListeners(),this._enabled=!0)},App.AccountScreen.prototype.disable=function(){this.interactive=!1,this._pane.disable(),this._enabled=!1},App.AccountScreen.prototype.addEventListener=function(a,b,c){this._eventDispatcher.addEventListener(a,b,c)},App.AccountScreen.prototype.removeEventListener=function(a,b,c){this._eventDispatcher.removeEventListener(a,b,c)},App.AccountScreen.prototype._registerEventListeners=function(){this.mousedown=this._onPointerDown,this.mouseup=this._onPointerUp,this.mouseupoutside=this._onPointerUp,this.touchstart=this._onPointerDown,this.touchend=this._onPointerUp,this.touchendoutside=this._onPointerUp},App.AccountScreen.prototype._onPointerDown=function(){},App.AccountScreen.prototype._onPointerUp=function(){this._eventDispatcher.dispatchEvent(App.EventType.CLICK)},App.AccountScreen.prototype._updateLayout=function(){for(var a=0,b=this._buttons.length,c=this._buttons[0].boundingBox.height;b>a;a++)this._buttons[a].y=a*c;this._pane.resize(this._layout.width,this._layout.height)},App.AccountScreen.prototype.destroy=function(){this.disable(),this._eventDispatcher.destroy(),this._eventDispatcher=null;for(var a=0,b=null;30>a;a++)this._buttons[a]=b,this._buttonContainer.removeChild(b),b.destroy();this.removeChild(this._pane),this._pane.destroy(),this._pane=null,this._buttonContainer=null,this._buttons.length=0,this._buttons=null},App.CategoryButton=function(a,b,c){PIXI.Graphics.call(this),this._model=a,this._layout=b;var d=this._layout.pixelRatio,e=Math.round(50*d);this.boundingBox=new PIXI.Rectangle(0,0,this._layout.width,e),this._colorStripe=new PIXI.Graphics,this._colorStripe.beginFill("0x"+App.MathUtils.rgbToHex(Math.round(127*Math.sin(.3*c+0)+128),Math.round(127*Math.sin(.3*c+2)+128),Math.round(127*Math.sin(.3*c+4)+128))),this._colorStripe.drawRect(0,0,Math.round(4*d),e),this._colorStripe.endFill(),this._icon=new PIXI.Sprite.fromFrame("currencies"),1===d&&(this._icon.scale.x*=.5,this._icon.scale.y*=.5),this._icon.x=Math.round(15*d),this._icon.y=Math.round((e-this._icon.height)/2),this._icon.tint=3752548,this._nameLabel=new PIXI.Text("Category "+c,{font:Math.round(18*d)+"px HelveticaNeueCond",fill:"#394264"}),this._nameLabel.x=Math.round(64*d),this._nameLabel.y=Math.round(18*d),this.addChild(this._colorStripe),this.addChild(this._icon),this.addChild(this._nameLabel),this.interactive=!0,this._render()},App.CategoryButton.prototype=Object.create(PIXI.Graphics.prototype),App.CategoryButton.prototype.constructor=App.CategoryButton,App.CategoryButton.prototype.resize=function(a){this.boundingBox.width=a,this._render()},App.CategoryButton.prototype._render=function(){var a=Math.round(10*this._layout.pixelRatio);this.clear(),this.beginFill(15724527),this.drawRect(0,0,this.boundingBox.width,this.boundingBox.height),this.beginFill(16777215),this.drawRect(a,0,this.boundingBox.width-2*a,1),this.beginFill(13421772),this.drawRect(a,this.boundingBox.height-1,this.boundingBox.width-2*a,1),this.endFill()},App.CategoryButton.prototype.destroy=function(){this.clear(),this.interactive=!1,this._layout=null,this._model=null,this.boundingBox=null,this.removeChild(this._colorStripe),this._colorStripe=null,this.removeChild(this._icon),this._icon=null,this.removeChild(this._nameLabel),this._nameLabel=null},App.CategoryScreen=function(a,b){PIXI.DisplayObjectContainer.call(this),this._model=a,this._layout=b,this._enabled=!1;var c=0,d=this._model.length(),e=App.CategoryButton,f=null;for(this._buttons=new Array(d),this._buttonContainer=new PIXI.DisplayObjectContainer;30>c;c++)f=new e(this._model.getItemAt(0),this._layout,c),this._buttons[c]=f,this._buttonContainer.addChild(f);this._pane=new App.Pane(App.ScrollPolicy.OFF,App.ScrollPolicy.AUTO,this._layout.width,this._layout.height,this._layout.pixelRatio),this._pane.setContent(this._buttonContainer),this._updateLayout(),this.addChild(this._pane)},App.CategoryScreen.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.CategoryScreen.prototype.constructor=App.CategoryScreen,App.CategoryScreen.prototype.show=function(){this.visible=!0,this.enable()},App.CategoryScreen.prototype.hide=function(){this.disable(),this.visible=!1},App.CategoryScreen.prototype.enable=function(){this._enabled||(this._pane.enable(),this.interactive=!0,this._registerEventListeners(),this._enabled=!0)},App.CategoryScreen.prototype.disable=function(){this.interactive=!1,this._pane.disable(),this._enabled=!1},App.CategoryScreen.prototype._registerEventListeners=function(){},App.CategoryScreen.prototype._updateLayout=function(){for(var a=0,b=this._buttons.length,c=this._buttons[0].boundingBox.height;b>a;a++)this._buttons[a].y=a*c;this._pane.resize(this._layout.width,this._layout.height)},App.CategoryScreen.prototype.destroy=function(){this.disable();for(var a=0,b=null;30>a;a++)this._buttons[a]=b,this._buttonContainer.removeChild(b),b.destroy();this.removeChild(this._pane),this._pane.destroy(),this._pane=null,this._buttonContainer=null,this._buttons.length=0,this._buttons=null},App.ApplicationView=function(a,b,c,d,e){PIXI.DisplayObjectContainer.call(this),this._renderer=b,this._stage=a,this._layout={originalWidth:c,originalHeight:d,width:Math.round(c*e),height:Math.round(d*e),headerHeight:Math.round(50*e),bodyHeight:Math.round(d-50-e),pixelRatio:e},this._background=new PIXI.Graphics,this._background.beginFill(12245589,1),this._background.drawRect(0,0,this._layout.width,this._layout.height),this._background.endFill(),this._accountScreen=new App.AccountScreen(App.ModelLocator.getProxy(App.ModelName.ACCOUNTS),this._layout),this._categoryScreen=new App.CategoryScreen(App.ModelLocator.getProxy(App.ModelName.ACCOUNTS),this._layout),this._accountScreen.hide(),this._categoryScreen.show(),this.addChild(this._background),this.addChild(this._accountScreen),this.addChild(this._categoryScreen),this._registerEventListeners()},App.ApplicationView.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.ApplicationView.prototype.constructor=App.ApplicationView,App.ApplicationView.prototype._registerEventListeners=function(){App.ModelLocator.getProxy(App.ModelName.TICKER).addEventListener(App.EventType.TICK,this,this._onTick),this._accountScreen.enable(),this._accountScreen.addEventListener(App.EventType.CLICK,this,this._onAccountScreenClick),this._accountScreen.tap=function(){this.contains(this._categoryScreen)||this.addChild(this._categoryScreen),this._categoryScreen.show(),this._accountScreen.hide(),this.contains(this._accountScreen)&&this.removeChild(this._accountScreen)}.bind(this),this._categoryScreen.enable(),this._categoryScreen.click=function(){this.contains(this._accountScreen)||this.addChild(this._accountScreen),this._accountScreen.show(),this._categoryScreen.hide(),this.contains(this._categoryScreen)&&this.removeChild(this._categoryScreen)}.bind(this),this._categoryScreen.tap=function(){this.contains(this._accountScreen)||this.addChild(this._accountScreen),this._accountScreen.show(),this._categoryScreen.hide(),this.contains(this._categoryScreen)&&this.removeChild(this._categoryScreen)}.bind(this)},App.ApplicationView.prototype._onAccountScreenClick=function(){this.contains(this._categoryScreen)||this.addChild(this._categoryScreen),this._categoryScreen.show(),this._accountScreen.hide(),this.contains(this._accountScreen)&&this.removeChild(this._accountScreen)},App.ApplicationView.prototype._onTick=function(){this._renderer.render(this._stage)},App.ApplicationView.prototype._onResize=function(){},App.Easing={linear:function(a){return a},inQuad:function(a){return a*a},outQuad:function(a){return-(a-=1)*a+1},inOutQuad:function(a){return(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1)},inCubic:function(a){return a*a*a},outCubic:function(a){return--a*a*a+1},inOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},inExpo:function(a){return 0===a?0:Math.pow(2,10*(a-1))},outExpo:function(a){return 1===a?1:-Math.pow(2,-10*a)+1},inOutExpo:function(a){return 0===a?0:1===a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},inElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1===a?1:(c||(c=.3),b=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c)))},outElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1===a?1:(c||(c=.3),b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/c)+1)},inOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:2===(a/=.5)?1:(c||(c=.3*1.5),b=c/(2*Math.PI)*Math.asin(1/d),1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c):d*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c)*.5+1)}},App.TweenProxy=function(a,b,c,d){App.EventDispatcher.call(this,d),this.progress=c||0,this._interval=-1,this._running=!1,this._reversed=!1,this._start=-1,this._end=-1,this._reversedEnd=-1,this._now=-1,this._duration=1e3*a||1e3,this._ease=b||App.Easing.linear,this._timeStamp=window.performance&&window.performance.now?window.performance:Date,this._intervalReference=this._tweenInterval.bind(this)},App.TweenProxy.prototype=Object.create(App.EventDispatcher.prototype),App.TweenProxy.prototype.constructor=App.TweenProxy,App.TweenProxy.prototype.setEase=function(a){this._ease=a},App.TweenProxy.prototype.start=function(a,b){b&&this.setEase(b),this._running?a&&(this._reversed?this._reversed=!1:(this._reversed=!0,this._reversedEnd=this._start+2*(this._now-this._start))):(this._running=!0,this._reversed=!1,this._tween())},App.TweenProxy.prototype.stop=function(){this._running=!1,clearInterval(this._interval),this._interval=-1},App.TweenProxy.prototype.restart=function(){this._running&&this.stop(),this.start()},App.TweenProxy.prototype.isRunning=function(){return this._running},App.TweenProxy.prototype._tween=function(){this._interval>0&&(clearInterval(this._interval),this._interval=-1),this.progress=0,this._start=this._timeStamp.now(),this._end=this._start+this._duration,this._interval=setInterval(this._intervalReference,1e3/120)},App.TweenProxy.prototype._tweenInterval=function(){this._now=this._timeStamp.now();var a=this._reversed?this._reversedEnd:this._end,b=(this._duration-(a-this._now))/this._duration;0>b?b=0:b>1&&(b=1),this.progress=this._ease(b),this._now>=a&&(this.progress=1,this.stop(),this.dispatchEvent(App.EventType.COMPLETE))
},App.TweenProxy.prototype.destroy=function(){App.EventDispatcher.prototype.destroy.call(this),this.stop(),this._intervalReference=null,this._timeStamp=null,this._ease=null},App.Ticker=function(a){App.EventDispatcher.call(this,a),this._rafId=-1,this._rafListener=this._raf.bind(this),this._isRunning=!1},App.Ticker.prototype=Object.create(App.EventDispatcher.prototype),App.Ticker.prototype.constructor=App.Ticker,App.Ticker.prototype.addEventListener=function(a,b,c){App.EventDispatcher.prototype.addEventListener.call(this,a,b,c),this._isRunning||(this._isRunning=!0,this._rafId=window.requestAnimationFrame(this._rafListener))},App.Ticker.prototype.removeEventListener=function(a,b,c){App.EventDispatcher.prototype.removeEventListener.call(this,a,b,c),0===this._listeners.length&&(window.cancelAnimationFrame(this._rafId),this._isRunning=!1)},App.Ticker.prototype.removeAllListeners=function(){App.EventDispatcher.prototype.removeAllListeners.call(this),window.cancelAnimationFrame(this._rafId),this._isRunning=!1},App.Ticker.prototype._raf=function(){this._rafId=window.requestAnimationFrame(this._rafListener),this.dispatchEvent(App.EventType.TICK)},App.Controller={_eventCommandMap:{},_commands:[],init:function(a){for(var b=0,c=a.length,d=null;c>b;)d=a[b++],this._eventCommandMap[d.eventType]={constructor:d.command};d=null,a=null},_onCommandComplete:function(a){this._destroyCommand(a)},_destroyCommand:function(a){for(var b=0,c=this._commands.length,d=null;c>b;)if(d=this._commands[b++],d===a){d.removeEventListener(App.EventType.COMPLETE,this,this._onCommandComplete),d.destroy(),this._commands.splice(b,1);break}},dispatchEvent:function(a,b,c){var d=this._eventCommandMap[a].constructor;if(d){var e=null;if(c)for(var f=0,g=this._commands.length;g>f;)e=this._commands[f++],e instanceof d&&!e.allowMultipleInstances&&this._destroyCommand(e);e=new d,this._commands.push(e),e.addEventListener(App.EventType.COMPLETE,this,this._onCommandComplete),e.execute(b)}}},App.Command=function(a,b){App.EventDispatcher.call(this,b),this.allowMultipleInstances=a},App.Command.prototype=Object.create(App.EventDispatcher.prototype),App.Command.prototype.constructor=App.Command,App.Command.prototype.execute=function(){},App.Command.prototype.destroy=function(){App.EventDispatcher.prototype.destroy.call(this)},App.LoadData=function(a){App.Command.call(this,!1,a),this._assetLoader=null,this._fontLoadingInterval=-1,this._fontInfoElement=null},App.LoadData.prototype=Object.create(App.Command.prototype),App.LoadData.prototype.constructor=App.LoadData,App.LoadData.prototype.execute=function(){this._loadAssets()},App.LoadData.prototype._loadAssets=function(){this._assetLoader=new PIXI.AssetLoader(["./data/icons-big.json"]),this._assetLoader.onComplete=function(){this._assetLoader.onComplete=null,this._loadFont()}.bind(this),this._assetLoader.load()},App.LoadData.prototype._loadFont=function(){this._fontInfoElement=document.getElementById("fontInfo");var a=this._fontInfoElement.offsetWidth;this._fontLoadingInterval=setInterval(function(){this._fontInfoElement.offsetWidth!==a&&(clearInterval(this._fontLoadingInterval),this._loadData())}.bind(this),100),this._fontInfoElement.style.fontFamily="HelveticaNeueCond"},App.LoadData.prototype._loadData=function(){var a=new XMLHttpRequest;a.open("GET","./data/accounts.json",!0),a.onload=function(){a.status>=200&&a.status<400?this.dispatchEvent(App.EventType.COMPLETE,a.responseText):console.log("error")}.bind(this),a.onerror=function(){console.log("on error"),this.dispatchEvent(App.EventType.COMPLETE)},a.send()},App.LoadData.prototype.destroy=function(){App.Command.prototype.destroy.call(this),this._assetLoader=null,clearInterval(this._fontLoadingInterval),this._fontInfoElement=null},App.Initialize=function(){this._eventListenerPool=new App.ObjectPool(App.EventListener,10),App.Command.call(this,!1,this._eventListenerPool),this._loadDataCommand=new App.LoadData(this._eventListenerPool)},App.Initialize.prototype=Object.create(App.Command.prototype),App.Initialize.prototype.constructor=App.Initialize,App.Initialize.prototype.execute=function(){this._loadDataCommand.addEventListener(App.EventType.COMPLETE,this,this._onLoadDataComplete),this._loadDataCommand.execute()},App.Initialize.prototype._onLoadDataComplete=function(a){this._loadDataCommand.destroy(),this._loadDataCommand=null,this._initModel(a),this._initCommands(),this._initView(),this.dispatchEvent(App.EventType.COMPLETE)},App.Initialize.prototype._initModel=function(a){var b=App.ModelLocator,c=App.ModelName,d=App.Collection;b.addProxy(c.EVENT_LISTENER_POOL,this._eventListenerPool),b.addProxy(c.TICKER,new App.Ticker(this._eventListenerPool)),b.addProxy(c.ACCOUNTS,new d(JSON.parse(a).accounts,App.Account,null,this._eventListenerPool))},App.Initialize.prototype._initCommands=function(){},App.Initialize.prototype._initView=function(){var a=document.getElementsByTagName("canvas")[0],b=a.getContext("2d"),c=window.devicePixelRatio||1,d=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1,e=c/d,f=window.innerWidth,g=window.innerHeight,h=new PIXI.Stage(16777215),i=new PIXI.CanvasRenderer(f,g,{view:a,resolution:1,transparent:!1,autoResize:!1,clearBeforeRender:!1});e>1&&(e>2&&(e=2),a.style.width=f+"px",a.style.height=g+"px",a.width=a.width*e,a.height=a.height*e,b.scale(e,e),h.interactionManager.setPixelRatio(e)),PIXI.CanvasTinter.tintMethod=PIXI.CanvasTinter.tintWithOverlay,App.ViewLocator.addViewSegment(App.ViewName.APPLICATION_VIEW,h.addChild(new App.ApplicationView(h,i,f,g,e))),i.render(h)},App.Initialize.prototype.destroy=function(){App.Command.prototype.destroy.call(this),this._loadDataCommand&&(this._loadDataCommand.destroy(),this._loadDataCommand=null),this._eventListenerPool=null},function(){function a(){b.destroy(),b=null}var b=new App.Initialize;b.addEventListener(App.EventType.COMPLETE,this,a),b.execute()}();