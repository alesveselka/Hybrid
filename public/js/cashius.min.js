//Cashius, 19-01-2015, 22:01:13
Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),"function"!=typeof Object.create&&!function(){var a=function(){};Object.create=function(b){if(arguments.length>1)throw Error("Second argument not supported");if(null===b)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof b)throw TypeError("Argument must be an object");return a.prototype=b,new a}}(),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(function(){a()},1e3/60)});var App=App||{};App.MathUtils={rgbToHex:function(a,b,c){return((1<<24)+(a<<16)+(b<<8)+c).toString(16).slice(1)},hexToRgb:function(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null}},App.DateUtils={_daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],_monthLabels:["January","February","March","April","May","June","July","August","September","October","November","December"],_dayLabels:["S","M","T","W","T","F","S"],getMonthLabel:function(a){return this._monthLabels[a]},getDayLabels:function(a){for(var b=a;b;)this._dayLabels.push(this._dayLabels.shift()),b--;return this._dayLabels},getMonth:function(a,b){var c=a.getFullYear(),d=a.getMonth(),e=d?d-1:11,f=this.getDaysInMonth(c,d),g=this.getDaysInMonth(c,e),h=new Date(c,d,1).getDay(),i=h>=b?h-b:7+h-b,j=8-i,k=[],l=null,m=0,n=42,o=0,p=0;for(1!==j&&(j=g+1-i,m=1);n>o;o++)j>g&&1===m&&(j=1,m=0),j>f&&0===m&&(j=1,m=1),o%7===0&&(l=new Array(14),k[k.length]=l,p=0),l[p++]=j++,l[p++]=m;return k},getDaysInMonth:function(a,b){return 1!==b||a%400!==0&&a%4!==0?this._daysInMonth[b]:29}},App.Device={TOUCH_SUPPORTED:"ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0},App.GraphicUtils={drawRect:function(a,b,c,d,e,f,g){a.clear(),a.beginFill(b,c),a.drawRect(d,e,f,g),a.endFill()},drawRects:function(a,b,c,d,e,f){e&&a.clear(),a.beginFill(b,c);for(var g=0,h=d.length;h>g;)a.drawRect(d[g++],d[g++],d[g++],d[g++]);f&&a.endFill()}},App.LayoutUtils={update:function(a,b,c){var d=0,e=a.length,f=null,g=c||0,h=App.Direction;if(b===h.X)for(;e>d;)f=a[d++],f.x=g,g=Math.round(g+f.boundingBox.width);else if(b===h.Y)for(;e>d;)f=a[d++],f.y=g,g=Math.round(g+f.boundingBox.height)}},App.EventType={CHANGE_SCREEN:"CHANGE_SCREEN",COMPLETE:"COMPLETE",UPDATE:"UPDATE",PROGRESS:"PROGRESS",ERROR:"ERROR",CHANGE:"change",LAYOUT_UPDATE:"LAYOUT_UPDATE",TICK:"TICK",ADDED:"ADDED",REMOVED:"REMOVED",RESIZE:"resize",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",CLICK:"click",FOCUS:"focus",BLUR:"blur",KEY_PRESS:"keypress",PASTE:"paste",TEXT_INPUT:"textInput",INPUT:"input"},App.ModelName={TICKER:"TICKER",EVENT_LISTENER_POOL:"EVENT_LISTENER_POOL",ACCOUNTS:"ACCOUNTS",TRANSACTIONS:"TRANSACTIONS",SETTINGS:"SETTINGS",FILTERS:"FILTERS",CURRENCIES:"CURRENCIES",ICONS:"ICONS"},App.ViewName={APPLICATION_VIEW:"APPLICATION_VIEW",LOG:"LOG"},App.InteractiveState={OVER:"OVER",OUT:"OUT",DRAGGING:"DRAGGING",SCROLLING:"SCROLLING",SNAPPING:"SNAPPING",SWIPING:"SWIPING"},App.TransitionState={SHOWING:"SHOWING",SHOWN:"SHOWN",HIDING:"HIDING",HIDDEN:"HIDDEN",OPEN:"OPEN",OPENING:"OPENING",CLOSED:"CLOSED",CLOSING:"CLOSING"},App.ScrollPolicy={ON:"ON",OFF:"OFF",AUTO:"AUTO"},App.Direction={X:"x",Y:"y",LEFT:"LEFT",RIGHT:"RIGHT"},App.ScreenName={ACCOUNT:0,CATEGORY:1,SELECT_TIME:2,EDIT_CATEGORY:3},App.EventListener=function(a){this.allocated=!1,this.poolIndex=a,this.type=null,this.scope=null,this.handler=null},App.EventListener.prototype.reset=function(){this.allocated=!1,this.type=null,this.scope=null,this.handler=null},App.EventDispatcher=function(a){this._listeners=[],this._listenersPool=a},App.EventDispatcher.prototype.addEventListener=function(a,b,c){if(!this.hasEventListener(a,b,c)){var d=this._listenersPool.allocate();d.type=a,d.scope=b,d.handler=c,this._listeners[this._listeners.length]=d}},App.EventDispatcher.prototype.hasEventListener=function(a,b,c){for(var d=0,e=this._listeners.length,f=null;e>d;)if(f=this._listeners[d++],f.type===a&&f.scope===b&&f.handler===c)return f=null,!0;return f=null,!1},App.EventDispatcher.prototype.removeEventListener=function(a,b,c){for(var d=0,e=this._listeners.length,f=null;e>d;d++)if(f=this._listeners[d],f.type===a&&f.scope===b&&f.handler===c){this._listenersPool.release(f),f.reset(),this._listeners.splice(d,1);break}f=null},App.EventDispatcher.prototype.removeAllListeners=function(){for(var a=0,b=this._listeners.length,c=null;b>a;a++)c=this._listeners[a],this._listenersPool.release(c),c.reset(),this._listeners.splice(a,1);c=null,this._listeners.length=0},App.EventDispatcher.prototype.dispatchEvent=function(a,b){for(var c=0,d=this._listeners.length,e=null;d>c;)e=this._listeners[c++],e&&e.type===a&&e.handler.call(e.scope,b,a);e=null},App.EventDispatcher.prototype.pipe=function(a,b){a.addEventListener(b,this,this._pipeListener)},App.EventDispatcher.prototype.unPipe=function(a,b){a.removeEventListener(b,this,this._pipeListener)},App.EventDispatcher.prototype._pipeListener=function(a,b){this.dispatchEvent(b,a)},App.EventDispatcher.prototype.destroy=function(){this.removeAllListeners(),this._listeners.length=0,this._listeners=null,this._listenersPool=null},App.Rectangle=function(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0},App.ModelLocator={_proxies:{},addProxy:function(a,b){if(this._proxies[a])throw Error("Proxy "+a+" already exist");this._proxies[a]=b},hasProxy:function(a){return this._proxies[a]},getProxy:function(a){return this._proxies[a]}},App.ObjectPool=function(a,b){this._objectClass=a,this._size=b,this._items=[],this._freeItems=[]},App.ObjectPool.prototype.preAllocate=function(){var a=this._items.length,b=a+this._size,c=a;for(this._items.length=b;b>c;c++)this._items[c]=new this._objectClass(c),this._freeItems.push(c)},App.ObjectPool.prototype.allocate=function(){0===this._freeItems.length&&this.preAllocate();var a=this._freeItems.shift(),b=this._items[a];return b.allocated=!0,b},App.ObjectPool.prototype.release=function(a){a.allocated=!1,this._freeItems.push(a.poolIndex)},App.Collection=function(a,b,c,d){if(App.EventDispatcher.call(this,d),a){var e=0,f=a.length;for(this._items=new Array(f);f>e;e++)this._items[e]=new b(a[e],this,c,d)}this._items||(this._items=[]),this._currentItem=null,this._currentIndex=-1},App.Collection.prototype=Object.create(App.EventDispatcher.prototype),App.Collection.prototype.constructor=App.Collection,App.Collection.prototype.addItem=function(a){this._items[this._items.length]=a,this.dispatchEvent(App.EventType.ADDED,a)},App.Collection.prototype.setCurrent=function(a,b){(a!==this._currentItem||b)&&(this._currentItem=a,this._updateCurrentIndex(),this.dispatchEvent(App.EventType.CHANGE,data))},App.Collection.prototype.getCurrent=function(){return this._currentItem},App.Collection.prototype.getItemAt=function(a){return this._items[a]},App.Collection.prototype.previous=function(){var a=this._currentIndex;return-1===a&&(a=0),0>=a?a=this._items.length-1:a-=1,this._items[a]},App.Collection.prototype.next=function(){var a=this._currentIndex;return-1===a||a>=this._items.length-1?a=0:a+=1,this._items[a]},App.Collection.prototype.other=function(a){var b=this._items.length;return this._items[this._currentIndex+b+a]%b},App.Collection.prototype.hasItem=function(a){return this.indexOf(a)>-1},App.Collection.prototype.removeItemAt=function(a){var b=this._items.splice(a,1)[0];return this._updateCurrentIndex(),this.dispatchEvent(App.EventType.REMOVED,b),b},App.Collection.prototype._updateCurrentIndex=function(){this._currentIndex=this.indexOf(this._currentItem)},App.Collection.prototype.indexOf=function(a){for(var b=8,c=0,d=Math.floor(this._items.length/b)*b;d>c;){if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1;if(this._items[c++]===a)return c-1}for(d=this._items.length;d>c;)if(this._items[c++]===a)return c-1;return-1},App.Collection.prototype.index=function(){return this._currentIndex},App.Collection.prototype.length=function(){return this._items.length},App.ColorTheme={sBLUE:"#394264",BLUE:3752548,DARK_BLUE:2435908,BACKGROUND:15724527,DARK_SHADE:13421772,LIGHT_SHADE:16777215,SWIPE_BACKGROUND:15020051,INPUT_HIGHLIGHT:39423},App.Settings={_startOfWeek:0,setStartOfWeek:function(a){a>=0&&6>=a&&(this._startOfWeek=a)},getStartOfWeek:function(){return this._startOfWeek}},App.Account=function(a,b,c,d){this._data=a,this._name=null,this._categories=null,this._eventListenerPool=d},App.Account.prototype.getName=function(){return this._name||(this._name=this._data.name),this._name},App.Account.prototype.getBalance=function(){},App.Account.prototype.getExpenses=function(){},App.Account.prototype.getIncome=function(){},App.Account.prototype.getCategories=function(){return this._categories||(this._categories=new App.Collection(this._data.categories,App.Category,this,this._eventListenerPool)),this._categories},App.Transaction=function(a,b,c,d,e,f,g,h){this.amount=a,this.currency=b,this.category=c,this.date=d,this.type=e,this.mode=f,this.repeating=g,this.pending=h},App.Category=function(a,b,c){this._data=a,this._account=c,this.name=a.name,this.color=a.color,this.icon=a.icon,this.subCategories=a.subCategories},App.Filter=function(a,b,c){this.startDate=a,this.endDate=b,this.categories=c},App.ViewLocator={_viewSegments:{},addViewSegment:function(a,b){if(this._viewSegments[a])throw Error("View segment "+a+" already exist");return this._viewSegments[a]=b,b},hasViewSegment:function(a){return this._viewSegments[a]},getViewSegment:function(a){return this._viewSegments[a]}},App.ScrollIndicator=function(a,b){PIXI.Graphics.call(this),this.visible=!1,this.boundingBox=new PIXI.Rectangle(0,0,0,0),this._direction=a,this._pixelRatio=b,this._minIndicatorSize=Math.round(50*b),this._padding=Math.round(4*b),this._size=0,this._indicatorSize=0,this._indicatorThickness=0,this._contentPosition=0,this._positionStep=0,this._showHideTween=new App.TweenProxy(.2,App.Easing.linear,0,App.ModelLocator.getProxy(App.ModelName.EVENT_LISTENER_POOL)),this._state=App.TransitionState.HIDDEN},App.ScrollIndicator.prototype=Object.create(PIXI.Graphics.prototype),App.ScrollIndicator.prototype.constructor=App.ScrollIndicator,App.ScrollIndicator.prototype.show=function(){var a=App.TransitionState;(this._state===a.HIDING||this._state===a.HIDDEN)&&(this._state=a.SHOWING,this.visible=!0,this._showHideTween.start(!0))},App.ScrollIndicator.prototype.hide=function(a){var b=App.TransitionState;a?(this._state=b.HIDDEN,this.alpha=0,this.visible=!1):(this._state===b.SHOWING||this._state===b.SHOWN)&&(this._state=b.HIDING,this._showHideTween.start(!0))},App.ScrollIndicator.prototype.update=function(a){this._contentPosition=a;var b=App.TransitionState;(this._state===b.SHOWING||this._state===b.HIDING)&&this._updateVisibility(b),this._render()},App.ScrollIndicator.prototype._updateVisibility=function(a){var b=this._showHideTween.progress;this._state===a.SHOWING?(this.alpha=b,1===b&&(this._state=a.SHOWN)):this._state===a.HIDING&&(this.alpha=1-b,1===b&&(this._state=a.HIDDEN,this.visible=!1))},App.ScrollIndicator.prototype.resize=function(a,b){this._size=a,this._direction===App.Direction.X?(this.boundingBox.width=this._size,this.boundingBox.height=Math.round(8*this._pixelRatio),this._indicatorThickness=this.boundingBox.height-this._padding,this._indicatorSize=Math.round(this._size*(this._size/b)),this._indicatorSize<this._minIndicatorSize&&(this._indicatorSize=this._minIndicatorSize),this._positionStep=(this._size-this._indicatorSize)/(b-this._size)):this._direction===App.Direction.Y&&(this.boundingBox.width=Math.round(8*this._pixelRatio),this.boundingBox.height=this._size,this._indicatorThickness=this.boundingBox.width-this._padding,this._indicatorSize=Math.round(this._size*(this._size/b)),this._indicatorSize<this._minIndicatorSize&&(this._indicatorSize=this._minIndicatorSize),this._positionStep=(this._size-this._indicatorSize)/(b-this._size)),this._render()},App.ScrollIndicator.prototype._render=function(){var a=this._indicatorSize,b=-Math.round(this._contentPosition*this._positionStep);b+a>this._size?a=this._size-b:0>b&&(a+=b,b=0),this.clear(),this.beginFill(0,.3),this._direction===App.Direction.X?this.drawRoundedRect(b+this._padding,Math.round(.5*this._padding),a-2*this._padding,this._indicatorThickness,.5*this._indicatorThickness):this._direction===App.Direction.Y&&this.drawRoundedRect(Math.round(.5*this._padding),b+this._padding,this._indicatorThickness,a-2*this._padding,.5*this._indicatorThickness),this.endFill()},App.ScrollIndicator.prototype.destroy=function(){this._showHideTween.destroy(),this._showHideTween=null,this.boundingBox=null,this._direction=null,this._state=null,this.clear()},App.Input=function(a,b,c,d,e,f){PIXI.Graphics.call(this);var g=Math.round(b*e)+"px HelveticaNeueCond";this.boundingBox=new App.Rectangle(0,0,c,d),this._fontSize=b,this._width=c,this._height=d,this._pixelRatio=e,this._enabled=!1,this._focused=!1,this._eventDispatcher=new App.EventDispatcher(App.ModelLocator.getProxy(App.ModelName.EVENT_LISTENER_POOL)),this._placeholder=a,this._placeholderStyle={font:g,fill:"#efefef"},this._currentStyle=this._placeholderStyle,this._textStyle={font:g,fill:App.ColorTheme.sBLUE},this._restrictPattern=null,this._text="",this._textField=new PIXI.Text(this._placeholder,this._currentStyle),this._inputProxy=document.getElementById("textInputProxy"),this._inputProxyListeners={focus:this._onFocus.bind(this),blur:this._onBlur.bind(this),change:this._onChange.bind(this)},f&&(this._icon=PIXI.Sprite.fromFrame("clear-app")),this._iconHitThreshold=Math.round(this._width-40*this._pixelRatio),this._render(),this.addChild(this._textField),this._icon&&this.addChild(this._icon)},App.Input.prototype=Object.create(PIXI.Graphics.prototype),App.Input.prototype.constructor=App.Input,App.Input.prototype._render=function(){var a=this._pixelRatio;this._renderBackground(!1,a),this._textField.x=Math.round(10*a),this._textField.y=Math.round((this._height-this._textField.height)/2+a),this._icon&&(this._icon.width=Math.round(20*a),this._icon.height=Math.round(20*a),this._icon.x=Math.round(this._width-this._icon.width-10*a),this._icon.y=Math.round((this._height-this._icon.height)/2),this._icon.tint=14540253)},App.Input.prototype._renderBackground=function(a,b){var c=App.ColorTheme;this.clear(),this.beginFill(a?c.INPUT_HIGHLIGHT:c.DARK_SHADE),this.drawRoundedRect(0,0,this._width,this._height,Math.round(5*b)),this.beginFill(16777215),this.drawRoundedRect(Math.round(b),Math.round(b),this._width-Math.round(2*b),this._height-Math.round(2*b),Math.round(4*b)),this.endFill()},App.Input.prototype.enable=function(){this._enabled||(this._enabled=!0,this._registerEventListeners(),this.interactive=!0)},App.Input.prototype.disable=function(){this._unRegisterEventListeners(),this._unRegisterProxyEventListeners(),this.interactive=!1,this._enabled=!1},App.Input.prototype.restrict=function(a){this._restrictPattern=a},App.Input.prototype.focus=function(){this._focused||(this._renderBackground(!0,this._pixelRatio),this._registerProxyEventListeners(),this._inputProxy.focus(),this._focused=!0)},App.Input.prototype.blur=function(){this._inputProxy.blur(),this._unRegisterProxyEventListeners(),this._focused=!1},App.Input.prototype.addEventListener=function(a,b,c){this._eventDispatcher.addEventListener(a,b,c)},App.Input.prototype.removeEventListener=function(a,b,c){this._eventDispatcher.removeEventListener(a,b,c)},App.Input.prototype._registerEventListeners=function(){App.Device.TOUCH_SUPPORTED?this.tap=this._onClick:this.click=this._onClick},App.Input.prototype._unRegisterEventListeners=function(){App.Device.TOUCH_SUPPORTED?this.tap=null:this.click=null},App.Input.prototype._registerProxyEventListeners=function(){var a=App.EventType;this._inputProxy.addEventListener(a.FOCUS,this._inputProxyListeners.focus,!1),this._inputProxy.addEventListener(a.BLUR,this._inputProxyListeners.blur,!1),this._inputProxy.addEventListener(a.CHANGE,this._inputProxyListeners.change,!1),this._inputProxy.addEventListener(a.KEY_PRESS,this._inputProxyListeners.change,!1),this._inputProxy.addEventListener(a.PASTE,this._inputProxyListeners.change,!1),this._inputProxy.addEventListener(a.TEXT_INPUT,this._inputProxyListeners.change,!1),this._inputProxy.addEventListener(a.INPUT,this._inputProxyListeners.change,!1)},App.Input.prototype._unRegisterProxyEventListeners=function(){var a=App.EventType;this._inputProxy.removeEventListener(a.FOCUS,this._inputProxyListeners.focus,!1),this._inputProxy.removeEventListener(a.BLUR,this._inputProxyListeners.blur,!1),this._inputProxy.removeEventListener(a.CHANGE,this._inputProxyListeners.change,!1),this._inputProxy.removeEventListener(a.KEY_PRESS,this._inputProxyListeners.change,!1),this._inputProxy.removeEventListener(a.PASTE,this._inputProxyListeners.change,!1),this._inputProxy.removeEventListener(a.TEXT_INPUT,this._inputProxyListeners.change,!1),this._inputProxy.removeEventListener(a.INPUT,this._inputProxyListeners.change,!1)},App.Input.prototype._onClick=function(a){this._inputProxy!==document.activeElement&&this.focus(),this._icon&&a.getLocalPosition(this).x>=this._iconHitThreshold&&(this._inputProxy.value="",this._onChange())},App.Input.prototype._onFocus=function(){var a=this._pixelRatio,b=this.toLocal(new PIXI.Point(this.x,this.y),this.stage);this._focused=!0,this._inputProxy.style.display="none",this._inputProxy.style.left=Math.round((this.x-b.x)/a)+"px",this._inputProxy.style.top=Math.round((this.y-b.y)/a)+"px",this._inputProxy.style.width=this._icon?Math.round(this._iconHitThreshold/a)+"px":Math.round(this._width/a)+"px",this._inputProxy.style.height=Math.round(this._height/a)+"px",this._inputProxy.style.fontSize=this._fontSize+"px",this._inputProxy.style.lineHeight=this._fontSize+"px",this._inputProxy.value=this._text,this._inputProxy.style.display="block",this._eventDispatcher.dispatchEvent(App.EventType.FOCUS)},App.Input.prototype._onBlur=function(){this._focused=!1,this._updateText(!0),this._inputProxy.style.top="-1000px",this._inputProxy.value="",this._renderBackground(!1,this._pixelRatio),this._unRegisterProxyEventListeners(),this._eventDispatcher.dispatchEvent(App.EventType.BLUR)},App.Input.prototype._onChange=function(a){this._updateText(!1),a&&13===a.keyCode&&this._inputProxy.blur()},App.Input.prototype._updateText=function(a){this._text=this._format(a),this._text===this._placeholder||0===this._text.length?(this._currentStyle===this._textStyle&&(this._currentStyle=this._placeholderStyle,this._textField.setStyle(this._currentStyle)),this._textField.setText(this._placeholder)):(this._currentStyle===this._placeholderStyle&&(this._currentStyle=this._textStyle,this._textField.setStyle(this._currentStyle)),this._textField.setText(this._text))},App.Input.prototype._format=function(){return this._restrictPattern&&(this._inputProxy.value=this._inputProxy.value.replace(this._restrictPattern,"")),this._inputProxy.value},App.TimeInput=function(a,b,c,d,e,f){App.Input.call(this,a,b,c,d,e,f),this._inputProxy=document.getElementById("timeInputProxy")},App.TimeInput.prototype=Object.create(App.Input.prototype),App.TimeInput.prototype.constructor=App.TimeInput,App.TimeInput.prototype._render=function(){var a=this._pixelRatio;this._renderBackground(!1,a),this._updateAlignment(),this._textField.y=Math.round(9*a)},App.TimeInput.prototype._updateText=function(a){App.Input.prototype._updateText.call(this,a),this._updateAlignment()},App.TimeInput.prototype._format=function(a){if(0===this._inputProxy.value.length)return"";var b=this._inputProxy.value.replace(/\D/g,""),c=b.substr(0,2),d=b.substr(2,2);return 2===c.length&&parseInt(c,10)>24?c="24":1===d.length&&parseInt(d,10)>5?d="5":d.length>=2&&parseInt(d,10)>59&&(d="59"),a&&(1===c.length&&(c="0"+c),0===d.length?d+="00":1===d.length&&(d+="0")),b=d.length>0?c+":"+d:c,this._inputProxy.value=b,b},App.TimeInput.prototype._updateAlignment=function(){this._textField.x=Math.round((this._width-this._textField.width)/2)},App.CalendarWeekRow=function(a,b,c,d){PIXI.Graphics.call(this);var e=Math.round(14*d)+"px HelveticaNeueCond",f=a.length/2,g=PIXI.Text,h=0,i=0;for(this.boundingBox=new App.Rectangle(0,0,c,Math.round(40*d)),this._week=a,this._width=c,this._pixelRatio=d,this._textStyle={font:e,fill:"#cccccc"},this._selectedStyle={font:e,fill:"#ffffff"},this._dateFields=new Array(7),this._selectedDayIndex=-1,this._highlightBackground=new PIXI.Graphics;f>i;i++,h+=2)this._dateFields[i]=new g(a[h],this._textStyle);this._render();var j=this._getDayByDate(b);for(j&&!j.otherMonth&&this._selectDay(j),this.addChild(this._highlightBackground),i=0;f>i;)this.addChild(this._dateFields[i++])},App.CalendarWeekRow.prototype=Object.create(PIXI.Graphics.prototype),App.CalendarWeekRow.prototype.constructor=App.CalendarWeekRow,App.CalendarWeekRow.prototype._render=function(){var a=App.ColorTheme,b=this._week.length/2,c=Math.round(this._width/b),d=this.boundingBox.height,e=null,f=-1,g=-1,h=0,i=0;for(this.clear(),this.beginFill(a.LIGHT_SHADE),this.drawRect(0,0,this._width,d),this.beginFill(a.BACKGROUND);b>i;i++,h+=2)e=this._dateFields[i],e.x=Math.round(i*c+(c-e.width)/2+1),e.y=Math.round((d-e.height)/2+1),this._week[h+1]?-1===f&&(f=i):(-1===g&&f>-1&&(g=i),i&&this.drawRect(Math.round(i*c),0,1,d));f>-1&&this.drawRect(f?f*c:0,0,-1===g?this._width:g*c,d),this.endFill(),App.GraphicUtils.drawRect(this._highlightBackground,a.BLUE,1,0,0,c-1,d),this._highlightBackground.alpha=0},App.CalendarWeekRow.prototype._getDayByDate=function(a){for(var b=0,c=0,d=this._week.length/2,e=-1;d>c;c++,b+=2)if(e=this._week[b],e===a)return{day:e,otherMonth:this._week[b+1],index:c};return null},App.CalendarWeekRow.prototype.getDayByPosition=function(a){for(var b=0,c=0,d=this._week.length/2,e=Math.round(this._width/d);d>c;c++,b+=2)if(a>=c*e&&c*e+e>=a)return{day:this._week[b],otherMonth:this._week[b+1],index:c};return null},App.CalendarWeekRow.prototype._selectDay=function(a){this._highlightBackground.x=a.index*Math.round(this._width/(this._week.length/2))+Math.round(this._pixelRatio),this._highlightBackground.alpha=1,this._selectedDayIndex>-1&&this._dateFields[this._selectedDayIndex].setStyle(this._textStyle),this._selectedDayIndex=a.index,this._dateFields[this._selectedDayIndex].setStyle(this._selectedStyle)},App.CalendarWeekRow.prototype._deselectDay=function(){this._selectedDayIndex>-1&&(this._dateFields[this._selectedDayIndex].setStyle(this._textStyle),this._selectedDayIndex=-1),this._highlightBackground.alpha=0},App.CalendarWeekRow.prototype.updateSelection=function(a){var b=this._getDayByDate(a);b&&0===b.otherMonth?this._selectDay(b):this._deselectDay()},App.CalendarWeekRow.prototype.change=function(a,b){this._week=a;for(var c=a.length/2,d=null,e=0,f=0;c>f;f++,e+=2)d=this._dateFields[f],d.setText(a[e]),d.setStyle(this._textStyle);this._render(),b>-1&&this.updateSelection(b)},App.Calendar=function(a,b,c){PIXI.Graphics.call(this);var d={font:"bold "+Math.round(12*c)+"px Arial",fill:"#999999"},e=App.CalendarWeekRow,f=PIXI.Text,g=App.DateUtils,h=App.Settings.getStartOfWeek(),i=g.getMonth(a,h),j=g.getDayLabels(h),k=j.length,l=i.length,m=0;for(this.boundingBox=new App.Rectangle(0,0,b,Math.round(321*c)),this._date=a,this._selectedDate=a,this._width=b,this._pixelRatio=c,this._weekRowPosition=Math.round(81*c),this._monthField=new PIXI.Text("",{font:Math.round(18*c)+"px HelveticaNeueCond",fill:App.ColorTheme.sBLUE}),this._prevButton=PIXI.Sprite.fromFrame("arrow-app"),this._nextButton=PIXI.Sprite.fromFrame("arrow-app"),this._dayLabelFields=new Array(k),this._weekRows=new Array(l),this._separatorContainer=new PIXI.Graphics;k>m;m++)this._dayLabelFields[m]=new f(j[m],d);for(m=0;l>m;m++)this._weekRows[m]=new e(i[m],this._selectedDate.getDate(),b,c);for(this._render(),this._updateMonthLabel(),this.addChild(this._monthField),this.addChild(this._prevButton),this.addChild(this._nextButton),m=0;k>m;)this.addChild(this._dayLabelFields[m++]);for(m=0;l>m;)this.addChild(this._weekRows[m++]);this.addChild(this._separatorContainer)},App.Calendar.prototype=Object.create(PIXI.Graphics.prototype),App.Calendar.prototype.constructor=App.Calendar,App.Calendar.prototype._render=function(){var a=App.GraphicUtils,b=App.ColorTheme,c=this._pixelRatio,d=this._width,e=this.boundingBox.height,f=Math.round(12*c)/this._prevButton.height,g=Math.round(15*c),h=d-2*g,i=null,j=Math.round(d/this._dayLabelFields.length),k=Math.round(40*c),l=this._weekRows[0],m=l.boundingBox.height,n=this._dayLabelFields.length,o=0;for(a.drawRects(this,b.BACKGROUND,1,[0,0,d,e],!0,!1),a.drawRects(this,b.DARK_SHADE,1,[0,Math.round(80*c),d,1,g,k,h,1],!1,!1),a.drawRects(this,b.LIGHT_SHADE,1,[g,k+1,h,1],!1,!0),this._monthField.y=Math.round((k-this._monthField.height)/2),this._prevButton.scale.x=f,this._prevButton.scale.y=f,this._prevButton.x=Math.round(20*c+this._prevButton.width),this._prevButton.y=Math.round((k-this._prevButton.height)/2+this._prevButton.height),this._prevButton.rotation=Math.PI,this._prevButton.tint=b.BLUE,this._nextButton.scale.x=f,this._nextButton.scale.y=f,this._nextButton.x=Math.round(d-20*c-this._nextButton.width),this._nextButton.y=Math.round((k-this._prevButton.height)/2),this._nextButton.tint=b.BLUE;n>o;o++)i=this._dayLabelFields[o],i.x=Math.round(o*j+(j-i.width)/2),i.y=Math.round(k+c+(k-i.height)/2);for(o=0,n=this._weekRows.length,this._separatorContainer.clear(),this._separatorContainer.beginFill(b.BACKGROUND,1);n>o;o++)l=this._weekRows[o],l.y=this._weekRowPosition+o*m,this._separatorContainer.drawRect(0,l.y+m,d,1);this._separatorContainer.endFill()},App.Calendar.prototype._updateMonthLabel=function(){this._monthField.setText(App.DateUtils.getMonthLabel(this._date.getMonth())+" "+this._date.getFullYear()),this._monthField.x=Math.round((this._width-this._monthField.width)/2)},App.Calendar.prototype.onClick=function(){var a=this.stage.getTouchData().getLocalPosition(this),b=a.x,c=a.y;if(c>=this._weekRowPosition)this._selectDay(b,c);else{var d=this._prevButton.x-this._prevButton.width/2-b,e=this._nextButton.x+this._nextButton.width/2-b,f=this._nextButton.y+this._nextButton.height/2-c,g=d*d-f*f,h=e*e-f*f,i=20*this._pixelRatio;Math.sqrt(Math.abs(g))<i?this._changeDate(App.Direction.LEFT,-1):Math.sqrt(Math.abs(h))<i&&this._changeDate(App.Direction.RIGHT,-1)}},App.Calendar.prototype._getWeekByPosition=function(a){for(var b=this._weekRows[0].boundingBox.height,c=null,d=this._weekRows.length,e=0;d>e;)if(c=this._weekRows[e++],c.y<=a&&c.y+b>a)return c;return null},App.Calendar.prototype._selectDay=function(a,b){var c=this._getWeekByPosition(b),d=c.getDayByPosition(a),e=d.day,f=this._weekRows.length,g=0;if(d.otherMonth)e>20?this._changeDate(App.Direction.LEFT,e):this._changeDate(App.Direction.RIGHT,e);else{for(;f>g;)this._weekRows[g++].updateSelection(e);this._selectedDate=new Date(this._date.getFullYear(),this._date.getMonth(),e)}},App.Calendar.prototype._changeDate=function(a,b){var c=this._date.getMonth(),d=this._date.getFullYear(),e=11>c?c+1:0,f=e?d:d+1;a===App.Direction.LEFT&&(e=c?c-1:11,f=c?d:d-1),this._date=new Date(f,e),b>-1&&(this._selectedDate=new Date(f,e,b)),this._updateMonthLabel();var g=App.DateUtils.getMonth(this._date,App.Settings.getStartOfWeek()),h=g.length,i=this._selectedDate.getFullYear()===f&&this._selectedDate.getMonth()===e,j=i?this._selectedDate.getDate():-1,k=0;for(k=0;h>k;k++)this._weekRows[k].change(g[k],j)},App.Pane=function(a,b,c,d,e){PIXI.DisplayObjectContainer.call(this),this._ticker=App.ModelLocator.getProxy(App.ModelName.TICKER),this._content=null,this._width=c,this._height=d,this._contentHeight=0,this._contentWidth=0,this._enabled=!1,this._eventsRegistered=!1,this._state=null,this._xOriginalScrollPolicy=a,this._yOriginalScrollPolicy=b,this._xScrollPolicy=a,this._yScrollPolicy=b,this._xScrollIndicator=new App.ScrollIndicator(App.Direction.X,e),this._yScrollIndicator=new App.ScrollIndicator(App.Direction.Y,e),this._mouseData=null,this._oldMouseX=0,this._oldMouseY=0,this._xSpeed=0,this._ySpeed=0,this._xOffset=0,this._yOffset=0,this._friction=.9,this._dumpForce=.5,this._snapForce=.2},App.Pane.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.Pane.prototype.constructor=App.Pane,App.Pane.prototype.setContent=function(a){this.removeContent(),this._content=a,this._contentHeight=Math.round(this._content.height),this._contentWidth=Math.round(this._content.width),this.addChildAt(this._content,0),this._updateScrollers()},App.Pane.prototype.removeContent=function(){this._content&&this.contains(this._content)&&(this.removeChild(this._content),this._content=null)},App.Pane.prototype.resize=function(a,b){this._width=a||this._width,this._height=b||this._height,this._content&&(this._contentHeight=Math.round(this._content.height),this._contentWidth=Math.round(this._content.width),this._content.x>0?this._updateX(0):this._content.y>0?this._updateY(0):this._contentWidth>this._width&&this._content.x+this._contentWidth<this._width?this._updateX(this._width-this._contentWidth):this._contentHeight>this._height&&this._content.y+this._contentHeight<this._height&&this._updateY(this._height-this._contentHeight),this._updateScrollers())},App.Pane.prototype._updateX=function(a){this._content.x=Math.round(a)},App.Pane.prototype._updateY=function(a){this._content.y=Math.round(a)},App.Pane.prototype.enable=function(){if(!this._enabled){var a=App.ScrollPolicy;(this._xScrollPolicy!==a.OFF||this._yScrollPolicy!==a.OFF)&&this._registerEventListeners(),this.interactive=!0,this._enabled=!0}},App.Pane.prototype.disable=function(){this._unRegisterEventListeners(),this.cancelScroll(),this._content.x>0?this._updateX(0):this._content.y>0?this._updateY(0):this._contentWidth>this._width&&this._content.x+this._contentWidth<this._width?this._updateX(this._width-this._contentWidth):this._contentHeight>this._height&&this._content.y+this._contentHeight<this._height&&this._updateY(this._height-this._contentHeight),this.interactive=!1,this._enabled=!1},App.Pane.prototype.resetScroll=function(){this._state=null,this._xSpeed=0,this._ySpeed=0,this._content&&(this._updateX(0),this._updateY(0),this._xScrollIndicator.hide(!0),this._yScrollIndicator.hide(!0))},App.Pane.prototype.cancelScroll=function(){this._state=null,this._xSpeed=0,this._ySpeed=0,this._xScrollIndicator.hide(!0),this._yScrollIndicator.hide(!0)},App.Pane.prototype._registerEventListeners=function(){this._eventsRegistered||(this._eventsRegistered=!0,App.Device.TOUCH_SUPPORTED?(this.touchstart=this._onPointerDown,this.touchend=this._onPointerUp,this.touchendoutside=this._onPointerUp,this.touchmove=this._onPointerMove):(this.mousedown=this._onPointerDown,this.mouseup=this._onPointerUp,this.mouseupoutside=this._onPointerUp,this.mousemove=this._onPointerMove),this._ticker.addEventListener(App.EventType.TICK,this,this._onTick))},App.Pane.prototype._unRegisterEventListeners=function(){this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),App.Device.TOUCH_SUPPORTED?(this.touchstart=null,this.touchend=null,this.touchendoutside=null,this.touchmove=null):(this.mousedown=null,this.mouseup=null,this.mouseupoutside=null,this.mousemove=null),this._eventsRegistered=!1},App.Pane.prototype._onPointerDown=function(a){this._mouseData=a;var b=this._mouseData.getLocalPosition(this.stage);
this._xOffset=b.x-this._content.x,this._yOffset=b.y-this._content.y,this._xSpeed=0,this._ySpeed=0,this._state=App.InteractiveState.DRAGGING,this._xScrollPolicy===App.ScrollPolicy.ON&&this._xScrollIndicator.show(),this._yScrollPolicy===App.ScrollPolicy.ON&&this._yScrollIndicator.show()},App.Pane.prototype._onPointerUp=function(){this._isContentPulled()?(this._state=App.InteractiveState.SNAPPING,this._xSpeed=0,this._ySpeed=0):this._state=App.InteractiveState.SCROLLING,this._mouseData=null},App.Pane.prototype._onPointerMove=function(a){this._mouseData=a},App.Pane.prototype._onTick=function(){var a=App.InteractiveState;this._state===a.DRAGGING?this._drag(App.ScrollPolicy):this._state===a.SCROLLING?this._scroll(App.ScrollPolicy,a):this._state===a.SNAPPING&&this._snap(App.ScrollPolicy,a),this._xScrollIndicator.visible&&this._xScrollIndicator.update(this._content.x),this._yScrollIndicator.visible&&this._yScrollIndicator.update(this._content.y)},App.Pane.prototype._drag=function(a){var b=0;if(this.stage){if(this._xScrollPolicy===a.ON){var c=this._mouseData.getLocalPosition(this.stage).x,d=this._content.x,e=d+this._contentWidth,f=d-this._contentWidth;if(-1e4>=c)return;d>0?(b=(1-d/this._width)*this._dumpForce,this._updateX(c*b-this._xOffset*b)):e<this._width?(b=e/this._width*this._dumpForce,this._updateX(f-(this._width-c)*b+(this._contentWidth-this._xOffset)*b)):this._updateX(c-this._xOffset),this._xSpeed=c-this._oldMouseX,this._oldMouseX=c}if(this._yScrollPolicy===a.ON){var g=this._mouseData.getLocalPosition(this.stage).y,h=this._content.y,i=h+this._contentHeight,j=this._height-this._contentHeight;if(-1e4>=g)return;h>0?(b=(1-h/this._height)*this._dumpForce,this._updateY(g*b-this._yOffset*b)):i<this._height?(b=i/this._height*this._dumpForce,this._updateY(j-(this._height-g)*b+(this._contentHeight-this._yOffset)*b)):this._updateY(g-this._yOffset),this._ySpeed=g-this._oldMouseY,this._oldMouseY=g}}},App.Pane.prototype._scroll=function(a,b){if(this._xScrollPolicy===a.ON){this._updateX(this._content.x+this._xSpeed);var c=this._content.x,d=c+this._contentWidth;c>0?this._xSpeed*=(1-c/this._width)*this._dumpForce:d<this._width&&(this._xSpeed*=d/this._width*this._dumpForce),Math.abs(this._xSpeed)<.1?(this._xSpeed=0,this._state=null,this._xScrollIndicator.hide(),(c>0||d<this._width)&&(this._state=b.SNAPPING)):this._xSpeed*=this._friction}if(this._yScrollPolicy===a.ON){this._updateY(this._content.y+this._ySpeed);var e=this._content.y,f=e+this._contentHeight;e>0?this._ySpeed*=(1-e/this._height)*this._dumpForce:f<this._height&&(this._ySpeed*=f/this._height*this._dumpForce),Math.abs(this._ySpeed)<.1?(this._ySpeed=0,this._state=null,this._yScrollIndicator.hide(),(e>0||f<this._height)&&(this._state=b.SNAPPING)):this._ySpeed*=this._friction}},App.Pane.prototype._snap=function(a){if(this._xScrollPolicy===a.ON){var b=this._content.x,c=b+this._contentWidth,d=b-this._contentWidth,e=b*this._snapForce;b>0?5>e?(this._state=null,this._updateX(0),this._xScrollIndicator.hide()):this._updateX(e):c<this._width&&(e=d+(b-d)*this._snapForce,e>=this._width-5?(this._state=null,this._updateX(d),this._xScrollIndicator.hide()):this._updateX(e))}if(this._yScrollPolicy===a.ON){var f=this._content.y,g=f+this._contentHeight,h=this._height-this._contentHeight;f>0?(e=f*this._snapForce,5>e?(this._state=null,this._updateY(0),this._yScrollIndicator.hide()):this._updateY(e)):g<this._height&&(e=h+(f-h)*this._snapForce,e>=h-5?(this._state=null,this._updateY(h),this._yScrollIndicator.hide()):this._updateY(e))}},App.Pane.prototype._isContentPulled=function(){return this._content.x>0||this._content.y>0||this._content.y+this._contentHeight<this._height||this._content.x+this._contentWidth<this._width},App.Pane.prototype._updateScrollers=function(){var a=App.ScrollPolicy;this._xOriginalScrollPolicy===a.AUTO&&(this._contentWidth>=this._width?(this._xScrollPolicy=a.ON,this._xScrollIndicator.resize(this._width,this._contentWidth),this._xScrollIndicator.x=this._height-this._xScrollIndicator.boundingBox.height,this.contains(this._xScrollIndicator)||this.addChild(this._xScrollIndicator)):(this._xScrollPolicy=a.OFF,this._xScrollIndicator.hide(),this.contains(this._xScrollIndicator)&&this.removeChild(this._xScrollIndicator))),this._yOriginalScrollPolicy===a.AUTO&&(this._contentHeight>=this._height?(this._yScrollPolicy=a.ON,this._yScrollIndicator.resize(this._height,this._contentHeight),this._yScrollIndicator.x=this._width-this._yScrollIndicator.boundingBox.width,this.contains(this._yScrollIndicator)||this.addChild(this._yScrollIndicator)):(this._yScrollPolicy=a.OFF,this._yScrollIndicator.hide(),this.contains(this._yScrollIndicator)&&this.removeChild(this._yScrollIndicator))),this._xScrollPolicy===a.OFF&&this._yScrollPolicy===a.OFF&&this._unRegisterEventListeners()},App.Pane.prototype.destroy=function(){this.disable(),this._ticker=null,this._state=null,this._xSpeed=0,this._ySpeed=0,this._mouseData=null,this.removeContent(),this.contains(this._xScrollIndicator)&&this.removeChild(this._xScrollIndicator),this._xScrollIndicator.destroy(),this._xScrollIndicator=null,this.contains(this._yScrollIndicator)&&this.removeChild(this._yScrollIndicator),this._yScrollIndicator.destroy(),this._yScrollIndicator=null,this._xOriginalScrollPolicy=null,this._yOriginalScrollPolicy=null,this._xScrollPolicy=null,this._yScrollPolicy=null},App.InfiniteList=function(a,b,c,d,e,f){PIXI.DisplayObjectContainer.call(this);var g=App.ModelLocator,h=App.ModelName,i=App.Direction,j=new b(0,a[0],f),k=c===i.X?j.boundingBox.width:j.boundingBox.height,l=c===i.X?Math.ceil(d/k)+1:Math.ceil(e/k)+1,m=a.length-1,n=0,o=0;for(this.boundingBox=new PIXI.Rectangle(0,0,d,e),this.hitArea=this.boundingBox,this._ticker=g.getProxy(h.TICKER),this._model=a,this._itemClass=b,this._direction=c,this._width=d,this._height=e,this._pixelRatio=f,this._items=new Array(l),this._itemSize=k,this._selectedModelIndex=-1,this._enabled=!1,this._state=null,this._mouseData=null,this._virtualPosition=0,this._oldMousePosition=0,this._speed=0,this._offset=0,this._friction=.9;l>o;o++,n++)n>m&&(n=0),o>0&&(j=new b(n,a[n],f)),this._items[o]=j,this.addChild(j);this._updateLayout(!1)},App.InfiniteList.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.InfiniteList.prototype.constructor=App.InfiniteList,App.InfiniteList.prototype.enable=function(){this._enabled||(this._enabled=!0,this._registerEventListeners(),this.interactive=!0)},App.InfiniteList.prototype.disable=function(){this.interactive=!1,this._unRegisterEventListeners(),this._enabled=!1},App.InfiniteList.prototype.selectItemByPosition=function(a){var b=0,c=this._items.length,d=this._itemSize,e=this._direction===App.Direction.X?"x":"y",f=null,g=0;for(this._selectedModelIndex=-1;c>b;)if(f=this._items[b++],g=f[e],a>=g&&g+d>a){this._selectedModelIndex=f.getModelIndex();break}for(b=0;c>b;)this._items[b++].select(this._selectedModelIndex)},App.InfiniteList.prototype._registerEventListeners=function(){App.Device.TOUCH_SUPPORTED?(this.touchstart=this._onPointerDown,this.touchend=this._onPointerUp,this.touchendoutside=this._onPointerUp):(this.mousedown=this._onPointerDown,this.mouseup=this._onPointerUp,this.mouseupoutside=this._onPointerUp),this._ticker.addEventListener(App.EventType.TICK,this,this._onTick)},App.InfiniteList.prototype._unRegisterEventListeners=function(){this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),App.Device.TOUCH_SUPPORTED?(this.touchstart=null,this.touchend=null,this.touchendoutside=null):(this.mousedown=null,this.mouseup=null,this.mouseupoutside=null)},App.InfiniteList.prototype._onTick=function(){var a=App.InteractiveState;this._state===a.DRAGGING?this._drag(App.Direction):this._state===a.SCROLLING&&this._scroll(App.Direction)},App.InfiniteList.prototype._onPointerDown=function(a){this._mouseData=a;var b=this._mouseData.getLocalPosition(this.stage).x;this._direction===App.Direction.Y&&(b=this._mouseData.getLocalPosition(this.stage).y),this._offset=b-this._virtualPosition,this._speed=0,this._state=App.InteractiveState.DRAGGING},App.InfiniteList.prototype._onPointerUp=function(){this._state=App.InteractiveState.SCROLLING,this._mouseData=null},App.InfiniteList.prototype._drag=function(a){if(this.stage){if(this._direction===a.X){var b=this._mouseData.getLocalPosition(this.stage).x;if(-1e4>=b)return;this._updateX(b-this._offset)}else if(this._direction===a.Y){if(b=this._mouseData.getLocalPosition(this.stage).y,-1e4>=b)return;this._updateY(b-this._offset)}this._speed=b-this._oldMousePosition,this._oldMousePosition=b}},App.InfiniteList.prototype._scroll=function(a){this._direction===a.X?this._updateX(this._virtualPosition+this._speed):this._direction===a.Y&&this._updateY(this._virtualPosition+this._speed),Math.abs(this._speed)<.1?(this._speed=0,this._state=null):this._speed*=this._friction},App.InfiniteList.prototype._updateX=function(a){a=Math.round(a);var b=0,c=this._items.length,d=this._itemSize,e=this._width,f=a-this._virtualPosition,g=0,h=0,i=0,j=0,k=this._model.length,l=0,m=null;for(this._virtualPosition=a;c>b;)m=this._items[b++],l=m.x+f,(0>l+d||l>e)&&(g=-Math.floor(l/e),l+=g*c*d,h=Math.floor(this._virtualPosition/d),i=Math.floor(l/d),j=h>=0?(i-h%k)%k:(i-h)%k,0>j?j=k+j:j>=k&&(j=k-1),m.setModel(j,this._model[j],this._selectedModelIndex)),m.x=l},App.InfiniteList.prototype._updateY=function(a){a=Math.round(a);var b=0,c=this._items.length,d=this._itemSize,e=this._height,f=a-this._virtualPosition,g=0,h=0,i=0,j=0,k=this._model.length,l=0,m=null;for(this._virtualPosition=a;c>b;)m=this._items[b++],l=m.y+f,(0>l+d||l>e)&&(g=-Math.floor(l/e),l+=g*c*d,h=Math.floor(this._virtualPosition/d),i=Math.floor(l/d),j=h>=0?(i-h%k)%k:(i-h)%k,0>j?j=k+j:j>=k&&(j=k-1),m.setModel(j,this._model[j],this._selectedModelIndex)),m.y=l},App.InfiniteList.prototype._updateLayout=function(a){var b=0,c=this._items.length,d=null,e=0,f=App.Direction;if(this._direction===f.X){for(;c>b;)d=this._items[b++],d.x=e,e=Math.round(e+d.boundingBox.width);a&&this._updateX(this.x)}else if(this._direction===f.Y){for(;c>b;)d=this._items[b++],d.y=e,e=Math.round(e+d.boundingBox.height);a&&this._updateY(this.y)}},App.TileList=function(a,b){PIXI.DisplayObjectContainer.call(this),this._direction=a,this._windowSize=b,this._items=[],this.boundingBox=new App.Rectangle},App.TileList.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.TileList.prototype.constructor=App.TileList,App.TileList.prototype.add=function(a,b){this._items[this._items.length]=a,this.addChild(a),b&&this.updateLayout()},App.TileList.prototype.updateX=function(a){this.x=Math.round(a);for(var b=0,c=this._items.length,d=0,e=0,f=null;c>b;)f=this._items[b++],d=f.boundingBox.width,e=this.x+f.x,f.visible=e+d>0&&e<this._windowSize},App.TileList.prototype.updateY=function(a){this.y=Math.round(a);for(var b=0,c=this._items.length,d=0,e=0,f=null;c>b;)f=this._items[b++],d=f.boundingBox.height,e=this.y+f.y,f.visible=e+d>0&&e<this._windowSize},App.TileList.prototype.updateLayout=function(a){var b=0,c=this._items.length,d=null,e=0,f=App.Direction;if(this._direction===f.X){for(;c>b;)d=this._items[b++],d.x=e,e=Math.round(e+d.boundingBox.width);this.boundingBox.width=e,this.boundingBox.height=d.boundingBox.height,a&&this.updateY(this.x)}else if(this._direction===f.Y){for(;c>b;)d=this._items[b++],d.y=e,e=Math.round(e+d.boundingBox.height);this.boundingBox.height=e,this.boundingBox.width=d.boundingBox.width,a&&this.updateY(this.y)}},App.TileList.prototype.destroy=function(){},App.TilePane=function(a,b,c,d,e){App.Pane.call(this,a,b,c,d,e)},App.TilePane.prototype=Object.create(App.Pane.prototype),App.TilePane.prototype.constructor=App.TilePane,App.TilePane.prototype.setContent=function(a){this.removeContent(),this._content=a,this._contentHeight=Math.round(this._content.boundingBox.height),this._contentWidth=Math.round(this._content.boundingBox.width),this.addChildAt(this._content,0),this._updateScrollers()},App.TilePane.prototype.resize=function(a,b){this._width=a||this._width,this._height=b||this._height,this._content&&(this._contentHeight=Math.round(this._content.boundingBox.height),this._contentWidth=Math.round(this._content.boundingBox.width),this._content.x>0?this._updateX(0):this._content.y>0?this._updateY(0):this._contentWidth>this._width&&this._content.x+this._contentWidth<this._width?this._updateX(this._width-this._contentWidth):this._contentHeight>this._height&&this._content.y+this._contentHeight<this._height&&this._updateY(this._height-this._contentHeight),this._updateScrollers())},App.TilePane.prototype._updateX=function(a){this._content.updateX(a)},App.TilePane.prototype._updateY=function(a){this._content.updateY(a)},App.ViewStack=function(a,b){if(PIXI.DisplayObjectContainer.call(this),this._children=[],this._selectedChild=null,this._selectedIndex=-1,this._childrenToHide=[],a)for(var c=0,d=a.length;d>c;)this.add(a[c++],b)},App.ViewStack.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.ViewStack.prototype.constructor=App.ViewStack,App.ViewStack.prototype.add=function(a,b){this._children[this._children.length]=a,b&&this.addChild(a)},App.ViewStack.prototype.selectChild=function(a){if(this._selectedChild){if(!a||this._selectedChild===a)return;this._childrenToHide[this._childrenToHide.length]=this._selectedChild}for(var b=0,c=this._children.length;c>b;)a===this._children[b++]&&(this._selectedChild=a,this._selectedIndex=b-1)},App.ViewStack.prototype.selectChildByIndex=function(a){if(!(0>a||a>=this._children.length)){if(this._selectedChild){if(this._selectedChild===this._children[a])return;this._childrenToHide[this._childrenToHide.length]=this._selectedChild}this._selectedChild=this._children[a],this._selectedIndex=a}},App.ViewStack.prototype.getSelectedChild=function(){return this._selectedChild},App.ViewStack.prototype.getSelectedIndex=function(){return this._selectedIndex},App.ViewStack.prototype.getChildByIndex=function(a){return 0>a||a>=this._children.length?null:this._children[a]},App.ViewStack.prototype.show=function(){if(this._selectedChild){for(var a=0,b=this._childrenToHide.length;b>a;a++)if(this._selectedChild===this._childrenToHide[a]){this._selectedChild.removeEventListener(App.EventType.COMPLETE,this,this._onHideComplete),this._childrenToHide.splice(a,1);break}this.contains(this._selectedChild)||this.addChild(this._selectedChild),this._selectedChild.show()}},App.ViewStack.prototype.hide=function(){for(var a=0,b=this._childrenToHide.length,c=null,d=App.EventType;b>a;)c=this._childrenToHide[a++],c.addEventListener(d.COMPLETE,this,this._onHideComplete),c.hide()},App.ViewStack.prototype._onHideComplete=function(a){if(a.state===App.TransitionState.HIDDEN){var b=a.target;b.removeEventListener(App.EventType.COMPLETE,this,this._onHideComplete),this.contains(b)&&this.removeChild(b);for(var c=0,d=this._childrenToHide.length;d>c;c++)if(b===this._childrenToHide[c]){this._childrenToHide.splice(c,1);break}}},App.Screen=function(a,b,c){PIXI.DisplayObjectContainer.call(this);var d=App.ModelLocator,e=App.ModelName,f=b.pixelRatio;this._model=a,this._layout=b,this._enabled=!1,this._eventsRegistered=!1,this._transitionState=App.TransitionState.HIDDEN,this._interactiveState=null,this._mouseDownPosition=null,this._mouseX=0,this._mouseY=0,this._leftSwipeThreshold=Math.round(15*f),this._rightSwipeThreshold=Math.round(5*f),this._swipeEnabled=!1,this._preferScroll=!0,this._ticker=d.getProxy(e.TICKER),this._eventDispatcher=new App.EventDispatcher(d.getProxy(e.EVENT_LISTENER_POOL)),this._showHideTween=new App.TweenProxy(c,App.Easing.outExpo,0,d.getProxy(e.EVENT_LISTENER_POOL)),this.alpha=0},App.Screen.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.Screen.prototype.constructor=App.Screen,App.Screen.prototype.show=function(){var a=App.TransitionState;(this._transitionState===a.HIDDEN||this._transitionState===a.HIDING)&&(this.enable(),this._transitionState=a.SHOWING,this._showHideTween.restart(),this.visible=!0)},App.Screen.prototype.hide=function(){var a=App.TransitionState;(this._transitionState===a.SHOWN||this._transitionState===a.SHOWING)&&(this._transitionState=a.HIDING,this._showHideTween.start(!0))},App.Screen.prototype.enable=function(){this._enabled||(this.interactive=!0,this._registerEventListeners(),this._enabled=!0)},App.Screen.prototype.disable=function(){this.interactive=!1,this._unRegisterEventListeners(),this._enabled=!1,this._interactiveState=null},App.Screen.prototype.addEventListener=function(a,b,c){this._eventDispatcher.addEventListener(a,b,c)},App.Screen.prototype.removeEventListener=function(a,b,c){this._eventDispatcher.removeEventListener(a,b,c)},App.Screen.prototype._registerEventListeners=function(){this._eventsRegistered||(this._eventsRegistered=!0,App.Device.TOUCH_SUPPORTED?(this.touchstart=this._onPointerDown,this.touchend=this._onPointerUp,this.touchendoutside=this._onPointerUp):(this.mousedown=this._onPointerDown,this.mouseup=this._onPointerUp,this.mouseupoutside=this._onPointerUp),this._ticker.addEventListener(App.EventType.TICK,this,this._onTick),this._showHideTween.addEventListener(App.EventType.COMPLETE,this,this._onTweenComplete))},App.Screen.prototype._unRegisterEventListeners=function(){this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),this._showHideTween.removeEventListener(App.EventType.COMPLETE,this,this._onTweenComplete),App.Device.TOUCH_SUPPORTED?(this.touchstart=null,this.touchend=null,this.touchendoutside=null):(this.mousedown=null,this.mouseup=null,this.mouseupoutside=null),this._eventsRegistered=!1},App.Screen.prototype._onTick=function(){if(this._showHideTween.isRunning()){var a=App.TransitionState;this._transitionState===a.SHOWING?this.alpha=this._showHideTween.progress:this._transitionState===a.HIDING&&(this.alpha=1-this._showHideTween.progress)}this._swipeEnabled&&this._interactiveState===App.InteractiveState.DRAGGING&&this._drag()},App.Screen.prototype._onTweenComplete=function(){var a=App.TransitionState;this._transitionState===a.SHOWING?(this._transitionState=a.SHOWN,this.alpha=1):this._transitionState===a.HIDING&&(this._transitionState=a.HIDDEN,this.disable(),this.alpha=0,this.visible=!1,this._eventDispatcher.dispatchEvent(App.EventType.COMPLETE,{target:this,state:this._transitionState}))},App.Screen.prototype._onPointerDown=function(a){this.stage&&(this._mouseDownPosition=a.getLocalPosition(this.stage),this._mouseX=this._mouseDownPosition.x,this._mouseY=this._mouseDownPosition.y),this._swipeEnabled&&(this._interactiveState=App.InteractiveState.DRAGGING)},App.Screen.prototype._onPointerUp=function(a){if(this._swipeEnabled&&(this._interactiveState===App.InteractiveState.SWIPING&&this._swipeEnd(),this._interactiveState=null),this.stage&&this._mouseDownPosition&&this._enabled){var b=this._mouseDownPosition.x,c=this._mouseDownPosition.y;this._mouseDownPosition=a.getLocalPosition(this.stage,this._mouseDownPosition);var d=b-this._mouseDownPosition.x,e=c-this._mouseDownPosition.y,f=d*d-e*e,g=App.TransitionState;Math.abs(f)<5&&(this._transitionState===g.SHOWING||this._transitionState===g.SHOWN)&&this._onClick(),this._mouseDownPosition=null}},App.Screen.prototype._drag=function(){var a=App.InteractiveState;if(this._interactiveState===a.DRAGGING&&this.stage&&this._mouseX){var b=this.stage.getTouchPosition(),c=b.x,d=b.y;this._mouseX-c>this._leftSwipeThreshold?(this._interactiveState=a.SWIPING,this._swipeStart(Math.abs(this._mouseY-d)>Math.abs(this._mouseX-c)&&this._preferScroll,App.Direction.LEFT)):c-this._mouseX>this._rightSwipeThreshold&&(this._interactiveState=a.SWIPING,this._swipeStart(Math.abs(this._mouseY-d)>Math.abs(this._mouseX-c)&&this._preferScroll,App.Direction.RIGHT)),this._mouseX=c,this._mouseY=d}},App.Screen.prototype._onClick=function(){this._eventDispatcher.dispatchEvent(App.EventType.CLICK)},App.Screen.prototype._swipeStart=function(){},App.Screen.prototype._swipeEnd=function(){},App.Screen.prototype.destroy=function(){this.disable(),this._eventDispatcher.destroy(),this._eventDispatcher=null,this._showHideTween.destroy(),this._showHideTween=null,this._ticker=null,this._model=null,this._layout=null,this._transitionState=null,this._mouseDownPosition=null},App.ListHeader=function(a,b,c){PIXI.Graphics.call(this),this._width=b,this._pixelRatio=c,this._textField=new PIXI.Text(a,{font:Math.round(12*c)+"px HelveticaNeueCond",fill:"#ffffff"}),this._render(),this.addChild(this._textField)},App.ListHeader.prototype=Object.create(PIXI.Graphics.prototype),App.ListHeader.prototype.constructor=App.ListHeader,App.ListHeader.prototype._render=function(){var a=App.GraphicUtils,b=App.ColorTheme,c=(this._pixelRatio,Math.round(30*this._pixelRatio));a.drawRects(this,b.BLUE,1,[0,0,this._width,c],!0,!1),a.drawRects(this,b.DARK_BLUE,1,[0,c-1,this._width,1],!1,!0),this._textField.x=Math.round((this._width-this._textField.width)/2),this._textField.y=Math.round((c-this._textField.height)/2)},App.AddNewButton=function(a,b,c,d,e){PIXI.Graphics.call(this),this.boundingBox=new App.Rectangle(0,0,c,d),this._label=a,this._pixelRatio=e,this._icon=PIXI.Sprite.fromFrame("plus-app"),this._iconResizeRatio=Math.round(20*e)/this._icon.height,this._labelField=new PIXI.Text(a,b),this._render(),this.addChild(this._icon),this.addChild(this._labelField)},App.AddNewButton.prototype=Object.create(PIXI.Graphics.prototype),App.AddNewButton.prototype.constructor=App.AddNewButton,App.AddNewButton.prototype._render=function(){var a=App.ColorTheme,b=this._labelField.width,c=Math.round(10*this._pixelRatio),d=this.boundingBox.height,e=Math.round(10*this._pixelRatio),f=0;App.GraphicUtils.drawRect(this,a.LIGHT_SHADE,1,e,0,this.boundingBox.width-2*e,1),this._icon.scale.x=this._iconResizeRatio,this._icon.scale.y=this._iconResizeRatio,b+=this._icon.width+c,f=Math.round((this.boundingBox.width-b)/2),this._icon.x=f,this._icon.y=Math.round((d-this._icon.height)/2),this._icon.tint=a.DARK_SHADE,this._labelField.x=f+this._icon.width+c,this._labelField.y=Math.round((d-this._labelField.height)/2)},App.SwipeButton=function(a,b){PIXI.DisplayObjectContainer.call(this),this._width=a,this._interactionEnabled=!1,this._interactiveState=null,this._dragFriction=.5,this._snapForce=.5,this._openOffset=b,this._open=!1,this._ticker=App.ModelLocator.getProxy(App.ModelName.TICKER)},App.SwipeButton.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.SwipeButton.prototype.constructor=App.SwipeButton,App.SwipeButton.prototype._enableInteraction=function(){this._interactionEnabled||(this._interactionEnabled=!0,this._ticker.addEventListener(App.EventType.TICK,this,this._onTick),this.interactive=!0)},App.SwipeButton.prototype._disableInteraction=function(){this.interactive=!1,this._interactiveState=null,this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),this._interactionEnabled=!1},App.SwipeButton.prototype._onTick=function(){var a=App.InteractiveState;this._interactiveState===a.SWIPING?this._swipe():this._interactiveState===a.SNAPPING&&this._snap()},App.SwipeButton.prototype.swipeStart=function(a){var b=App.Direction,c=App.InteractiveState;this._interactiveState||(this._open||a!==b.LEFT?this._open&&a===b.RIGHT&&(this._interactiveState=c.SNAPPING,this._enableInteraction()):(this._interactiveState=c.SWIPING,this._enableInteraction()))},App.SwipeButton.prototype.swipeEnd=function(){this._interactiveState===App.InteractiveState.SWIPING&&(this._interactiveState=App.InteractiveState.SNAPPING)},App.SwipeButton.prototype._swipe=function(){if(this.stage&&!this._open){var a=this.stage.getTouchPosition().x;if(-1e4>=a)return;this._updateSwipePosition(-Math.round(this._width*(1-a/this._width)*this._dragFriction))}},App.SwipeButton.prototype._snap=function(){var a=this._getSwipePosition(),b=Math.round(a*this._snapForce);a<-this._openOffset?b>=-this._openOffset?(this._open=!0,this._disableInteraction(),this._updateSwipePosition(-this._openOffset)):this._updateSwipePosition(b):b>=-1?(this._open=!1,this._disableInteraction(),this._updateSwipePosition(0)):this._updateSwipePosition(b)},App.SwipeButton.prototype.close=function(a){this._open&&(a?(this._updateSwipePosition(0),this._open=!1):(this._interactiveState=App.InteractiveState.SNAPPING,this._enableInteraction()))},App.SwipeButton.prototype._updateSwipePosition=function(){},App.SwipeButton.prototype._getSwipePosition=function(){},App.SelectTimeScreen=function(a,b){App.Screen.call(this,a,b,.4);var c=b.pixelRatio,d=b.width,e=App.ScrollPolicy;this._pane=new App.Pane(e.OFF,e.AUTO,d,b.height,c),this._container=new PIXI.DisplayObjectContainer,this._inputBackground=new PIXI.Graphics,this._inputOverlay=new PIXI.Graphics,this._input=new App.TimeInput("00:00",30,d-Math.round(20*c),Math.round(40*c),c),this._header=new App.ListHeader("Select Date",d,c),this._calendar=new App.Calendar(new Date,d,c),this._inputFocused=!1,this._render(),this._container.addChild(this._inputBackground),this._container.addChild(this._header),this._container.addChild(this._calendar),this._container.addChild(this._input),this._pane.setContent(this._container),this.addChild(this._pane)},App.SelectTimeScreen.prototype=Object.create(App.Screen.prototype),App.SelectTimeScreen.prototype.constructor=App.SelectTimeScreen,App.SelectTimeScreen.prototype._render=function(){var a=App.ColorTheme,b=App.GraphicUtils,c=this._layout.pixelRatio,d=Math.round(60*c),e=this._layout.width;b.drawRects(this._inputBackground,a.BACKGROUND,1,[0,0,e,d],!0,!1),b.drawRects(this._inputBackground,a.DARK_SHADE,1,[0,d-1,e,1],!1,!0),this._input.x=Math.round(10*c),this._input.y=Math.round((d-this._input.height)/2),this._header.y=d,this._calendar.y=Math.round(this._header.y+this._header.height),b.drawRect(this._inputOverlay,0,.2,0,0,e,this._calendar.y+this._calendar.boundingBox.height)},App.SelectTimeScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._input.enable(),this._pane.enable()},App.SelectTimeScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._input.disable(),this._pane.disable()},App.SelectTimeScreen.prototype._registerEventListeners=function(){App.Screen.prototype._registerEventListeners.call(this);var a=App.EventType;this._input.addEventListener(a.FOCUS,this,this._onInputFocus),this._input.addEventListener(a.BLUR,this,this._onInputBlur)},App.SelectTimeScreen.prototype._unRegisterEventListeners=function(){var a=App.EventType;this._input.removeEventListener(a.FOCUS,this,this._onInputFocus),this._input.removeEventListener(a.BLUR,this,this._onInputBlur),App.Screen.prototype._unRegisterEventListeners.call(this)},App.SelectTimeScreen.prototype._onInputFocus=function(){this._inputFocused=!0,this._container.contains(this._inputOverlay)||this._container.addChildAt(this._inputOverlay,this._container.getChildIndex(this._input))},App.SelectTimeScreen.prototype._onInputBlur=function(){this._container.contains(this._inputOverlay)&&this._container.removeChild(this._inputOverlay),this._inputFocused=!1},App.SelectTimeScreen.prototype._onClick=function(){this._inputFocused&&this._input.blur(),this._calendar.onClick()},App.AccountButton=function(a,b,c){PIXI.Graphics.call(this),this._model=a,this._layout=b;var d=this._layout.pixelRatio,e=Math.round(70*d);this.boundingBox=new PIXI.Rectangle(0,0,this._layout.width,e),this._nameLabel=new PIXI.Text(this._model.name+" "+c,{font:Math.round(24*d)+"px HelveticaNeueCond",fill:App.ColorTheme.sBLUE}),this._nameLabel.x=Math.round(15*d),this._nameLabel.y=Math.round(15*d),this._detailsLabel=new PIXI.Text("Balance: 2.876, Expenses: -250, Income: 1.500",{font:Math.round(12*d)+"px Arial",fill:"#999999"}),this._detailsLabel.x=Math.round(15*d),this._detailsLabel.y=Math.round(45*d),this.addChild(this._nameLabel),this.addChild(this._detailsLabel),this.interactive=!0,this._render()},App.AccountButton.prototype=Object.create(PIXI.Graphics.prototype),App.AccountButton.prototype.constructor=App.AccountButton,App.AccountButton.prototype.resize=function(a){this.boundingBox.width=a,this._render()},App.AccountButton.prototype._render=function(){var a=App.ColorTheme,b=App.GraphicUtils,c=Math.round(10*this._layout.pixelRatio);b.drawRects(this,a.BACKGROUND,1,[0,0,this.boundingBox.width,this.boundingBox.height],!0,!1),b.drawRects(this,a.LIGHT_SHADE,1,[c,0,this.boundingBox.width-2*c,1],!1,!1),b.drawRects(this,a.DARK_SHADE,1,[c,this.boundingBox.height-1,this.boundingBox.width-2*c,1],!1,!0)},App.AccountButton.prototype.destroy=function(){this.clear(),this.interactive=!1,this._layout=null,this._model=null,this.boundingBox=null,this.removeChild(this._nameLabel),this._nameLabel=null,this.removeChild(this._detailsLabel),this._detailsLabel=null},App.AccountScreen=function(a,b){App.Screen.call(this,a,b,.4);var c=0,d=this._model.length(),e=App.AccountButton,f=null;for(this._buttons=new Array(d),this._buttonList=new App.TileList(App.Direction.Y,b.height);30>c;c++)f=new e(this._model.getItemAt(0),this._layout,c),this._buttons[c]=f,this._buttonList.add(f);this._buttonList.updateLayout(),this._pane=new App.TilePane(App.ScrollPolicy.OFF,App.ScrollPolicy.AUTO,this._layout.width,this._layout.height,this._layout.pixelRatio),this._pane.setContent(this._buttonList),this.addChild(this._pane)},App.AccountScreen.prototype=Object.create(App.Screen.prototype),App.AccountScreen.prototype.constructor=App.AccountScreen,App.AccountScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._pane.resetScroll(),this._pane.enable()},App.AccountScreen.prototype._onClick=function(){App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,App.ScreenName.CATEGORY)},App.AccountScreen.prototype.destroy=function(){App.Screen.prototype.destroy.call(this),this.disable(),this.removeChild(this._pane),this._pane.destroy(),this._pane=null,this._buttons.length=0,this._buttons=null},App.SubCategoryButton=function(a,b,c){App.SwipeButton.call(this,b,Math.round(80*c));var d=Math.round(14*c)+"px HelveticaNeueCond";this.boundingBox=new App.Rectangle(0,0,b,Math.round(40*c)),this._label=a,this._pixelRatio=c,this._swipeSurface=new PIXI.Graphics,this._labelField=new PIXI.Text(a,{font:d,fill:App.ColorTheme.sBLUE}),this._background=new PIXI.Graphics,this._deleteLabel=new PIXI.Text("Delete",{font:d,fill:"#ffffff"}),this._render(),this.addChild(this._background),this.addChild(this._deleteLabel),this._swipeSurface.addChild(this._labelField),this.addChild(this._swipeSurface)},App.SubCategoryButton.prototype=Object.create(App.SwipeButton.prototype),App.SubCategoryButton.prototype.constructor=App.SubCategoryButton,App.SubCategoryButton.prototype._render=function(){var a=App.ColorTheme,b=App.GraphicUtils,c=this._pixelRatio,d=this.boundingBox.width,e=this.boundingBox.height,f=Math.round(10*c);b.drawRect(this._background,a.SWIPE_BACKGROUND,1,0,0,d,e),this._deleteLabel.x=Math.round(d-50*c),this._deleteLabel.y=Math.round((e-this._deleteLabel.height)/2),b.drawRects(this._swipeSurface,a.BACKGROUND,1,[0,0,d,e],!0,!1),b.drawRects(this._swipeSurface,a.LIGHT_SHADE,1,[f,0,d-2*f,1],!1,!1),b.drawRects(this._swipeSurface,a.DARK_SHADE,1,[f,e-1,d-2*f,1],!1,!0),this._labelField.x=Math.round(20*c),this._labelField.y=Math.round((e-this._labelField.height)/2)},App.SubCategoryButton.prototype._updateSwipePosition=function(a){this._swipeSurface.x=a},App.SubCategoryButton.prototype._getSwipePosition=function(){return this._swipeSurface.x},App.SubCategoryList=function(a,b,c){PIXI.Graphics.call(this);var d=["Cinema","Theatre","Gallery"],e=App.SubCategoryButton,f=0,g=d.length;for(this.boundingBox=new App.Rectangle(0,0,b,0),this._category=a,this._width=b,this._pixelRatio=c,this._header=new App.ListHeader("Sub-Categories",b,c),this._interactiveButton=null,this._subButtons=new Array(g),this._addNewButton=new App.AddNewButton("ADD SUB-CATEGORY",{font:Math.round(14*c)+"px HelveticaNeueCond",fill:"#cccccc"},b,Math.round(40*c),c);g>f;f++)this._subButtons[f]=new e(d[f],b,c);for(this._render(),this.addChild(this._header),f=0;g>f;)this.addChild(this._subButtons[f++]);this.addChild(this._addNewButton)},App.SubCategoryList.prototype=Object.create(PIXI.Graphics.prototype),App.SubCategoryList.prototype.constructor=App.SubCategoryList,App.SubCategoryList.prototype._render=function(){var a=this._subButtons[this._subButtons.length-1];
App.LayoutUtils.update(this._subButtons,App.Direction.Y,this._header.height),this._addNewButton.y=a.y+a.boundingBox.height,this.boundingBox.height=this._addNewButton.y+this._addNewButton.boundingBox.height},App.SubCategoryList.prototype.swipeStart=function(a){this._interactiveButton=this._getButtonUnderPosition(this.stage.getTouchData().getLocalPosition(this).y),this._interactiveButton&&this._interactiveButton.swipeStart(a),this.closeButtons(!1)},App.SubCategoryList.prototype.swipeEnd=function(){this._interactiveButton&&(this._interactiveButton.swipeEnd(),this._interactiveButton=null)},App.SubCategoryList.prototype.closeButtons=function(a){for(var b=0,c=this._subButtons.length,d=null;c>b;)d=this._subButtons[b++],d!==this._interactiveButton&&d.close(a)},App.SubCategoryList.prototype._getButtonUnderPosition=function(a){for(var b=0,c=this._subButtons.length,d=0,e=0,f=null;c>b;)if(f=this._subButtons[b++],e=f.y,d=f.boundingBox.height,a>=e&&e+d>=a)return f;return null},App.CategoryButtonSurface=function(a,b,c){PIXI.Graphics.call(this),this._colorStripe=new PIXI.Graphics,this._icon=PIXI.Sprite.fromFrame(a),this._nameLabel=new PIXI.Text(b,c),this.addChild(this._colorStripe),this.addChild(this._icon),this.addChild(this._nameLabel)},App.CategoryButtonSurface.prototype=Object.create(PIXI.Graphics.prototype),App.CategoryButtonSurface.prototype.constructor=App.CategoryButtonSurface,App.CategoryButtonSurface.prototype.render=function(a,b,c){var d=App.GraphicUtils,e=App.ColorTheme,f=Math.round(10*c);d.drawRects(this,e.BACKGROUND,1,[0,0,a,b],!0,!1),d.drawRects(this,e.LIGHT_SHADE,1,[f,0,a-2*f,1],!1,!1),d.drawRects(this,e.DARK_SHADE,1,[f,b-1,a-2*f,1],!1,!0),d.drawRect(this._colorStripe,16763904,1,0,0,Math.round(4*c),b),this._icon.width=Math.round(20*c),this._icon.height=Math.round(20*c),this._icon.x=Math.round(25*c),this._icon.y=Math.round((b-this._icon.height)/2),this._icon.tint=e.BLUE,this._nameLabel.x=Math.round(64*c),this._nameLabel.y=Math.round(18*c)},App.CategoryButtonEdit=function(a,b,c,d){App.SwipeButton.call(this,b.width,Math.round(80*b.pixelRatio)),this.boundingBox=new App.Rectangle(0,0,b.width,Math.round(50*b.pixelRatio)),this._model=a,this._layout=b,this._swipeSurface=new App.CategoryButtonSurface(a.icon,a.name,c),this._background=new PIXI.Graphics,this._editLabel=new PIXI.Text("Edit",d),this._render(),this.addChild(this._background),this.addChild(this._editLabel),this.addChild(this._swipeSurface)},App.CategoryButtonEdit.prototype=Object.create(App.SwipeButton.prototype),App.CategoryButtonEdit.prototype.constructor=App.CategoryButtonEdit,App.CategoryButtonEdit.prototype._render=function(){var a=this._layout.pixelRatio,b=this.boundingBox.width,c=this.boundingBox.height;this._swipeSurface.render(b,c,a),App.GraphicUtils.drawRect(this._background,App.ColorTheme.SWIPE_BACKGROUND,1,0,0,b,c),this._editLabel.x=Math.round(b-50*a),this._editLabel.y=Math.round(18*a)},App.CategoryButtonEdit.prototype._updateSwipePosition=function(a){this._swipeSurface.x=a},App.CategoryButtonEdit.prototype._getSwipePosition=function(){return this._swipeSurface.x},App.CategoryButtonExpand=function(a,b,c){PIXI.DisplayObjectContainer.call(this);var d=App.ModelLocator,e=App.ModelName,f=d.getProxy(e.EVENT_LISTENER_POOL);this.boundingBox=new App.Rectangle(0,0,b.width,Math.round(50*b.pixelRatio)),this._model=a,this._layout=b,this._eventsRegistered=!1,this._transitionState=App.TransitionState.CLOSED,this._buttonHeight=this.boundingBox.height,this._subCategoryListHeight=Math.round(150*b.pixelRatio),this._openCloseTween=new App.TweenProxy(.4,App.Easing.outExpo,0,f),this._eventDispatcher=new App.EventDispatcher(f),this._ticker=d.getProxy(e.TICKER),this._surface=new App.CategoryButtonSurface(a.icon,a.name,c),this._subCategoryList=new PIXI.Graphics,this._subCategoryList.visible=!1,this._render(),this.addChild(this._subCategoryList),this.addChild(this._surface)},App.CategoryButtonExpand.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.CategoryButtonExpand.prototype.constructor=App.CategoryButtonExpand,App.CategoryButtonExpand.prototype._render=function(){var a=this.boundingBox.width;this._surface.render(a,this.boundingBox.height,this._layout.pixelRatio),App.GraphicUtils.drawRect(this._subCategoryList,App.ColorTheme.LIGHT_SHADE,1,0,0,a,this._subCategoryListHeight),this._subCategoryList.y=this._buttonHeight},App.CategoryButtonExpand.prototype._registerEventListeners=function(){this._eventsRegistered||(this._eventsRegistered=!0,this._ticker.addEventListener(App.EventType.TICK,this,this._onTick),this._openCloseTween.addEventListener(App.EventType.COMPLETE,this,this._onTransitionComplete))},App.CategoryButtonExpand.prototype._unRegisterEventListeners=function(){this._openCloseTween.removeEventListener(App.EventType.COMPLETE,this,this._onTransitionComplete),this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),this._eventsRegistered=!1},App.CategoryButtonExpand.prototype._onTick=function(){this._openCloseTween.isRunning()&&this._updateTransition()},App.CategoryButtonExpand.prototype._updateTransition=function(){var a=App.TransitionState;this._transitionState===a.OPENING?this.boundingBox.height=Math.round(this._buttonHeight+this._subCategoryListHeight*this._openCloseTween.progress):this._transitionState===a.CLOSING&&(this.boundingBox.height=Math.round(this._buttonHeight+this._subCategoryListHeight*(1-this._openCloseTween.progress))),this._eventDispatcher.dispatchEvent(App.EventType.LAYOUT_UPDATE)},App.CategoryButtonExpand.prototype._onTransitionComplete=function(){var a=App.TransitionState;this._transitionState===a.OPENING?(this._transitionState=a.OPEN,this.boundingBox.height=this._buttonHeight+this._subCategoryListHeight):this._transitionState===a.CLOSING&&(this._transitionState=a.CLOSED,this.boundingBox.height=this._buttonHeight,this._subCategoryList.visible=!1),this._unRegisterEventListeners(),this._eventDispatcher.dispatchEvent(App.EventType.COMPLETE,this)},App.CategoryButtonExpand.prototype.onClick=function(){var a=App.TransitionState;this._transitionState===a.CLOSED||this._transitionState===a.CLOSING?this.open():(this._transitionState===a.OPEN||this._transitionState===a.OPENING)&&this.close()},App.CategoryButtonExpand.prototype.isOpen=function(){return this._transitionState!==App.TransitionState.CLOSED},App.CategoryButtonExpand.prototype.open=function(){var a=App.TransitionState;(this._transitionState===a.CLOSED||this._transitionState===a.CLOSING)&&(this._registerEventListeners(),this._subCategoryList.visible=!0,this._transitionState=a.OPENING,this._openCloseTween.restart())},App.CategoryButtonExpand.prototype.close=function(){var a=App.TransitionState;this._transitionState===a.OPEN||this._transitionState===a.OPENING?(this._registerEventListeners(),this._transitionState=a.CLOSING,this._openCloseTween.start(!0)):this._eventDispatcher.dispatchEvent(App.EventType.COMPLETE,this)},App.CategoryButtonExpand.prototype.addEventListener=function(a,b,c){this._eventDispatcher.addEventListener(a,b,c)},App.CategoryButtonExpand.prototype.removeEventListener=function(a,b,c){this._eventDispatcher.removeEventListener(a,b,c)},App.CategoryScreen=function(a,b){App.Screen.call(this,a,b,.4);var c=App.CategoryButtonExpand,d=Math.round(18*b.pixelRatio)+"px HelveticaNeueCond",e={font:d,fill:App.ColorTheme.sBLUE},f=0,g=this._model.length(),h=null;for(this._interactiveButton=null,this._buttons=new Array(g),this._buttonList=new App.TileList(App.Direction.Y,b.height);g>f;f++)h=new c(this._model.getItemAt(f),b,e),this._buttons[f]=h,this._buttonList.add(h);this._buttonList.updateLayout(),this._buttonsInTransition=[],this._layoutDirty=!1,this._pane=new App.TilePane(App.ScrollPolicy.OFF,App.ScrollPolicy.AUTO,b.width,b.height,b.pixelRatio),this._pane.setContent(this._buttonList),this.addChild(this._pane)},App.CategoryScreen.prototype=Object.create(App.Screen.prototype),App.CategoryScreen.prototype.constructor=App.CategoryScreen,App.CategoryScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._pane.resetScroll(),this._pane.enable()},App.CategoryScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._pane.disable()},App.CategoryScreen.prototype._onTick=function(){App.Screen.prototype._onTick.call(this),this._layoutDirty&&this._updateLayout()},App.CategoryScreen.prototype._onTweenComplete=function(){App.Screen.prototype._onTweenComplete.call(this),this._transitionState===App.TransitionState.HIDDEN&&this._closeButtons(!0)},App.CategoryScreen.prototype._swipeStart=function(a,b){a||this._pane.cancelScroll(),this._interactiveButton=this._getButtonUnderPoint(this.stage.getTouchPosition()),this._interactiveButton&&this._interactiveButton.swipeStart(b),this._closeButtons(!1)},App.CategoryScreen.prototype._swipeEnd=function(){this._interactiveButton&&(this._interactiveButton.swipeEnd(),this._interactiveButton=null)},App.CategoryScreen.prototype._closeButtons=function(a){for(var b=0,c=this._buttons.length,d=null,e=App.EventType;c>b;)d=this._buttons[b++],d!==this._interactiveButton&&d.isOpen()&&(-1===this._buttonsInTransition.indexOf(d)&&(this._buttonsInTransition.push(d),d.addEventListener(e.LAYOUT_UPDATE,this,this._onButtonLayoutUpdate),d.addEventListener(e.COMPLETE,this,this._onButtonTransitionComplete)),d.close(a))},App.CategoryScreen.prototype._onClick=function(){var a=this.stage.getTouchData().getLocalPosition(this),b=App.EventType;this._interactiveButton=this._getButtonUnderPoint(a),-1===this._buttonsInTransition.indexOf(this._interactiveButton)&&(this._buttonsInTransition.push(this._interactiveButton),this._interactiveButton.addEventListener(b.LAYOUT_UPDATE,this,this._onButtonLayoutUpdate),this._interactiveButton.addEventListener(b.COMPLETE,this,this._onButtonTransitionComplete)),this._interactiveButton.onClick(a),this._pane.cancelScroll()},App.CategoryScreen.prototype._onButtonLayoutUpdate=function(){this._layoutDirty=!0},App.CategoryScreen.prototype._onButtonTransitionComplete=function(a){var b=0,c=this._buttonsInTransition.length,d=App.EventType;for(a.removeEventListener(d.LAYOUT_UPDATE,this,this._onButtonLayoutUpdate),a.removeEventListener(d.COMPLETE,this,this._onButtonTransitionComplete);c>b;b++)if(a===this._buttonsInTransition[b]){this._buttonsInTransition.splice(b,1);break}0===this._buttonsInTransition.length&&(this._interactiveButton=null,this._layoutDirty=!1,this._updateLayout())},App.CategoryScreen.prototype._updateLayout=function(){this._buttonList.updateLayout(!0),this._pane.resize()},App.CategoryScreen.prototype._getButtonUnderPoint=function(a){for(var b=0,c=this._buttons.length,d=a.y,e=0,f=0,g=this.y+this._buttonList.y,h=null;c>b;)if(h=this._buttons[b++],f=h.y+g,e=h.boundingBox.height,d>=f&&f+e>=d)return h;return null},App.CategoryScreen.prototype.destroy=function(){App.Screen.prototype.destroy.call(this),this.disable(),this.removeChild(this._pane),this._pane.destroy(),this._pane=null,this._buttons.length=0,this._buttons=null},App.ColorSample=function(a,b,c){PIXI.Graphics.call(this),this.boundingBox=new App.Rectangle(0,0,Math.round(40*c),Math.round(50*c)),this._modelIndex=a,this._pixelRatio=c,this._color=b,this._label=new PIXI.Text(a,{font:Math.round(18*c)+"px HelveticaNeueCond",fill:"#000000"}),this._selected=!1,this._render(),this.addChild(this._label)},App.ColorSample.prototype=Object.create(PIXI.Graphics.prototype),App.ColorSample.prototype.constructor=App.ColorSample,App.ColorSample.prototype._render=function(){var a=Math.round((this._selected?0:5)*this._pixelRatio),b=Math.round((this._selected?5:10)*this._pixelRatio),c=this.boundingBox.width,d=this.boundingBox.height;this.clear(),this.beginFill("0x"+this._color),this.drawRoundedRect(a,b,c-2*a,d-2*b,Math.round(5*this._pixelRatio)),this.endFill(),this._label.setText(this._modelIndex),this._label.x=Math.round((c-this._label.width)/2),this._label.y=Math.round((d-this._label.height)/2)},App.ColorSample.prototype.setModel=function(a,b,c){this._modelIndex=a,this._color=b,this._selected=c===this._modelIndex,this._render()},App.ColorSample.prototype.getModelIndex=function(){return this._modelIndex},App.ColorSample.prototype.select=function(a){var b=this._modelIndex===a;this._selected!==b&&(this._selected=b,this._render())},App.IconSample=function(a,b,c){PIXI.DisplayObjectContainer.call(this);var d=Math.round(64*c);this.boundingBox=new App.Rectangle(0,0,d,d),this._modelIndex=a,this._model=b,this._pixelRatio=c,this._icon=PIXI.Sprite.fromFrame(b),this._iconResizeRatio=Math.round(32*c)/this._icon.height,this._selected=!1,this._render(),this.addChild(this._icon)},App.IconSample.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.IconSample.prototype.constructor=App.IconSample,App.IconSample.prototype._render=function(){var a=App.ColorTheme,b=this.boundingBox.width;this._icon.scale.x=this._iconResizeRatio,this._icon.scale.y=this._iconResizeRatio,this._icon.x=Math.round((b-this._icon.width)/2),this._icon.y=Math.round((b-this._icon.height)/2),this._icon.tint=this._selected?a.BLUE:a.DARK_SHADE},App.IconSample.prototype.setModel=function(a,b,c){this._modelIndex=a,this._model=b,this._icon.setTexture(PIXI.TextureCache[b]),this._selected=c===this._modelIndex,this._render()},App.IconSample.prototype.getModelIndex=function(){return this._modelIndex},App.IconSample.prototype.select=function(a){var b=this._modelIndex===a;this._selected!==b&&(this._selected=b,this._render())},App.EditCategoryScreen=function(a,b){App.Screen.call(this,a,b,.4);var c=App.ScrollPolicy,d=App.InfiniteList,e=App.Direction,f=App.IconSample,g=App.Input,h=b.pixelRatio,i=b.width,j=App.ModelLocator.getProxy(App.ModelName.ICONS),k=Math.round(64*h);this._pane=new App.Pane(c.OFF,c.AUTO,i,b.height,h),this._container=new PIXI.DisplayObjectContainer,this._background=new PIXI.Graphics,this._colorStripe=new PIXI.Graphics,this._icon=PIXI.Sprite.fromFrame("currencies"),this._input=new g("Enter Category Name",20,i-Math.round(70*h),Math.round(40*h),h,!0),this._separators=new PIXI.Graphics,this._colorList=new d(this._getColorSamples(),App.ColorSample,e.X,i,Math.round(50*h),h),this._topIconList=new d(j.slice(0,Math.floor(j.length/2)),f,e.X,i,k,h),this._bottomIconList=new d(j.slice(Math.floor(j.length/2)),f,e.X,i,k,h),this._subCategoryList=new App.SubCategoryList(null,i,h),this._budgetHeader=new App.ListHeader("Budget",i,h),this._budget=new g("Enter Budget",20,i-Math.round(20*h),Math.round(40*h),h,!0),this._scrollTween=new App.TweenProxy(.5,App.Easing.outExpo,0,App.ModelLocator.getProxy(App.ModelName.EVENT_LISTENER_POOL)),this._scrollState=App.TransitionState.HIDDEN,this._budget.restrict(/\D/),this._render(),this._container.addChild(this._background),this._container.addChild(this._colorStripe),this._container.addChild(this._icon),this._container.addChild(this._input),this._container.addChild(this._separators),this._container.addChild(this._colorList),this._container.addChild(this._topIconList),this._container.addChild(this._bottomIconList),this._container.addChild(this._subCategoryList),this._container.addChild(this._budgetHeader),this._container.addChild(this._budget),this._pane.setContent(this._container),this.addChild(this._pane),this._swipeEnabled=!0},App.EditCategoryScreen.prototype=Object.create(App.Screen.prototype),App.EditCategoryScreen.prototype.constructor=App.EditCategoryScreen,App.EditCategoryScreen.prototype._render=function(){var a=App.GraphicUtils,b=App.ColorTheme,c=this._layout.pixelRatio,d=this._layout.width,e=Math.round(60*c),f=this._colorList.boundingBox.height,g=Math.round(32*c)/this._icon.height,h=Math.round(10*c),i=d-2*h;a.drawRect(this._colorStripe,16737792,1,0,0,Math.round(4*c),Math.round(59*c)),this._icon.scale.x=g,this._icon.scale.y=g,this._icon.x=Math.round(15*c),this._icon.y=Math.round((e-this._icon.height)/2),this._icon.tint=b.BLUE,this._input.x=Math.round(60*c),this._input.y=Math.round((e-this._input.height)/2),this._colorList.y=e,this._topIconList.y=e+this._colorList.boundingBox.height,this._bottomIconList.y=this._topIconList.y+this._topIconList.boundingBox.height,a.drawRects(this._separators,b.DARK_SHADE,1,[0,0,i,1,0,f,i,1],!0,!1),a.drawRects(this._separators,b.LIGHT_SHADE,1,[0,1,i,1,0,f+1,i,1],!1,!0),this._separators.x=h,this._separators.y=e-1,this._subCategoryList.y=this._bottomIconList.y+this._bottomIconList.boundingBox.height,this._budgetHeader.y=this._subCategoryList.y+this._subCategoryList.boundingBox.height,this._budget.x=h,this._budget.y=this._budgetHeader.y+this._budgetHeader.height+Math.round(10*c),a.drawRect(this._background,b.BACKGROUND,1,0,0,d,this._budget.y+this._budget.boundingBox.height+h)},App.EditCategoryScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._input.enable(),this._colorList.enable(),this._topIconList.enable(),this._bottomIconList.enable(),this._pane.enable()},App.EditCategoryScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._input.disable(),this._colorList.disable(),this._topIconList.disable(),this._bottomIconList.disable(),this._budget.disable(),this._pane.disable()},App.EditCategoryScreen.prototype._registerEventListeners=function(){App.Screen.prototype._registerEventListeners.call(this);var a=App.EventType;this._scrollTween.addEventListener(a.COMPLETE,this,this._onScrollTweenComplete),this._budget.addEventListener(a.BLUR,this,this._onBudgetBlur)},App.EditCategoryScreen.prototype._unRegisterEventListeners=function(){App.Screen.prototype._unRegisterEventListeners.call(this);var a=App.EventType;this._scrollTween.removeEventListener(a.COMPLETE,this,this._onScrollTweenComplete),this._budget.removeEventListener(a.BLUR,this,this._onBudgetBlur)},App.EditCategoryScreen.prototype._onClick=function(){this._pane.cancelScroll();var a=this.stage.getTouchData().getLocalPosition(this._container),b=a.y,c=null;b>=this._colorList.y&&b<this._colorList.y+this._colorList.boundingBox.height?(c=this._colorList,c.selectItemByPosition(a.x)):b>=this._topIconList.y&&b<this._topIconList.y+this._topIconList.boundingBox.height?(c=this._topIconList,c.selectItemByPosition(a.x),this._bottomIconList.selectItemByPosition(-1e3)):b>=this._bottomIconList.y&&b<this._bottomIconList.y+this._bottomIconList.boundingBox.height?(c=this._bottomIconList,c.selectItemByPosition(a.x),this._topIconList.selectItemByPosition(-1e3)):b>=this._budget.y&&b<this._budget.y+this._budget.boundingBox.height&&this._focusBudget()},App.EditCategoryScreen.prototype._onTick=function(){App.Screen.prototype._onTick.call(this),this._scrollTween.isRunning()&&this._onScrollTweenUpdate()},App.EditCategoryScreen.prototype._onScrollTweenUpdate=function(){var a=App.TransitionState;this._scrollState===a.SHOWING?this._pane.y=-Math.round((this._budgetHeader.y+this._container.y)*this._scrollTween.progress):this._scrollState===a.HIDING&&(this._pane.y=-Math.round((this._budgetHeader.y+this._container.y)*(1-this._scrollTween.progress)))},App.EditCategoryScreen.prototype._onScrollTweenComplete=function(){var a=App.TransitionState;this._onScrollTweenUpdate(),this._scrollState===a.SHOWING?(this._scrollState=a.SHOWN,this._subCategoryList.closeButtons(!0),this._budget.enable(),this._budget.focus()):this._scrollState===a.HIDING&&(this._scrollState=a.HIDDEN,this._pane.enable())},App.EditCategoryScreen.prototype._focusBudget=function(){var a=App.TransitionState;(this._scrollState===a.HIDDEN||this._scrollState===a.HIDING)&&(this._scrollState=a.SHOWING,this._pane.disable(),this._scrollTween.start())},App.EditCategoryScreen.prototype._onBudgetBlur=function(){var a=App.TransitionState;(this._scrollState===a.SHOWN||this._scrollState===a.SHOWING)&&(this._scrollState=a.HIDING,this._budget.disable(),this._scrollTween.restart())},App.EditCategoryScreen.prototype._swipeStart=function(a,b){a||this._pane.cancelScroll(),this._subCategoryList.swipeStart(b)},App.EditCategoryScreen.prototype._swipeEnd=function(){this._subCategoryList.swipeEnd()},App.EditCategoryScreen.prototype._getColorSamples=function(){for(var a=App.MathUtils,b=0,c=30,d=2*Math.PI/c,e=127,f=128,g=new Array(c);c>b;b++)g[b]=a.rgbToHex(Math.round(Math.sin(d*b+0)*e+f),Math.round(Math.sin(d*b+2)*e+f),Math.round(Math.sin(d*b+4)*e+f));return g},App.ApplicationView=function(a,b,c,d,e){PIXI.DisplayObjectContainer.call(this);var f=App.ModelLocator,g=App.ModelName,h=f.getProxy(g.ACCOUNTS).getItemAt(0).getCategories();this._renderer=b,this._stage=a,this._layout={originalWidth:c,originalHeight:d,width:Math.round(c*e),height:Math.round(d*e),headerHeight:Math.round(50*e),bodyHeight:Math.round(d-50-e),pixelRatio:e},this._background=new PIXI.Graphics,App.GraphicUtils.drawRect(this._background,12245589,1,0,0,this._layout.width,this._layout.height),this._screenStack=new App.ViewStack([new App.AccountScreen(h,this._layout),new App.CategoryScreen(h,this._layout),new App.SelectTimeScreen(null,this._layout),new App.EditCategoryScreen(null,this._layout)]),this._screenStack.selectChildByIndex(App.ScreenName.EDIT_CATEGORY),this._screenStack.show(),this.addChild(this._background),this.addChild(this._screenStack),this._registerEventListeners()},App.ApplicationView.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.ApplicationView.prototype.constructor=App.ApplicationView,App.ApplicationView.prototype._registerEventListeners=function(){App.ModelLocator.getProxy(App.ModelName.TICKER).addEventListener(App.EventType.TICK,this,this._onTick)},App.ApplicationView.prototype.changeScreen=function(a){this._screenStack.selectChildByIndex(a),this._screenStack.show(),this._screenStack.hide()},App.ApplicationView.prototype._onTick=function(){this._renderer.render(this._stage)},App.ApplicationView.prototype._onResize=function(){},App.Easing={linear:function(a){return a},inQuad:function(a){return a*a},outQuad:function(a){return-(a-=1)*a+1},inOutQuad:function(a){return(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1)},inCubic:function(a){return a*a*a},outCubic:function(a){return--a*a*a+1},inOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},inExpo:function(a){return 0===a?0:Math.pow(2,10*(a-1))},outExpo:function(a){return 1===a?1:1-Math.pow(2,-10*a)},inOutExpo:function(a){return 0===a?0:1===a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},inElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1===a?1:(c||(c=.3),b=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c)))},outElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1===a?1:(c||(c=.3),b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/c)+1)},inOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:2===(a/=.5)?1:(c||(c=.3*1.5),b=c/(2*Math.PI)*Math.asin(1/d),1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c):d*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c)*.5+1)}},App.TweenProxy=function(a,b,c,d){App.EventDispatcher.call(this,d),this.progress=c||0,this._interval=-1,this._running=!1,this._reversed=!1,this._start=-1,this._end=-1,this._reversedEnd=-1,this._now=-1,this._duration=1e3*a||1e3,this._ease=b||App.Easing.linear,this._timeStamp=window.performance&&window.performance.now?window.performance:Date,this._intervalReference=this._tweenInterval.bind(this)},App.TweenProxy.prototype=Object.create(App.EventDispatcher.prototype),App.TweenProxy.prototype.constructor=App.TweenProxy,App.TweenProxy.prototype.setEase=function(a){this._ease=a},App.TweenProxy.prototype.start=function(a,b){b&&this.setEase(b),this._running?a&&(this._reversed?this._reversed=!1:(this._reversed=!0,this._reversedEnd=this._start+2*(this._now-this._start))):(this._running=!0,this._reversed=!1,this._tween())},App.TweenProxy.prototype.stop=function(){this._running=!1,clearInterval(this._interval),this._interval=-1},App.TweenProxy.prototype.restart=function(){this._running&&this.stop(),this.start()},App.TweenProxy.prototype.isRunning=function(){return this._running},App.TweenProxy.prototype._tween=function(){this._interval>0&&(clearInterval(this._interval),this._interval=-1),this.progress=0,this._start=this._timeStamp.now(),this._end=this._start+this._duration,this._interval=setInterval(this._intervalReference,1e3/120)},App.TweenProxy.prototype._tweenInterval=function(){this._now=this._timeStamp.now();var a=this._reversed?this._reversedEnd:this._end,b=(this._duration-(a-this._now))/this._duration;0>b?b=0:b>1&&(b=1),this.progress=this._ease(b),this._now>=a&&(this.progress=1,this.stop(),this.dispatchEvent(App.EventType.COMPLETE))},App.TweenProxy.prototype.destroy=function(){App.EventDispatcher.prototype.destroy.call(this),this.stop(),this._intervalReference=null,this._timeStamp=null,this._ease=null},App.Ticker=function(a){App.EventDispatcher.call(this,a),this._rafListener=this._raf.bind(this),this._isRunning=!1},App.Ticker.prototype=Object.create(App.EventDispatcher.prototype),App.Ticker.prototype.constructor=App.Ticker,App.Ticker.prototype.addEventListener=function(a,b,c){App.EventDispatcher.prototype.addEventListener.call(this,a,b,c),this._isRunning||(this._isRunning=!0,window.requestAnimationFrame(this._rafListener))},App.Ticker.prototype.removeEventListener=function(a,b,c){App.EventDispatcher.prototype.removeEventListener.call(this,a,b,c),0===this._listeners.length&&(this._isRunning=!1)},App.Ticker.prototype.removeAllListeners=function(){App.EventDispatcher.prototype.removeAllListeners.call(this),this._isRunning=!1},App.Ticker.prototype._raf=function(){this._isRunning&&(window.requestAnimationFrame(this._rafListener),this.dispatchEvent(App.EventType.TICK))},App.Controller={_eventListenerPool:null,_eventCommandMap:{},_commands:[],init:function(a,b){this._eventListenerPool=a;for(var c=0,d=b.length,e=null;d>c;)e=b[c++],this._eventCommandMap[e.eventType]={constructor:e.command};e=null,b=null},_onCommandComplete:function(a){this._destroyCommand(a)},_destroyCommand:function(a){for(var b=0,c=this._commands.length,d=null;c>b;)if(d=this._commands[b++],d===a){d.removeEventListener(App.EventType.COMPLETE,this,this._onCommandComplete),d.destroy(),this._commands.splice(b,1);break}},dispatchEvent:function(a,b,c){var d=this._eventCommandMap[a].constructor;if(d){var e=null;if(c)for(var f=0,g=this._commands.length;g>f;)e=this._commands[f++],e instanceof d&&!e.allowMultipleInstances&&this._destroyCommand(e);e=new d(this._eventListenerPool),this._commands.push(e),e.addEventListener(App.EventType.COMPLETE,this,this._onCommandComplete),e.execute(b)}}},App.Command=function(a,b){App.EventDispatcher.call(this,b),this.allowMultipleInstances=a},App.Command.prototype=Object.create(App.EventDispatcher.prototype),App.Command.prototype.constructor=App.Command,App.Command.prototype.execute=function(){},App.Command.prototype.destroy=function(){App.EventDispatcher.prototype.destroy.call(this)},App.LoadData=function(a){App.Command.call(this,!1,a),this._jsonLoader=null,this._fontLoadingInterval=-1,this._fontInfoElement=null,this._icons=null},App.LoadData.prototype=Object.create(App.Command.prototype),App.LoadData.prototype.constructor=App.LoadData,App.LoadData.prototype.execute=function(){this._loadAssets()},App.LoadData.prototype._loadAssets=function(){this._jsonLoader=new PIXI.JsonLoader("./data/icons-big.json"),this._jsonLoader.on("loaded",function(){this._icons=this._jsonLoader.json.frames,this._jsonLoader.removeAllListeners("loaded"),this._jsonLoader=null,this._loadFont()}.bind(this)),this._jsonLoader.load()},App.LoadData.prototype._loadFont=function(){this._fontInfoElement=document.getElementById("fontInfo");var a=this._fontInfoElement.offsetWidth;this._fontLoadingInterval=setInterval(function(){this._fontInfoElement.offsetWidth!==a&&(clearInterval(this._fontLoadingInterval),this._loadData())}.bind(this),100),this._fontInfoElement.style.fontFamily="HelveticaNeueCond"},App.LoadData.prototype._loadData=function(){var a=new XMLHttpRequest;a.open("GET","./data/accounts.json",!0),a.onload=function(){a.status>=200&&a.status<400?this.dispatchEvent(App.EventType.COMPLETE,{accounts:a.responseText,icons:this._icons}):console.log("error")}.bind(this),a.onerror=function(){console.log("on error"),this.dispatchEvent(App.EventType.COMPLETE)},a.send()},App.LoadData.prototype.destroy=function(){App.Command.prototype.destroy.call(this),this._jsonLoader=null,clearInterval(this._fontLoadingInterval),this._fontInfoElement=null},App.Initialize=function(){this._eventListenerPool=new App.ObjectPool(App.EventListener,10),App.Command.call(this,!1,this._eventListenerPool),this._loadDataCommand=new App.LoadData(this._eventListenerPool)},App.Initialize.prototype=Object.create(App.Command.prototype),App.Initialize.prototype.constructor=App.Initialize,App.Initialize.prototype.execute=function(){this._loadDataCommand.addEventListener(App.EventType.COMPLETE,this,this._onLoadDataComplete),this._loadDataCommand.execute()},App.Initialize.prototype._onLoadDataComplete=function(a){this._loadDataCommand.destroy(),this._loadDataCommand=null,this._initModel(a),this._initCommands(),this._initView(),this.dispatchEvent(App.EventType.COMPLETE)},App.Initialize.prototype._initModel=function(a){var b=App.ModelLocator,c=App.ModelName,d=App.Collection;b.addProxy(c.EVENT_LISTENER_POOL,this._eventListenerPool),b.addProxy(c.TICKER,new App.Ticker(this._eventListenerPool)),b.addProxy(c.ICONS,Object.keys(a.icons).filter(function(a){return-1===a.indexOf("-app")})),b.addProxy(c.ACCOUNTS,new d(JSON.parse(a.accounts).accounts,App.Account,null,this._eventListenerPool)),App.Settings.setStartOfWeek(1)},App.Initialize.prototype._initCommands=function(){App.Controller.init(this._eventListenerPool,[{eventType:App.EventType.CHANGE_SCREEN,command:App.ChangeScreen}])},App.Initialize.prototype._initView=function(){var a=document.getElementsByTagName("canvas")[0],b=a.getContext("2d"),c=window.devicePixelRatio||1,d=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1,e=c/d,f=window.innerWidth,g=window.innerHeight,h=new PIXI.Stage(16777215),i=new PIXI.CanvasRenderer(f,g,{view:a,resolution:1,transparent:!1,autoResize:!1,clearBeforeRender:!1});e>1&&(e>2&&(e=2),a.style.width=f+"px",a.style.height=g+"px",a.width=a.width*e,a.height=a.height*e,b.scale(e,e),h.interactionManager.setPixelRatio(e)),PIXI.CanvasTinter.tintMethod=PIXI.CanvasTinter.tintWithOverlay,App.ViewLocator.addViewSegment(App.ViewName.APPLICATION_VIEW,h.addChild(new App.ApplicationView(h,i,f,g,e))),i.render(h)},App.Initialize.prototype.destroy=function(){App.Command.prototype.destroy.call(this),this._loadDataCommand&&(this._loadDataCommand.destroy(),this._loadDataCommand=null),this._eventListenerPool=null},App.ChangeScreen=function(a){App.Command.call(this,!1,a)},App.ChangeScreen.prototype=Object.create(App.Command.prototype),App.ChangeScreen.prototype.constructor=App.ChangeScreen,App.ChangeScreen.prototype.execute=function(a){App.ViewLocator.getViewSegment(App.ViewName.APPLICATION_VIEW).changeScreen(a),this.dispatchEvent(App.EventType.COMPLETE,this)},App.ChangeScreen.prototype.destroy=function(){App.Command.prototype.destroy.call(this)},function(){function a(){b.destroy(),b=null}var b=new App.Initialize;b.addEventListener(App.EventType.COMPLETE,this,a),b.execute()}();