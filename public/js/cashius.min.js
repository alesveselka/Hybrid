"use strict";Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},o=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),"function"!=typeof Object.create&&!function(){var t=function(){};Object.create=function(e){if(arguments.length>1)throw Error("Second argument not supported");if(null===e)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof e)throw TypeError("Argument must be an object");return t.prototype=e,new t}}(),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(function(){t()},1e3/60)});var App=App||{};App.DateUtils={_daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],_monthLabels:["January","February","March","April","May","June","July","August","September","October","November","December"],_dayLabels:["S","M","T","W","T","F","S"],getMonthLabel:function(t){return this._monthLabels[t]},getDayLabels:function(t){for(var e=t;e;)this._dayLabels.push(this._dayLabels.shift()),e--;return this._dayLabels},getMonth:function(t,e){var i=t.getFullYear(),n=t.getMonth(),o=n?n-1:11,s=this.getDaysInMonth(i,n),p=this.getDaysInMonth(i,o),r=new Date(i,n,1).getDay(),h=r>=e?r-e:7+r-e,a=8-h,l=[],c=null,d=0,_=42,u=0,A=0;for(1!==a&&(a=p+1-h,d=1);_>u;u++)a>p&&1===d&&(a=1,d=0),a>s&&0===d&&(a=1,d=1),u%7===0&&(c=new Array(14),l[l.length]=c,A=0),c[A++]=a++,c[A++]=d;return l},getDaysInMonth:function(t,e){return 1!==e||t%400!==0&&t%4!==0?this._daysInMonth[e]:29},getMilitaryTime:function(t){var e=App.StringUtils.pad;return e(t.getHours())+":"+e(t.getMinutes())}},App.MathUtils={rgbToHex:function(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},hexToRgb:function(t,e){var i=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(i,function(t,e,i,n){return e+e+i+i+n+n});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?e?(e.r=parseInt(n[1],16),e.g=parseInt(n[2],16),e.b=parseInt(n[3],16),e):{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null},rgbToHsl:function(t,e,i,n){t/=255,e/=255,i/=255;var o,s,p=Math.max(t,e,i),r=Math.min(t,e,i),h=(p+r)/2;if(p==r)o=s=0;else{var a=p-r;switch(s=h>.5?a/(2-p-r):a/(p+r),p){case t:o=(e-i)/a+(i>e?6:0);break;case e:o=(i-t)/a+2;break;case i:o=(t-e)/a+4}o/=6}return n?(n.h=o,n.s=s,n.l=h,n):{h:o,s:s,l:h}},hslToRgb:function(t,e,i,n){var o=i,s=i,p=i;if(0!==e){var r=.5>i?i*(1+e):i+e-i*e,h=2*i-r;o=this._hueToRgb(h,r,t+1/3),s=this._hueToRgb(h,r,t),p=this._hueToRgb(h,r,t-1/3)}return n?(n.r=255*o,n.g=255*s,n.b=255*p,n):{r:255*o,g:255*s,b:255*p}},rgbToHsv:function(t,e,i,n){t/=255,e/=255,i/=255;var o=Math.max(t,e,i),s=Math.min(t,e,i),p=o-s,r=0===o?0:p/o,h=0;if(o!==s){switch(o){case t:h=(e-i)/p+(i>e?6:0);break;case e:h=(i-t)/p+2;break;case i:h=(t-e)/p+4}h/=6}return n?(n.h=h,n.s=r,n.v=o,n):{h:h,s:r,v:o}},hsvToRgb:function(t,e,i,n){var o=Math.floor(6*t),s=6*t-o,p=i*(1-e),r=i*(1-s*e),h=i*(1-(1-s)*e),a=0,l=0,c=0;switch(o%6){case 0:a=i,l=h,c=p;break;case 1:a=r,l=i,c=p;break;case 2:a=p,l=i,c=h;break;case 3:a=p,l=r,c=i;break;case 4:a=h,l=p,c=i;break;case 5:a=i,l=p,c=r}return n?(n.r=255*a,n.g=255*l,n.b=255*c,n):{r:255*a,g:255*l,b:255*c}},_hueToRgb:function(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+(e-t)*(2/3-i)*6:t}},App.Device={TOUCH_SUPPORTED:"ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0},App.EventType={CHANGE_SCREEN:"CHANGE_SCREEN",CHANGE_TRANSACTION:"CHANGE_TRANSACTION",CHANGE_ACCOUNT:"CHANGE_ACCOUNT",CHANGE_CATEGORY:"CHANGE_CATEGORY",CHANGE_SUB_CATEGORY:"CHANGE_SUB_CATEGORY",CHANGE_CURRENCY_PAIR:"CHANGE_CURRENCY_PAIR",CREATE:"CREATE",CANCEL:"CANCEL",CONFIRM:"CONFIRM",COPY:"COPY",DELETE:"DELETE",START:"START",COMPLETE:"COMPLETE",UPDATE:"UPDATE",PROGRESS:"PROGRESS",ERROR:"ERROR",CHANGE:"change",LAYOUT_UPDATE:"LAYOUT_UPDATE",TICK:"TICK",ADDED:"ADDED",REMOVED:"REMOVED",RESIZE:"resize",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",CLICK:"click",FOCUS:"focus",BLUR:"blur",KEY_PRESS:"keypress",PASTE:"paste",TEXT_INPUT:"textInput",INPUT:"input"},App.InteractiveState={OVER:"OVER",OUT:"OUT",DRAGGING:"DRAGGING",SCROLLING:"SCROLLING",SNAPPING:"SNAPPING",SWIPING:"SWIPING"},App.ViewName={APPLICATION_VIEW:0,HEADER:1,SCREEN_STACK:2,ACCOUNT_BUTTON_POOL:3,CATEGORY_BUTTON_EXPAND_POOL:4,CATEGORY_BUTTON_EDIT_POOL:5,SUB_CATEGORY_BUTTON_POOL:6,TRANSACTION_BUTTON_POOL:7,SKIN:8},App.GraphicUtils={drawRect:function(t,e,i,n,o,s,p){t.clear(),t.beginFill(e,i),t.drawRect(n,o,s,p),t.endFill()},drawRects:function(t,e,i,n,o,s){o&&t.clear(),t.beginFill(e,i);for(var p=0,r=n.length;r>p;)t.drawRect(n[p++],n[p++],n[p++],n[p++]);s&&t.endFill()},drawRoundedRect:function(t,e,i,n,o,s,p,r){t.clear(),t.beginFill(e,i),t.drawRoundedRect(n,o,s,p,r),t.endFill()},drawArc:function(t,e,i,n,o,s,p,r,h,a,l,c,d){s-=90,p-=90;var _=s,u=(p-s)/r,A=Math.PI/180,y=_*A,g=i/2,C=n/2,E=e.x,S=e.y,m=0;for(t.clear(),t.lineStyle(l,h,a),t.beginFill(c,d),t.moveTo(E+Math.cos(y)*g,S+Math.sin(y)*C);r>m;)_=s+u*m++,y=_*A,t.lineTo(E+Math.cos(y)*g,S+Math.sin(y)*C);for(y=p*A,t.lineTo(E+Math.cos(y)*g,S+Math.sin(y)*C),m=r;m>=0;)_=s+u*m--,y=_*A,t.lineTo(E+Math.cos(y)*(g-o),S+Math.sin(y)*(C-o));t.endFill()}},App.ModelName={TICKER:0,EVENT_LISTENER_POOL:1,PAYMENT_METHODS:2,CURRENCY_PAIRS:3,CURRENCY_SYMBOLS:4,SUB_CATEGORIES:5,CATEGORIES:6,ACCOUNTS:7,TRANSACTIONS:8,SETTINGS:9,ICONS:10,CHANGE_SCREEN_DATA_POOL:11,SCREEN_HISTORY:12},App.LayoutUtils={update:function(t,e,i){var n=0,o=t.length,s=null,p=i||0,r=App.Direction;if(e===r.X)for(;o>n;)s=t[n++],s.x=p,p=Math.round(p+s.boundingBox.width);else if(e===r.Y)for(;o>n;)s=t[n++],s.y=p,p=Math.round(p+s.boundingBox.height)}},App.ScreenName={BACK:-1,ACCOUNT:0,CATEGORY:1,SELECT_TIME:2,EDIT_CATEGORY:3,TRANSACTIONS:4,REPORT:5,ADD_TRANSACTION:6,EDIT:7,CURRENCY_PAIRS:8,EDIT_CURRENCY_RATE:9,CURRENCIES:10,SETTINGS:11,MENU:12},App.TransitionState={SHOWING:"SHOWING",SHOWN:"SHOWN",HIDING:"HIDING",HIDDEN:"HIDDEN",OPEN:"OPEN",OPENING:"OPENING",CLOSED:"CLOSED",CLOSING:"CLOSING"},App.StringUtils={encode:function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16)})},pad:function(t){return 10>t?"0"+t:t}},App.HeaderAction={NONE:-1,MENU:1,CANCEL:2,CONFIRM:3,ADD_TRANSACTION:4},App.TransactionType={EXPENSE:1,INCOME:2,toString:function(t){return t===App.TransactionType.INCOME?"Income":"Expense"}},App.ScreenTitle={MENU:"Menu",ACCOUNTS:"Accounts",EDIT_ACCOUNT:"Edit Account",ADD_ACCOUNT:"Add Account",SELECT_ACCOUNT:"Select Account",CATEGORIES:"Categories",SELECT_CATEGORY:"Select Category",ADD_CATEGORY:"Add Category",EDIT_CATEGORY:"Edit Category",EDIT_SUB_CATEGORY:"Edit SubCategory",ADD_SUB_CATEGORY:"Add SubCategory",SELECT_TIME:"Select Time & Date",TRANSACTIONS:"Transactions",ADD_TRANSACTION:"Add Transaction",EDIT_TRANSACTION:"Edit Transaction",REPORT:"Report",CURRENCY_RATES:"Currency Rates",SELECT_CURRENCY:"Select Currency",EDIT_CURRENCY_RATE:"Edit Currency Rate",SETTINGS:"Settings"},App.EventLevel={NONE:0,LEVEL_1:1,LEVEL_2:2},App.EventDispatcher=function(t){this._listeners=[],this._listenersPool=t},App.EventDispatcher.prototype.addEventListener=function(t,e,i){if(!this.hasEventListener(t,e,i)){var n=this._listenersPool.allocate();n.type=t,n.scope=e,n.handler=i,this._listeners[this._listeners.length]=n}},App.EventDispatcher.prototype.hasEventListener=function(t,e,i){for(var n=0,o=this._listeners.length,s=null;o>n;)if(s=this._listeners[n++],s.type===t&&s.scope===e&&s.handler===i)return s=null,!0;return s=null,!1},App.EventDispatcher.prototype.removeEventListener=function(t,e,i){for(var n=0,o=this._listeners.length,s=null;o>n;n++)if(s=this._listeners[n],s.type===t&&s.scope===e&&s.handler===i){this._listenersPool.release(s),s.reset(),this._listeners.splice(n,1);break}s=null},App.EventDispatcher.prototype.removeAllListeners=function(){for(var t=0,e=this._listeners.length,i=null;e>t;t++)i=this._listeners[t],this._listenersPool.release(i),i.reset(),this._listeners.splice(t,1);i=null,this._listeners.length=0},App.EventDispatcher.prototype.dispatchEvent=function(t,e){for(var i=0,n=this._listeners.length,o=null;n>i;)o=this._listeners[i++],o&&o.type===t&&o.handler.call(o.scope,e,t);o=null},App.EventDispatcher.prototype.pipe=function(t,e){t.addEventListener(e,this,this._pipeListener)},App.EventDispatcher.prototype.unPipe=function(t,e){t.removeEventListener(e,this,this._pipeListener)},App.EventDispatcher.prototype._pipeListener=function(t,e){this.dispatchEvent(e,t)},App.EventDispatcher.prototype.destroy=function(){this.removeAllListeners(),this._listeners.length=0,this._listeners=null,this._listenersPool=null},App.EventListener=function(t){this.allocated=!1,this.poolIndex=t,this.type=null,this.scope=null,this.handler=null},App.EventListener.prototype.reset=function(){this.allocated=!1,this.type=null,this.scope=null,this.handler=null},App.Rectangle=function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},App.ChangeScreenData=function(t){this.allocated=!1,this.poolIndex=t,this.screenName=App.ScreenName.ADD_TRANSACTION,this.screenMode=App.ScreenMode.ADD,this.updateData=null,this.headerLeftAction=App.HeaderAction.CANCEL,this.headerRightAction=App.HeaderAction.CONFIRM,this.headerName=App.ScreenTitle.ADD_TRANSACTION,this.backSteps=1,this.updateBackScreen=!1},App.ChangeScreenData.prototype.update=function(t,e,i,n,o,s,p,r){return this.screenName=isNaN(t)?App.ScreenName.ADD_TRANSACTION:t,this.screenMode=e||App.ScreenMode.ADD,this.updateData=i,this.headerLeftAction=n||App.HeaderAction.CANCEL,this.headerRightAction=o||App.HeaderAction.CONFIRM,this.headerName=s||App.ScreenTitle.ADD_TRANSACTION,this.backSteps=p||1,this.updateBackScreen=r,this},App.Direction={X:"x",Y:"y",LEFT:"LEFT",RIGHT:"RIGHT"},App.ObjectPool=function(t,e,i){this._objectClass=t,this._size=e,this._constructorData=i,this._items=[],this._freeItems=[]},App.ObjectPool.prototype.preAllocate=function(){var t=this._items.length,e=t+this._size,i=t;for(this._items.length=e;e>i;i++)this._items[i]=new this._objectClass(i,this._constructorData),this._freeItems.push(i)},App.ObjectPool.prototype.allocate=function(){0===this._freeItems.length&&this.preAllocate();var t=this._freeItems.shift(),e=this._items[t];return e.allocated=!0,e},App.ObjectPool.prototype.release=function(t){t.allocated=!1,this._freeItems.push(t.poolIndex)},App.Collection=function(t,e,i,n){if(App.EventDispatcher.call(this,n),t){var o=0,s=t.length;for(this._items=new Array(s);s>o;o++)this._items[o]=new e(t[o],this,i,n)}this._items||(this._items=[]),this._currentItem=null,this._currentIndex=-1},App.Collection.prototype=Object.create(App.EventDispatcher.prototype),App.Collection.prototype.constructor=App.Collection,App.Collection.prototype.addItem=function(t){this._items[this._items.length]=t,this.dispatchEvent(App.EventType.ADDED,t)},App.Collection.prototype.setCurrent=function(t,e){(t!==this._currentItem||e)&&(this._currentItem=t,this._updateCurrentIndex(),this.dispatchEvent(App.EventType.CHANGE))},App.Collection.prototype.getCurrent=function(){return this._currentItem},App.Collection.prototype.getItemAt=function(t){return this._items[t]},App.Collection.prototype.copySource=function(){return this._items.concat()},App.Collection.prototype.filter=function(t,e){if(t){var i=0,n=this._items.length,o=[];if(e)for(;n>i;i++)t.indexOf(this._items[i][e])>-1&&o.push(this._items[i]);else for(;n>i;i++)t.indexOf(this._items[i])>-1&&o.push(this._items[i]);return o}return this._items},App.Collection.prototype.find=function(t,e){for(var i=0,n=this._items.length;n>i;i++)if(this._items[i][t]===e)return this._items[i];return null},App.Collection.prototype.previous=function(){var t=this._currentIndex;return-1===t&&(t=0),0>=t?t=this._items.length-1:t-=1,this._items[t]},App.Collection.prototype.next=function(){var t=this._currentIndex;return-1===t||t>=this._items.length-1?t=0:t+=1,this._items[t]},App.Collection.prototype.other=function(t){var e=this._items.length;return this._items[this._currentIndex+e+t]%e},App.Collection.prototype.hasItem=function(t){return this.indexOf(t)>-1},App.Collection.prototype.removeItem=function(t){return this.removeItemAt(this.indexOf(t))},App.Collection.prototype.removeItemAt=function(t){var e=this._items.splice(t,1)[0];return this._updateCurrentIndex(),-1===this._currentIndex&&(this._currentItem=null),this.dispatchEvent(App.EventType.REMOVED,e),e},App.Collection.prototype._updateCurrentIndex=function(){this._currentIndex=this.indexOf(this._currentItem)},App.Collection.prototype.indexOf=function(t){for(var e=8,i=0,n=Math.floor(this._items.length/e)*e;n>i;){if(this._items[i++]===t)return i-1;if(this._items[i++]===t)return i-1;if(this._items[i++]===t)return i-1;if(this._items[i++]===t)return i-1;if(this._items[i++]===t)return i-1;if(this._items[i++]===t)return i-1;if(this._items[i++]===t)return i-1;if(this._items[i++]===t)return i-1}for(n=this._items.length;n>i;)if(this._items[i++]===t)return i-1;return-1},App.Collection.prototype.index=function(){return this._currentIndex},App.Collection.prototype.length=function(){return this._items.length},App.ModelLocator={_proxies:{},init:function(t){for(var e=0,i=t.length;i>e;)this._proxies[t[e++]]=t[e++]},addProxy:function(t,e){if(this._proxies[t])throw Error("Proxy "+t+" already exist");this._proxies[t]=e},hasProxy:function(t){return this._proxies[t]},getProxy:function(t){return this._proxies[t]}},App.CurrencyPairCollection=function(t,e){App.Collection.call(this,t,App.CurrencyPair,null,e)},App.CurrencyPairCollection.prototype=Object.create(App.Collection.prototype),App.CurrencyPairCollection.prototype.constructor=App.CurrencyPairCollection,App.CurrencyPairCollection.prototype.findRate=function(t,e){for(var i=null,n=null,o=null,s=0,p=this._items.length;p>s;)if(i=this._items[s++],t===i.base&&e===i.symbol||t===i.symbol&&e===i.base){if(t===i.base&&e===i.symbol)return i.rate;if(t===i.symbol&&e===i.base)return 1/i.rate}for(s=0;p>s;)i=this._items[s++],"EUR"===i.base&&(i.symbol===t&&(n=i),i.symbol===e&&(o=i));return n&&o?o.rate/n.rate:1},App.Settings=function(t){this._data=t,this._startOfWeek=t[0],this.baseCurrency=t[1]||"USD",this.defaultCurrencyQuote=t[2]||"USD",this._defaultAccount=null,this._defaultCategory=null,this._defaultSubCategory=null,this._defaultPaymentMethod=null},Object.defineProperty(App.Settings.prototype,"startOfWeek",{get:function(){return this._startOfWeek},set:function(t){t>=0&&6>=t&&(this.startOfWeek=t)}}),Object.defineProperty(App.Settings.prototype,"defaultAccount",{get:function(){return this._defaultAccount||(this._defaultAccount=this._data?App.ModelLocator.getProxy(App.ModelName.ACCOUNTS).find("id",this._data[3]):App.ModelLocator.getProxy(App.ModelName.ACCOUNTS).getItemAt(0)),this._defaultAccount},set:function(t){this._defaultAccount=t}}),Object.defineProperty(App.Settings.prototype,"defaultCategory",{get:function(){return this._defaultCategory||(this._defaultCategory=this._data?App.ModelLocator.getProxy(App.ModelName.CATEGORIES).find("id",this._data[4]):App.ModelLocator.getProxy(App.ModelName.CATEGORIES).getItemAt(0)),this._defaultCategory},set:function(t){this._defaultCategory=t}}),Object.defineProperty(App.Settings.prototype,"defaultSubCategory",{get:function(){return this._defaultSubCategory||(this._defaultSubCategory=this._data?App.ModelLocator.getProxy(App.ModelName.SUB_CATEGORIES).find("id",this._data[5]):App.ModelLocator.getProxy(App.ModelName.SUB_CATEGORIES).getItemAt(0)),this._defaultSubCategory},set:function(t){this._defaultSubCategory=t}}),Object.defineProperty(App.Settings.prototype,"defaultPaymentMethod",{get:function(){return this._defaultPaymentMethod||(this._defaultPaymentMethod=this._data?App.ModelLocator.getProxy(App.ModelName.PAYMENT_METHODS).find("id",this._data[6]):App.ModelLocator.getProxy(App.ModelName.PAYMENT_METHODS).getItemAt(0)),this._defaultPaymentMethod},set:function(t){this._defaultPaymentMethod=t}}),App.Transaction=function(t,e,i,n){t?(this._data=t,this.amount=t[0],this.type=t[1],this.pending=1===t[2],this.repeat=1===t[3],this._account=null,this._category=null,this._subCategory=null,this._method=null,this._date=null,this._currencyBase=null,this._currencyQuote=null,this.note=t[8]?decodeURI(t[8]):""):(this._data=null,this.amount="",this.type=App.TransactionType.EXPENSE,this.pending=!1,this.repeat=!1,this._account=null,this._category=null,this._subCategory=null,this._method=null,this._date=null,this._currencyBase=null,this._currencyQuote=null,this.note="")},App.Transaction.prototype.destroy=function(){this._account=null,this._category=null,this._subCategory=null,this._method=null,this._date=null},App.Transaction.prototype.isSaved=function(){return this._data},App.Transaction.prototype.save=function(){this._data=this.serialize()},App.Transaction.prototype.revokeState=function(){this._data&&(this.amount=this._data[0],this.type=this._data[1],this.pending=1===this._data[2],this.repeat=1===this._data[3],this._account=null,this._category=null,this._subCategory=null,this._method=null,this._date=null,this._currencyBase=null,this._currencyQuote=null,this.note=this._data[8]?decodeURI(data[8]):"")},App.Transaction.prototype.serialize=function(){var t=this.currencyBase,e=this.currencyQuote,i=t===e?e:t+"/"+e+"@"+App.ModelLocator.getProxy(App.ModelName.CURRENCY_PAIRS).findRate(t,e),n=[parseInt(this.amount,10),this.type,this.pending?1:0,this.repeat?1:0,this.account.id+"."+this.category.id+"."+this.subCategory.id,this.method.id,this.date.getTime(),i];return this.note&&this.note.length&&n.push(App.StringUtils.encode(this.note)),n},App.Transaction.prototype.copy=function t(){var t=new App.Transaction;return t.amount=this.amount,t.type=this.type,t.pending=this.pending,t.repeat=this.repeat,t.account=this.account,t.category=this.category,t.subCategory=this.subCategory,t.method=this.method,t.date=this.date,t.currencyBase=this.currencyBase,t.currencyQuote=this.currencyQuote,t.note=this.note,t},Object.defineProperty(App.Transaction.prototype,"account",{get:function(){return this._account||(this._account=this._data?App.ModelLocator.getProxy(App.ModelName.ACCOUNTS).find("id",this._data[4].split(".")[0]):App.ModelLocator.getProxy(App.ModelName.SETTINGS).defaultAccount),this._account},set:function(t){this._account=t}}),Object.defineProperty(App.Transaction.prototype,"category",{get:function(){if(!this._category)if(this._data){var t=App.ModelLocator,e=App.ModelName,i=this._data[4].split(".");this._category=t.getProxy(e.CATEGORIES).find("id",i[1]),this._subCategory=t.getProxy(e.SUB_CATEGORIES).find("id",i[2])}else this._category=App.ModelLocator.getProxy(App.ModelName.SETTINGS).defaultCategory,this._subCategory=App.ModelLocator.getProxy(App.ModelName.SETTINGS).defaultSubCategory;return this._category},set:function(t){this._category=t}}),Object.defineProperty(App.Transaction.prototype,"subCategory",{get:function(){return this._subCategory||(this._subCategory=this._data?App.ModelLocator.getProxy(App.ModelName.SUB_CATEGORIES).find("id",this._data[4].split(".")[2]):App.ModelLocator.getProxy(App.ModelName.SETTINGS).defaultSubCategory),this._subCategory},set:function(t){this._subCategory=t}}),Object.defineProperty(App.Transaction.prototype,"method",{get:function(){return this._method||(this._method=this._data?App.ModelLocator.getProxy(App.ModelName.PAYMENT_METHODS).find("id",this._data[5]):App.ModelLocator.getProxy(App.ModelName.SETTINGS).defaultPaymentMethod),this._method},set:function(t){this._method=t}}),Object.defineProperty(App.Transaction.prototype,"date",{get:function(){return this._date||(this._date=this._data?new Date(this._data[6]):new Date),this._date},set:function(t){this._date=t}}),Object.defineProperty(App.Transaction.prototype,"currencyBase",{get:function(){return this._currencyBase||(this._currencyBase=this._data?-1===this._data[7].indexOf("@")?this._data[7]:this._data[7].split("@")[0].split("/")[0]:App.ModelLocator.getProxy(App.ModelName.SETTINGS).baseCurrency),this._currencyBase},set:function(t){this._currencyBase=t}}),Object.defineProperty(App.Transaction.prototype,"currencyQuote",{get:function(){return this._currencyQuote||(this._currencyQuote=this._data?-1===this._data[7].indexOf("@")?this._data[7]:this._data[7].split("@")[0].split("/")[1]:App.ModelLocator.getProxy(App.ModelName.SETTINGS).defaultCurrencyQuote),this._currencyQuote},set:function(t){this._currencyQuote=t}}),App.ScrollPolicy={ON:"ON",OFF:"OFF",AUTO:"AUTO"},App.PaymentMethod=function(t,e,i,n){this.id=App.PaymentMethod._ID++,this.name=t},App.PaymentMethod._ID=1,App.PaymentMethod.CASH="Cash",App.PaymentMethod.CREDIT_CARD="Credit-Card",App.Stack=function(){this._source=[],this._top=0},App.Stack.prototype.push=function(t){this._source[this._top++]=t},App.Stack.prototype.pop=function(){var t=this._source[this._top-1];return t&&(this._source[--this._top]=null),t},App.Stack.prototype.peek=function(t){return t||(t=1),this._source[this._top-t]},App.Stack.prototype.length=function(){return this._top},App.Stack.prototype.clear=function(){this._top=0},App.Account=function(t,e,i,n){t?(this._data=t,parseInt(t[0],10)>=App.Account._UID&&(App.Account._UID=parseInt(t[0],10)),this.id=this._data[0],this.name=this._data[1],this._categories=null):(this._data=null,this.id=String(++App.Account._UID),this.name="Account"+this.id,this._categories=null),this.lifeCycleState=App.LifeCycleState.CREATED},App.Account._UID=0,App.Account.prototype.addCategory=function(t){this._categories?this._categories.push(t):this._categories=[t]},App.Account.prototype.removeCategory=function(t){for(var e=0,i=this._categories.length;i>e;e++)if(this._categories[e]===t){this._categories.splice(e,1);break}},Object.defineProperty(App.Account.prototype,"categories",{get:function(){return this._categories||(this._categories=this._data?App.ModelLocator.getProxy(App.ModelName.CATEGORIES).filter(this._data[2].split(","),"id"):[]),this._categories}}),App.Category=function(t,e,i,n){t?(this._data=t,parseInt(t[0],10)>=App.Category._UID&&(App.Category._UID=parseInt(t[0],10)),this.id=t[0],this.name=t[1],this.color=t[2],this.icon=t[3],this.account=t[4],this.budget=t[6],this._subCategories=null):(this._data=null,this.id=String(++App.Category._UID),this.name="Category"+this.id,this.color=null,this.icon=null,this.account=null,this.budget=null,this._subCategories=null),this._states=null},App.Category._UID=0,App.Category.prototype.destroy=function(){for(var t=0,e=this._subCategories.length;e>t;)this._subCategories[t++]=null;if(this._subCategories.length=0,this._subCategories=null,this._states&&this._states.length){for(t=0,e=this._states.length;e>t;)this._states[t++]=null;this._states.length=0,this._states=null}this._data=null},App.Category.prototype.addSubCategory=function(t){if(this._subCategories){for(var e=0,i=this._subCategories.length;i>e;)if(this._subCategories[e++]===t)return;this._subCategories.push(t)}else this._subCategories=[t]},App.Category.prototype.removeSubCategory=function(t){for(var e=0,i=this._subCategories.length;i>e;e++)if(this._subCategories[e]===t){this._subCategories.splice(e,1);break}},App.Category.prototype.serialize=function(){for(var t=(this.subCategories,""),e=0,i=this._subCategories.length;i>e;)t+=this._subCategories[e++].id+",";return t=t.substring(0,t.length-1),[this.id,this.name,this.color,this.icon,this.account,t,this.budget]},App.Category.prototype.saveState=function(){this._states||(this._states=[]),this._states[this._states.length]=this.serialize()},App.Category.prototype.revokeState=function(){if(this._states&&this._states.length){var t=this._states.pop();this.name=t[1],this.color=t[2],this.icon=t[3],this.account=t[4],this.budget=t[6],this._inflateSubCategories(t[5])}},App.Category.prototype.clearSavedStates=function(){this._states&&(this._states.length=0);for(var t=0,e=this._subCategories.length;e>t;)this._subCategories[t++].clearSavedState()},App.Category.prototype._inflateSubCategories=function(t){this._subCategories=App.ModelLocator.getProxy(App.ModelName.SUB_CATEGORIES).filter(t.split(","),"id")},Object.defineProperty(App.Category.prototype,"subCategories",{get:function(){if(!this._subCategories)if(this._data)this._inflateSubCategories(this._data[5]);else{var t=new App.SubCategory;t.category=this.id,this._subCategories=[t]}return this._subCategories}}),App.ScrollIndicator=function(t,e){PIXI.Graphics.call(this),this.visible=!1,this.boundingBox=new PIXI.Rectangle(0,0,0,0),this._direction=t,this._pixelRatio=e,this._minIndicatorSize=Math.round(50*e),this._padding=Math.round(4*e),this._size=0,this._indicatorSize=0,this._indicatorThickness=0,this._contentPosition=0,this._positionStep=0,this._showHideTween=new App.TweenProxy(.2,App.Easing.linear,0,App.ModelLocator.getProxy(App.ModelName.EVENT_LISTENER_POOL)),this._state=App.TransitionState.HIDDEN},App.ScrollIndicator.prototype=Object.create(PIXI.Graphics.prototype),App.ScrollIndicator.prototype.constructor=App.ScrollIndicator,App.ScrollIndicator.prototype.show=function(){var t=App.TransitionState;(this._state===t.HIDING||this._state===t.HIDDEN)&&(this._state=t.SHOWING,this.visible=!0,this._showHideTween.start(!0))},App.ScrollIndicator.prototype.hide=function(t){var e=App.TransitionState;t?(this._state=e.HIDDEN,this.alpha=0,this.visible=!1):(this._state===e.SHOWING||this._state===e.SHOWN)&&(this._state=e.HIDING,this._showHideTween.start(!0))},App.ScrollIndicator.prototype.update=function(t){this._contentPosition=t;var e=App.TransitionState;(this._state===e.SHOWING||this._state===e.HIDING)&&this._updateVisibility(e),this._render()},App.ScrollIndicator.prototype._updateVisibility=function(t){var e=this._showHideTween.progress;this._state===t.SHOWING?(this.alpha=e,1===e&&(this._state=t.SHOWN)):this._state===t.HIDING&&(this.alpha=1-e,1===e&&(this._state=t.HIDDEN,this.visible=!1))},App.ScrollIndicator.prototype.resize=function(t,e){this._size=t,this._direction===App.Direction.X?(this.boundingBox.width=this._size,this.boundingBox.height=Math.round(7*this._pixelRatio),this._indicatorThickness=this.boundingBox.height-this._padding,this._indicatorSize=Math.round(this._size*(this._size/e)),this._indicatorSize<this._minIndicatorSize&&(this._indicatorSize=this._minIndicatorSize),this._positionStep=(this._size-this._indicatorSize)/(e-this._size)):this._direction===App.Direction.Y&&(this.boundingBox.width=Math.round(7*this._pixelRatio),this.boundingBox.height=this._size,this._indicatorThickness=this.boundingBox.width-this._padding,this._indicatorSize=Math.round(this._size*(this._size/e)),this._indicatorSize<this._minIndicatorSize&&(this._indicatorSize=this._minIndicatorSize),this._positionStep=(this._size-this._indicatorSize)/(e-this._size)),this._render()},App.ScrollIndicator.prototype._render=function(){var t=this._indicatorSize,e=-Math.round(this._contentPosition*this._positionStep);e+t>this._size?t=this._size-e:0>e&&(t+=e,e=0),this.clear(),this.beginFill(0,.3),this._direction===App.Direction.X?this.drawRoundedRect(e+this._padding,Math.round(.5*this._padding),t-2*this._padding,this._indicatorThickness,.5*this._indicatorThickness):this._direction===App.Direction.Y&&this.drawRoundedRect(Math.round(.5*this._padding),e+this._padding,this._indicatorThickness,t-2*this._padding,.5*this._indicatorThickness),this.endFill()},App.ScrollIndicator.prototype.destroy=function(){this._showHideTween.destroy(),this._showHideTween=null,this.boundingBox=null,this._direction=null,this._state=null,this.clear()},App.Input=function(t,e,i,n,o,s){PIXI.Graphics.call(this);var p=App.FontStyle;this.boundingBox=new App.Rectangle(0,0,i,n),this._fontSize=e,this._width=i,this._height=n,this._pixelRatio=o,this._enabled=!1,this._focused=!1,this._eventDispatcher=new App.EventDispatcher(App.ModelLocator.getProxy(App.ModelName.EVENT_LISTENER_POOL)),this._placeholder=t,this._placeholderStyle=p.get(e,p.GREY),this._currentStyle=this._placeholderStyle,this._textStyle=p.get(e,p.BLUE),this._restrictPattern=null,this._text="",this._textField=new PIXI.Text(this._placeholder,this._currentStyle),this._inputProxy=document.getElementById("textInputProxy"),this._inputProxyListeners={focus:this._onFocus.bind(this),blur:this._onBlur.bind(this),change:this._onChange.bind(this)},s&&(this._icon=PIXI.Sprite.fromFrame("clear-app")),this._iconHitThreshold=Math.round(this._width-40*this._pixelRatio),this._render(),this.addChild(this._textField),this._icon&&this.addChild(this._icon)},App.Input.prototype=Object.create(PIXI.Graphics.prototype),App.Input.prototype.constructor=App.Input,App.Input.prototype._render=function(){var t=this._pixelRatio;this._renderBackground(!1,t),this._textField.x=Math.round(10*t),this._textField.y=Math.round((this._height-this._textField.height)/2+t),this._icon&&(this._icon.width=Math.round(20*t),this._icon.height=Math.round(20*t),this._icon.x=Math.round(this._width-this._icon.width-10*t),this._icon.y=Math.round((this._height-this._icon.height)/2),this._icon.tint=14540253)},App.Input.prototype._renderBackground=function(t,e){var i=App.ColorTheme;this.clear(),this.beginFill(t?i.INPUT_HIGHLIGHT:i.GREY_DARK),this.drawRoundedRect(0,0,this._width,this._height,Math.round(5*e)),this.beginFill(16777215),this.drawRoundedRect(Math.round(e),Math.round(e),this._width-Math.round(2*e),this._height-Math.round(2*e),Math.round(4*e)),this.endFill()},App.Input.prototype.enable=function(){this._enabled||(this._enabled=!0,this._registerEventListeners(),this.interactive=!0)},App.Input.prototype.disable=function(){this._unRegisterEventListeners(),this._unRegisterProxyEventListeners(),this.interactive=!1,this._enabled=!1},App.Input.prototype.restrict=function(t){this._restrictPattern=t},App.Input.prototype.isFocused=function(){return this._focused},App.Input.prototype.focus=function(){this._focused||(this._renderBackground(!0,this._pixelRatio),this._registerProxyEventListeners(),this._inputProxy.focus(),this._focused=!0)},App.Input.prototype.blur=function(){this._inputProxy.blur(),this._unRegisterProxyEventListeners(),this._focused=!1},App.Input.prototype.addEventListener=function(t,e,i){this._eventDispatcher.addEventListener(t,e,i)},App.Input.prototype.removeEventListener=function(t,e,i){this._eventDispatcher.removeEventListener(t,e,i)},App.Input.prototype._registerEventListeners=function(){App.Device.TOUCH_SUPPORTED?this.tap=this._onClick:this.click=this._onClick},App.Input.prototype._unRegisterEventListeners=function(){App.Device.TOUCH_SUPPORTED?this.tap=null:this.click=null},App.Input.prototype._registerProxyEventListeners=function(){var t=App.EventType;this._inputProxy.addEventListener(t.FOCUS,this._inputProxyListeners.focus,!1),this._inputProxy.addEventListener(t.BLUR,this._inputProxyListeners.blur,!1),this._inputProxy.addEventListener(t.CHANGE,this._inputProxyListeners.change,!1),this._inputProxy.addEventListener(t.KEY_PRESS,this._inputProxyListeners.change,!1),this._inputProxy.addEventListener(t.PASTE,this._inputProxyListeners.change,!1),this._inputProxy.addEventListener(t.TEXT_INPUT,this._inputProxyListeners.change,!1),this._inputProxy.addEventListener(t.INPUT,this._inputProxyListeners.change,!1)},App.Input.prototype._unRegisterProxyEventListeners=function(){var t=App.EventType;this._inputProxy.removeEventListener(t.FOCUS,this._inputProxyListeners.focus,!1),this._inputProxy.removeEventListener(t.BLUR,this._inputProxyListeners.blur,!1),this._inputProxy.removeEventListener(t.CHANGE,this._inputProxyListeners.change,!1),this._inputProxy.removeEventListener(t.KEY_PRESS,this._inputProxyListeners.change,!1),this._inputProxy.removeEventListener(t.PASTE,this._inputProxyListeners.change,!1),this._inputProxy.removeEventListener(t.TEXT_INPUT,this._inputProxyListeners.change,!1),this._inputProxy.removeEventListener(t.INPUT,this._inputProxyListeners.change,!1);

},App.Input.prototype._onClick=function(t){this._inputProxy!==document.activeElement&&this.focus(),this._icon&&t.getLocalPosition(this).x>=this._iconHitThreshold&&(this._inputProxy.value="",this._onChange())},App.Input.prototype._onFocus=function(){var t=this._pixelRatio,e=this.toLocal(new PIXI.Point(this.x,this.y),this.stage);this._focused=!0,this._inputProxy.style.display="none",this._inputProxy.style.left=Math.round((this.x-e.x)/t)+"px",this._inputProxy.style.top=Math.round((this.y-e.y)/t)+"px",this._inputProxy.style.width=this._icon?Math.round(this._iconHitThreshold/t)+"px":Math.round(this._width/t)+"px",this._inputProxy.style.height=Math.round(this._height/t)+"px",this._inputProxy.style.fontSize=this._fontSize+"px",this._inputProxy.style.lineHeight=this._fontSize+"px",this._inputProxy.value=this._text,this._inputProxy.style.display="block",this._eventDispatcher.dispatchEvent(App.EventType.FOCUS)},App.Input.prototype._onBlur=function(){this._focused=!1,this._updateText(!0),this._inputProxy.style.top="-1000px",this._inputProxy.value="",this._renderBackground(!1,this._pixelRatio),this._unRegisterProxyEventListeners(),this._eventDispatcher.dispatchEvent(App.EventType.BLUR)},App.Input.prototype._onChange=function(t){this._updateText(!1),t&&13===t.keyCode&&this._inputProxy.blur()},App.Input.prototype._updateText=function(t){this._text=this._format(t),this._text===this._placeholder||0===this._text.length?(this._currentStyle===this._textStyle&&(this._currentStyle=this._placeholderStyle,this._textField.setStyle(this._currentStyle)),this._textField.setText(this._placeholder)):(this._currentStyle===this._placeholderStyle&&(this._currentStyle=this._textStyle,this._textField.setStyle(this._currentStyle)),this._textField.setText(this._text))},App.Input.prototype._format=function(t){if(this._restrictPattern){var e=this._inputProxy.value.match(this._restrictPattern);this._inputProxy.value=e&&e.length>0?e[0]:""}return this._inputProxy.value},App.Input.prototype.setValue=function(t){this._inputProxy.value=t,this._updateText(!1)},App.Input.prototype.getValue=function(){return this._text},App.Input.prototype.setPlaceholder=function(t){this._placeholder=t,this._updateText(!1)},App.Input.prototype.hitTest=function(t){return t>=this.y&&t<this.y+this.boundingBox.height},App.ScreenMode={DEFAULT:1,ADD:2,EDIT:3,SELECT:4},App.CurrencyPair=function(t,e,i,n){this.id=t[0],this.base=t[1],this.symbol=t[2],this.rate=t[3]},App.ColorTheme={WHITE:16777214,BLUE:3752548,BLUE_DARK:2435908,BLUE_LIGHT:5265787,GREY:15724527,GREY_DARK:13421772,GREY_DARKER:10066329,GREY_LIGHT:16777215,RED:15020051,RED_DARK:10027008,RED_LIGHT:16724736,GREEN:3394611,INPUT_HIGHLIGHT:39423,BLACK:0},App.Calendar=function(t,e){PIXI.Graphics.call(this);var i={font:"bold "+Math.round(12*e)+"px Arial",fill:"#999999"},n=App.CalendarWeekRow,o=PIXI.Text,s=App.DateUtils,p=App.FontStyle,r=App.ModelLocator.getProxy(App.ModelName.SETTINGS).startOfWeek,h=p.get(14,p.GREY_DARK),a=p.get(14,p.WHITE),l=s.getDayLabels(r),c=l.length,d=6,_=0;for(this.boundingBox=new App.Rectangle(0,0,t),this._date=null,this._selectedDate=null,this._width=t,this._pixelRatio=e,this._weekRowPosition=Math.round(81*e),this._monthField=new PIXI.Text("",p.get(18,p.BLUE)),this._prevButton=PIXI.Sprite.fromFrame("arrow-app"),this._nextButton=PIXI.Sprite.fromFrame("arrow-app"),this._dayLabelFields=new Array(c),this._weekRows=new Array(d),this._separatorContainer=new PIXI.Graphics;c>_;_++)this._dayLabelFields[_]=new o(l[_],i);for(_=0;d>_;_++)this._weekRows[_]=new n(h,a,t,e);for(this._render(),this.addChild(this._monthField),this.addChild(this._prevButton),this.addChild(this._nextButton),_=0;c>_;)this.addChild(this._dayLabelFields[_++]);for(_=0;d>_;)this.addChild(this._weekRows[_++]);this.addChild(this._separatorContainer)},App.Calendar.prototype=Object.create(PIXI.Graphics.prototype),App.Calendar.prototype.constructor=App.Calendar,App.Calendar.prototype._render=function(){var t=App.GraphicUtils,e=App.ColorTheme,i=this._pixelRatio,n=this._width,o=Math.round(12*i)/this._prevButton.height,s=Math.round(15*i),p=n-2*s,r=null,h=Math.round(n/this._dayLabelFields.length),a=Math.round(40*i),l=this._weekRows[0],c=l.boundingBox.height,d=this._dayLabelFields.length,_=0;for(this._monthField.y=Math.round((a-this._monthField.height)/2),this._prevButton.scale.x=o,this._prevButton.scale.y=o,this._prevButton.x=Math.round(20*i+this._prevButton.width),this._prevButton.y=Math.round((a-this._prevButton.height)/2+this._prevButton.height),this._prevButton.rotation=Math.PI,this._prevButton.tint=e.BLUE,this._nextButton.scale.x=o,this._nextButton.scale.y=o,this._nextButton.x=Math.round(n-20*i-this._nextButton.width),this._nextButton.y=Math.round((a-this._prevButton.height)/2),this._nextButton.tint=e.BLUE;d>_;_++)r=this._dayLabelFields[_],r.x=Math.round(_*h+(h-r.width)/2),r.y=Math.round(a+i+(a-r.height)/2);for(_=0,d=this._weekRows.length,this._separatorContainer.clear(),this._separatorContainer.beginFill(e.GREY,1);d>_;_++)l=this._weekRows[_],l.y=this._weekRowPosition+_*c,this._separatorContainer.drawRect(0,l.y+c,n,1);this._separatorContainer.endFill(),this.boundingBox.height=l.y+c,t.drawRects(this,e.GREY,1,[0,0,n,this.boundingBox.height],!0,!1),t.drawRects(this,e.GREY_DARK,1,[0,Math.round(80*i),n,1,s,a,p,1],!1,!1),t.drawRects(this,e.GREY_LIGHT,1,[s,a+1,p,1],!1,!0)},App.Calendar.prototype.update=function(t){this._date=t,this._selectedDate?this._selectedDate.setTime(this._date.valueOf()):this._selectedDate=new Date(this._date.valueOf());var e=App.DateUtils.getMonth(this._date,App.ModelLocator.getProxy(App.ModelName.SETTINGS).startOfWeek),i=this._selectedDate.getDate(),n=e.length,o=0;for(o=0;n>o;o++)this._weekRows[o].change(e[o],i);this._updateMonthLabel()},App.Calendar.prototype.getSelectedDate=function(){return this._selectedDate},App.Calendar.prototype._updateMonthLabel=function(){this._monthField.setText(App.DateUtils.getMonthLabel(this._date.getMonth())+" "+this._date.getFullYear()),this._monthField.x=Math.round((this._width-this._monthField.width)/2)},App.Calendar.prototype.onClick=function(){var t=this.stage.getTouchData().getLocalPosition(this),e=t.x,i=t.y;if(i>=this._weekRowPosition)this._selectDay(e,i);else{var n=this._prevButton.x-this._prevButton.width/2-e,o=this._nextButton.x+this._nextButton.width/2-e,s=this._nextButton.y+this._nextButton.height/2-i,p=n*n-s*s,r=o*o-s*s,h=20*this._pixelRatio;Math.sqrt(Math.abs(p))<h?this._changeDate(App.Direction.LEFT,-1):Math.sqrt(Math.abs(r))<h&&this._changeDate(App.Direction.RIGHT,-1)}},App.Calendar.prototype._getWeekByPosition=function(t){for(var e=this._weekRows[0].boundingBox.height,i=null,n=this._weekRows.length,o=0;n>o;)if(i=this._weekRows[o++],i.y<=t&&i.y+e>t)return i;return null},App.Calendar.prototype._selectDay=function(t,e){var i=this._getWeekByPosition(e),n=i.getDayByPosition(t),o=n.day,s=this._weekRows.length,p=0;if(n.otherMonth)o>20?this._changeDate(App.Direction.LEFT,o):this._changeDate(App.Direction.RIGHT,o);else{for(;s>p;)this._weekRows[p++].updateSelection(o);this._selectedDate.setFullYear(this._date.getFullYear(),this._date.getMonth(),o)}},App.Calendar.prototype._changeDate=function(t,e){var i=this._date.getMonth(),n=this._date.getFullYear(),o=11>i?i+1:0,s=o?n:n+1;t===App.Direction.LEFT&&(o=i?i-1:11,s=i?n:n-1),this._date.setFullYear(s,o),e>-1&&this._selectedDate.setFullYear(s,o,e),this._updateMonthLabel();var p=App.DateUtils.getMonth(this._date,App.ModelLocator.getProxy(App.ModelName.SETTINGS).startOfWeek),r=p.length,h=this._selectedDate.getFullYear()===s&&this._selectedDate.getMonth()===o,a=h?this._selectedDate.getDate():-1,l=0;for(l=0;r>l;l++)this._weekRows[l].change(p[l],a)},App.Pane=function(t,e,i,n,o,s){PIXI.DisplayObjectContainer.call(this),this.boundingBox=new PIXI.Rectangle(0,0,i,n),this._ticker=App.ModelLocator.getProxy(App.ModelName.TICKER),this._content=null,this._contentHeight=0,this._contentWidth=0,this._contentBoundingBox=new App.Rectangle,this._useMask=s,this.hitArea=this.boundingBox,this._enabled=!1,this._eventsRegistered=!1,this._state=null,this._xOriginalScrollPolicy=t,this._yOriginalScrollPolicy=e,this._xScrollPolicy=t,this._yScrollPolicy=e,this._xScrollIndicator=new App.ScrollIndicator(App.Direction.X,o),this._yScrollIndicator=new App.ScrollIndicator(App.Direction.Y,o),this._mouseData=null,this._oldMouseX=0,this._oldMouseY=0,this._xSpeed=0,this._ySpeed=0,this._xOffset=0,this._yOffset=0,this._friction=.9,this._dumpForce=.5,this._snapForce=.2,this._useMask&&(this._mask=new PIXI.Graphics,this.mask=this._mask,this.addChild(this._mask))},App.Pane.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.Pane.prototype.constructor=App.Pane,App.Pane.prototype.setContent=function(t){this.removeContent(),this._content=t,this._contentHeight=Math.round(this._content.height),this._contentWidth=Math.round(this._content.width),this._contentBoundingBox.width=this._contentWidth,this._contentBoundingBox.height=this._contentHeight,this.addChildAt(this._content,0),this._updateScrollers(),this._useMask&&this._updateMask()},App.Pane.prototype.removeContent=function(){this._content&&this.contains(this._content)&&(this.removeChild(this._content),this._content=null)},App.Pane.prototype.resize=function(t,e){this.boundingBox.width=t||this.boundingBox.width,this.boundingBox.height=e||this.boundingBox.height,this._content&&(this._contentHeight=Math.round(this._content.height),this._contentWidth=Math.round(this._content.width),this._contentBoundingBox.width=this._contentWidth,this._contentBoundingBox.height=this._contentHeight,this._checkPosition(),this._updateScrollers(),this._useMask&&this._updateMask())},App.Pane.prototype.getContentBounds=function(){return this._contentBoundingBox},App.Pane.prototype._updateMask=function(){App.GraphicUtils.drawRect(this._mask,16711680,1,0,0,this.boundingBox.width,this.boundingBox.height)},App.Pane.prototype._updateX=function(t){this._content.x=Math.round(t)},App.Pane.prototype._updateY=function(t){this._content.y=Math.round(t)},App.Pane.prototype.enable=function(){if(!this._enabled){var t=App.ScrollPolicy;(this._xScrollPolicy!==t.OFF||this._yScrollPolicy!==t.OFF)&&this._registerEventListeners(),this.interactive=!0,this._enabled=!0}},App.Pane.prototype.disable=function(){this._unRegisterEventListeners(),this.cancelScroll(),this._checkPosition(),this.interactive=!1,this._enabled=!1},App.Pane.prototype.resetScroll=function(){this._state=null,this._xSpeed=0,this._ySpeed=0,this._content&&(this._updateX(0),this._updateY(0),this._xScrollIndicator.hide(!0),this._yScrollIndicator.hide(!0))},App.Pane.prototype.cancelScroll=function(){this._state=null,this._xSpeed=0,this._ySpeed=0,this._xScrollIndicator.hide(!0),this._yScrollIndicator.hide(!0)},App.Pane.prototype._registerEventListeners=function(){this._eventsRegistered||(this._eventsRegistered=!0,App.Device.TOUCH_SUPPORTED?(this.touchstart=this._onPointerDown,this.touchend=this._onPointerUp,this.touchendoutside=this._onPointerUp,this.touchmove=this._onPointerMove):(this.mousedown=this._onPointerDown,this.mouseup=this._onPointerUp,this.mouseupoutside=this._onPointerUp,this.mousemove=this._onPointerMove),this._ticker.addEventListener(App.EventType.TICK,this,this._onTick))},App.Pane.prototype._unRegisterEventListeners=function(){this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),App.Device.TOUCH_SUPPORTED?(this.touchstart=null,this.touchend=null,this.touchendoutside=null,this.touchmove=null):(this.mousedown=null,this.mouseup=null,this.mouseupoutside=null,this.mousemove=null),this._eventsRegistered=!1},App.Pane.prototype._onPointerDown=function(t){this._mouseData=t;var e=this._mouseData.getLocalPosition(this.stage);this._xOffset=e.x-this._content.x,this._yOffset=e.y-this._content.y,this._xSpeed=0,this._ySpeed=0,this._state=App.InteractiveState.DRAGGING,this._xScrollPolicy===App.ScrollPolicy.ON&&this._xScrollIndicator.show(),this._yScrollPolicy===App.ScrollPolicy.ON&&this._yScrollIndicator.show()},App.Pane.prototype._onPointerUp=function(t){this._isContentPulled()?(this._state=App.InteractiveState.SNAPPING,this._xSpeed=0,this._ySpeed=0):this._state=App.InteractiveState.SCROLLING,this._mouseData=null},App.Pane.prototype._onPointerMove=function(t){this._mouseData=t},App.Pane.prototype._onTick=function(){var t=App.InteractiveState;this._state===t.DRAGGING?this._drag(App.ScrollPolicy):this._state===t.SCROLLING?this._scroll(App.ScrollPolicy,t):this._state===t.SNAPPING&&this._snap(App.ScrollPolicy,t),this._xScrollIndicator.visible&&this._xScrollIndicator.update(this._content.x),this._yScrollIndicator.visible&&this._yScrollIndicator.update(this._content.y)},App.Pane.prototype._drag=function(t){var e=0;if(this.stage){if(this._xScrollPolicy===t.ON){var i=this.boundingBox.width,n=this._mouseData.getLocalPosition(this.stage).x,o=this._content.x,s=o+this._contentWidth,p=o-this._contentWidth;if(-1e4>=n)return;o>0?(e=(1-o/i)*this._dumpForce,this._updateX(n*e-this._xOffset*e)):i>s?(e=s/i*this._dumpForce,this._updateX(p-(i-n)*e+(this._contentWidth-this._xOffset)*e)):this._updateX(n-this._xOffset),this._xSpeed=n-this._oldMouseX,this._oldMouseX=n}if(this._yScrollPolicy===t.ON){var r=this.boundingBox.height,h=this._mouseData.getLocalPosition(this.stage).y,a=this._content.y,l=a+this._contentHeight,c=r-this._contentHeight;if(-1e4>=h)return;a>0?(e=(1-a/r)*this._dumpForce,this._updateY(h*e-this._yOffset*e)):r>l?(e=l/r*this._dumpForce,this._updateY(c-(r-h)*e+(this._contentHeight-this._yOffset)*e)):this._updateY(h-this._yOffset),this._ySpeed=h-this._oldMouseY,this._oldMouseY=h}}},App.Pane.prototype._scroll=function(t,e){if(this._xScrollPolicy===t.ON){this._updateX(this._content.x+this._xSpeed);var i=this.boundingBox.width,n=this._content.x,o=n+this._contentWidth;n>0?this._xSpeed*=(1-n/i)*this._dumpForce:i>o&&(this._xSpeed*=o/i*this._dumpForce),Math.abs(this._xSpeed)<.1?(this._xSpeed=0,this._state=null,this._xScrollIndicator.hide(),(n>0||i>o)&&(this._state=e.SNAPPING)):this._xSpeed*=this._friction}if(this._yScrollPolicy===t.ON){this._updateY(this._content.y+this._ySpeed);var s=this.boundingBox.height,p=this._content.y,r=p+this._contentHeight;p>0?this._ySpeed*=(1-p/s)*this._dumpForce:s>r&&(this._ySpeed*=r/s*this._dumpForce),Math.abs(this._ySpeed)<.1?(this._ySpeed=0,this._state=null,this._yScrollIndicator.hide(),(p>0||s>r)&&(this._state=e.SNAPPING)):this._ySpeed*=this._friction}},App.Pane.prototype._snap=function(t){if(this._xScrollPolicy===t.ON){var e=this.boundingBox.width,i=this._content.x,n=i+this._contentWidth,o=i-this._contentWidth,s=i*this._snapForce;i>0?5>s?(this._state=null,this._updateX(0),this._xScrollIndicator.hide()):this._updateX(s):e>n&&(s=o+(i-o)*this._snapForce,s>=e-5?(this._state=null,this._updateX(o),this._xScrollIndicator.hide()):this._updateX(s))}if(this._yScrollPolicy===t.ON){var p=this.boundingBox.height,r=this._content.y,h=r+this._contentHeight,a=p-this._contentHeight;r>0?(s=r*this._snapForce,5>s?(this._state=null,this._updateY(0),this._yScrollIndicator.hide()):this._updateY(s)):p>h&&(s=a+(r-a)*this._snapForce,s>=a-5?(this._state=null,this._updateY(a),this._yScrollIndicator.hide()):this._updateY(s))}},App.Pane.prototype._isContentPulled=function(){if(this._contentHeight>this.boundingBox.height){if(this._content.y>0)return!0;if(this._content.y+this._contentHeight<this.boundingBox.height)return!0}if(this._contentWidth>this.boundingBox.width){if(this._content.x>0)return!0;if(this._content.x+this._contentWidth<this.boundingBox.width)return!0}return!1},App.Pane.prototype._updateScrollers=function(){var t=App.ScrollPolicy,e=this.boundingBox.width,i=this.boundingBox.height;this._xOriginalScrollPolicy===t.AUTO&&(this._contentWidth>=e?(this._xScrollPolicy=t.ON,this._xScrollIndicator.resize(e,this._contentWidth),this._xScrollIndicator.x=i-this._xScrollIndicator.boundingBox.height,this.contains(this._xScrollIndicator)||this.addChild(this._xScrollIndicator)):(this._xScrollPolicy=t.OFF,this._xScrollIndicator.hide(),this.contains(this._xScrollIndicator)&&this.removeChild(this._xScrollIndicator))),this._yOriginalScrollPolicy===t.AUTO&&(this._contentHeight>=i?(this._yScrollPolicy=t.ON,this._yScrollIndicator.resize(i,this._contentHeight),this._yScrollIndicator.x=e-this._yScrollIndicator.boundingBox.width,this.contains(this._yScrollIndicator)||this.addChild(this._yScrollIndicator)):(this._yScrollPolicy=t.OFF,this._yScrollIndicator.hide(),this.contains(this._yScrollIndicator)&&this.removeChild(this._yScrollIndicator))),this._xScrollPolicy===t.OFF&&this._yScrollPolicy===t.OFF?this._unRegisterEventListeners():this._registerEventListeners()},App.Pane.prototype._checkPosition=function(){var t=this.boundingBox.width,e=this.boundingBox.height;this._contentWidth>t?this._content.x>0?this._updateX(0):this._content.x+this._contentWidth<t&&this._updateX(t-this._contentWidth):this._contentWidth<=t&&0!==this._content.x&&this._updateX(0),this._contentHeight>e?this._content.y>0?this._updateY(0):this._content.y+this._contentHeight<e&&this._updateY(e-this._contentHeight):this._contentHeight<=e&&0!==this._content.y&&this._updateY(0)},App.VirtualList=function(t,e,i,n,o){PIXI.DisplayObjectContainer.call(this);var s=t.allocate(),p=e===App.Direction.X?s.boundingBox.width:s.boundingBox.height;this.boundingBox=new PIXI.Rectangle(0,0,i,n),this._model=null,this._itemPool=t,this._direction=e,this._width=i,this._height=n,this._pixelRatio=o,this._items=[],this._itemSize=p,this._virtualX=0,this._virtualY=0,t.release(s)},App.VirtualList.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.VirtualList.prototype.constructor=App.VirtualList,App.VirtualList.prototype.getItemUnderPoint=function(t){var e=t.getLocalPosition(this).x,i=App.Direction,n=0,o=this._items.length,s=0,p=0,r=null;if(this._direction===i.X){for(;o>n;)if(r=this._items[n++],p=r.x,s=r.boundingBox.width,e>=p&&p+s>=e)return r}else if(this._direction===i.Y)for(e=t.getLocalPosition(this).y;o>n;)if(r=this._items[n++],p=r.y,s=r.boundingBox.height,e>=p&&p+s>=e)return r;return null},App.VirtualList.prototype.updateX=function(t){t=Math.round(t);var e=0,i=this._items.length,n=t-this._virtualX,o=Math.floor(t/this._itemSize),s=0,p=0,r=0,h=this._model.length,a=i-2,l=h-i,c=!1,d=!1,_=0,u=null;for(this._virtualX=t;i>e;)u=this._items[e++],_=u.x+n,d=_>this._width&&n>0,c=_+this._itemSize<0&&0>n,(d||c)&&(s=-Math.floor(_/this._width),_+=s*i*this._itemSize,p=Math.floor(_/this._itemSize),r=o>=0?(p-o%h)%h:(p-o)%h,0>r?r=h+r:r>=h&&(r=h-1),c&&r>a||d&&l>r?u.setModel(this._model[r]):_=u.x+n),u.x=_},App.VirtualList.prototype.updateY=function(t){t=Math.round(t);var e=0,i=this._items.length,n=t-this._virtualY,o=Math.floor(t/this._itemSize),s=0,p=0,r=0,h=this._model.length,a=i-2,l=h-i,c=!1,d=!1,_=0,u=null;for(this._virtualY=t;i>e;)u=this._items[e++],_=u.y+n,d=_>this._height&&n>0,c=_+this._itemSize<0&&0>n,(d||c)&&(s=-Math.floor(_/this._height),_+=s*i*this._itemSize,p=Math.floor(_/this._itemSize),r=o>=0?(p-o%h)%h:(p-o)%h,0>r?r=h+r:r>=h&&(r=h-1),c&&r>a||d&&l>r?u.setModel(this._model[r]):_=u.y+n),u.y=_},App.VirtualList.prototype.reset=function(){var t=App.Direction,e=0,i=null,n=0,o=this._items.length;if(this._direction===t.X)for(;o>n;n++)i=this._items[n],i.x=e,i.setModel(this._model[n]),e=Math.round(e+this._itemSize);else if(this._direction===t.Y)for(;o>n;n++)i=this._items[n],i.y=e,i.setModel(this._model[n]),e=Math.round(e+this._itemSize)},App.VirtualList.prototype.update=function(t){this._model=t;var e=App.Direction,i=Math.ceil(this._width/this._itemSize)+1,n=this._model.length*this._itemSize,o=null,s=0,p=this._items.length,r=0;for(this.boundingBox.width=n,this.boundingBox.height=this._height,this._virtualX=0,this._virtualY=0;p>r;r++)this._itemPool.release(this.removeChild(this._items[r])),this._items[r]=null;if(this._items.length=0,this._direction===e.X)for(i>this._model.length&&(i=this._model.length),r=0,p=i;p>r;r++)o=this._itemPool.allocate(),o.x=s,o.setModel(this._model[r]),this._items.push(o),this.addChild(o),s=Math.round(s+this._itemSize);else if(this._direction===e.Y)for(i=Math.ceil(this._height/this._itemSize)+1,this.boundingBox.width=this._width,this.boundingBox.height=n,i>this._model.length&&(i=this._model.length),r=0,p=i;p>r;r++)o=this._itemPool.allocate(),o.y=s,o.setModel(this._model[r]),this._items.push(o),this.addChild(o),s=Math.round(s+this._itemSize)},App.VirtualList.prototype._updateLayout=function(t){var e=0,i=this._items.length,n=null,o=0,s=App.Direction;if(this._direction===s.X){for(;i>e;)n=this._items[e++],n.x=o,o=Math.round(o+this._itemSize);t&&this.updateX(this.x)}else if(this._direction===s.Y){for(;i>e;)n=this._items[e++],n.y=o,o=Math.round(o+this._itemSize);t&&this.updateY(this.y)}},Object.defineProperty(App.VirtualList.prototype,"x",{get:function(){return this._virtualX}}),Object.defineProperty(App.VirtualList.prototype,"y",{get:function(){return this._virtualY}}),App.CurrencySymbol=function(t){this.symbol=t},App.Skin=function(t,e){var i=App.ColorTheme,n=PIXI.scaleModes.DEFAULT,o=Math.round(10*e),s=new PIXI.Graphics,p=t-2*o,r=Math.round(40*e),h=App.GraphicUtils.drawRects,a=i.GREY,l=i.GREY_LIGHT,c=i.GREY_DARK;h(s,a,1,[0,0,t,r],!0,!1),h(s,l,1,[o,0,p,1],!1,!1),h(s,c,1,[o,r-1,p,1],!1,!0),this.GREY_40=s.generateTexture(1,n),h(s,i.WHITE,1,[0,0,t,r],!0,!1),h(s,a,1,[o,r-1,p,1],!1,!0),this.WHITE_40=s.generateTexture(1,n),r=Math.round(50*e),h(s,a,1,[0,0,t,r],!0,!1),h(s,l,1,[o,0,p,1],!1,!1),h(s,c,1,[o,r-1,p,1],!1,!0),this.GREY_50=s.generateTexture(1,n),r=Math.round(60*e),h(s,a,1,[0,0,t,r],!0,!1),h(s,l,1,[o,0,p,1],!1,!1),h(s,c,1,[o,r-1,p,1],!1,!0),this.GREY_60=s.generateTexture(1,n),r=Math.round(70*e),h(s,a,1,[0,0,t,r],!0,!1),h(s,l,1,[o,0,p,1],!1,!1),h(s,c,1,[o,r-1,p,1],!1,!0),this.GREY_70=s.generateTexture(1,n),h(s,i.RED,1,[0,0,t,r],!0,!1),h(s,i.RED_LIGHT,1,[o,0,p,1],!1,!1),h(s,i.RED_DARK,1,[o,r-1,p,1],!1,!0),this.RED_70=s.generateTexture(1,n),p=Math.round(40*e),r=p,s.clear(),s.beginFill(i.GREY_DARK,1),s.drawRect(0,0,p,r),s.beginFill(i.GREY,1),s.drawRect(0,r/2,p/2,r/2),s.beginFill(14606046,1),s.drawShape(new PIXI.Polygon([0,0,p,0,p,r,0,0])),s.endFill(),this.GREY_PATTERN=s.generateTexture(1,n),p=t-4*o,r=Math.round(40*e),h(s,a,1,[0,0,t,r],!0,!1),h(s,l,1,[o,0,p,1],!1,!1),h(s,c,1,[o,r-1,p,1],!1,!0),this.NARROW_GREY_40=s.generateTexture(1,n),h(s,i.WHITE,1,[0,0,t,r],!0,!1),h(s,a,1,[o,r-1,p,1],!1,!0),this.NARROW_WHITE_40=s.generateTexture(1,n)},App.CalendarWeekRow=function(t,e,i,n){PIXI.Graphics.call(this);var o=7,s=PIXI.Text,p=0,r=0;for(this.boundingBox=new App.Rectangle(0,0,i,Math.round(40*n)),this._week=null,this._width=i,this._pixelRatio=n,this._textStyle=t,this._selectedStyle=e,this._dateFields=new Array(7),this._selectedDayIndex=-1,this._highlightBackground=new PIXI.Graphics;o>r;r++,p+=2)this._dateFields[r]=new s("",this._textStyle);for(this.addChild(this._highlightBackground),r=0;o>r;)this.addChild(this._dateFields[r++])},App.CalendarWeekRow.prototype=Object.create(PIXI.Graphics.prototype),App.CalendarWeekRow.prototype.constructor=App.CalendarWeekRow,App.CalendarWeekRow.prototype._render=function(){var t=App.ColorTheme,e=this._week.length/2,i=Math.round(this._width/e),n=this.boundingBox.height,o=null,s=-1,p=-1,r=0,h=0;for(this.clear(),this.beginFill(t.GREY_LIGHT),this.drawRect(0,0,this._width,n),this.beginFill(t.GREY);e>h;h++,r+=2)o=this._dateFields[h],o.x=Math.round(h*i+(i-o.width)/2+1),o.y=Math.round((n-o.height)/2+1),this._week[r+1]?-1===s&&(s=h):(-1===p&&s>-1&&(p=h),h&&this.drawRect(Math.round(h*i),0,1,n));s>-1&&this.drawRect(s?s*i:0,0,-1===p?this._width:p*i,n),this.endFill(),App.GraphicUtils.drawRect(this._highlightBackground,t.BLUE,1,0,0,i-1,n),this._highlightBackground.alpha=0},App.CalendarWeekRow.prototype._getDayByDate=function(t){for(var e=0,i=0,n=this._week.length/2,o=-1;n>i;i++,e+=2)if(o=this._week[e],o===t)return{day:o,otherMonth:this._week[e+1],index:i};return null},App.CalendarWeekRow.prototype.getDayByPosition=function(t){for(var e=0,i=0,n=this._week.length/2,o=Math.round(this._width/n);n>i;i++,e+=2)if(t>=i*o&&i*o+o>=t)return{day:this._week[e],otherMonth:this._week[e+1],index:i};return null},App.CalendarWeekRow.prototype._selectDay=function(t){this._highlightBackground.x=t.index*Math.round(this._width/(this._week.length/2))+Math.round(this._pixelRatio),this._highlightBackground.alpha=1,this._selectedDayIndex>-1&&this._dateFields[this._selectedDayIndex].setStyle(this._textStyle),this._selectedDayIndex=t.index,this._dateFields[this._selectedDayIndex].setStyle(this._selectedStyle)},App.CalendarWeekRow.prototype._deselectDay=function(){this._selectedDayIndex>-1&&(this._dateFields[this._selectedDayIndex].setStyle(this._textStyle),this._selectedDayIndex=-1),this._highlightBackground.alpha=0},App.CalendarWeekRow.prototype.updateSelection=function(t){var e=this._getDayByDate(t);e&&0===e.otherMonth?this._selectDay(e):this._deselectDay()},App.CalendarWeekRow.prototype.change=function(t,e){this._week=t;for(var i=t.length/2,n=null,o=0,s=0;i>s;s++,o+=2)n=this._dateFields[s],n.setText(t[o]),n.setStyle(this._textStyle);this._render(),e>-1&&this.updateSelection(e)},App.FontStyle={_pixelRatio:1,_styles:[],init:function(t){return this._pixelRatio=t,this},get:function(t,e,i,n){var o=0,s=this._styles.length,p=null;for(n=n||this.CONDENSED;s>o;)if(p=this._styles[o++],p.fontSize===t&&p.fill===e&&p.fontName===n){if(!i)return p;if(p.align===i)return p}return p={fontSize:t,font:Math.round(t*this._pixelRatio)+"px "+n,fill:e,align:i?i:"left",fontName:n},this._styles.push(p),p},CONDENSED:"HelveticaNeueCond",LIGHT_CONDENSED:"HelveticaNeueLightCond",WHITE:"#ffffff",BLUE:"#394264",BLUE_LIGHT:"#50597B",BLUE_DARK:"#252B44",GREY:"#efefef",GREY_DARK:"#cccccc",GREY_DARKER:"#999999",BLACK_LIGHT:"#333333",RED_DARK:"#990000"},App.TimeInput=function(t,e,i,n,o,s){App.Input.call(this,t,e,i,n,o,s),this._inputProxy=document.getElementById("timeInputProxy")},App.TimeInput.prototype=Object.create(App.Input.prototype),App.TimeInput.prototype.constructor=App.TimeInput,App.TimeInput.prototype._render=function(){var t=this._pixelRatio;this._renderBackground(!1,t),this._updateAlignment(),this._textField.y=Math.round(9*t)},App.TimeInput.prototype._updateText=function(t){App.Input.prototype._updateText.call(this,t),this._updateAlignment()},App.TimeInput.prototype._format=function(t){if(0===this._inputProxy.value.length)return"";var e=this._inputProxy.value.replace(/\D/g,""),i=e.substr(0,2),n=e.substr(2,2);return 2===i.length&&parseInt(i,10)>24?i="24":1===n.length&&parseInt(n,10)>5?n="5":n.length>=2&&parseInt(n,10)>59&&(n="59"),t&&(1===i.length&&(i="0"+i),0===n.length?n+="00":1===n.length&&(n+="0")),e=n.length>0?i+":"+n:i,this._inputProxy.value=e,e},App.TimeInput.prototype._updateAlignment=function(){this._textField.x=Math.round((this._width-this._textField.width)/2)},App.Header=function(t){PIXI.Graphics.call(this);var e=App.ModelLocator,i=App.ModelName,n=App.HeaderIcon,o=App.HeaderAction,s=App.FontStyle,p=t.pixelRatio,r=e.getProxy(i.EVENT_LISTENER_POOL);this._layout=t,this._iconSize=Math.round(50*p),this._leftIcon=new n(o.ADD_TRANSACTION,this._iconSize,this._iconSize,p),this._rightIcon=new n(o.MENU,this._iconSize,this._iconSize,p),this._title=new App.HeaderTitle("Cashius",this._layout.width-2*this._iconSize,this._iconSize,p,s.get(20,s.WHITE)),this._ticker=e.getProxy(i.TICKER),this._tween=new App.TweenProxy(.7,App.Easing.outExpo,0,r),this._eventDispatcher=new App.EventDispatcher(r),this._actionEnabled=!0,this._render(),this.addChild(this._leftIcon),this.addChild(this._title),this.addChild(this._rightIcon),this._registerEventListeners()},App.Header.prototype=Object.create(PIXI.Graphics.prototype),App.Header.prototype.constructor=App.Header,App.Header.prototype._render=function(){var t=App.GraphicUtils,e=App.ColorTheme,i=this._layout.pixelRatio,n=this._layout.width,o=this._layout.headerHeight,s=o-this._iconSize,p=Math.round(10*i);this._title.x=this._iconSize,this._rightIcon.x=n-this._iconSize,t.drawRects(this,e.BLUE,1,[0,0,n,o],!0,!1),t.drawRects(this,e.BLUE_LIGHT,1,[this._iconSize+1,s+p,1,this._iconSize-2*p,n-this._iconSize,s+p,1,this._iconSize-2*p],!1,!1),t.drawRects(this,e.BLUE_DARK,1,[0,o-1,n,1,this._iconSize,s+p,1,this._iconSize-2*p,n-this._iconSize-1,s+p,1,this._iconSize-2*p],!1,!0)},App.Header.prototype._registerEventListeners=function(){var t=App.EventType;App.ViewLocator.getViewSegment(App.ViewName.SCREEN_STACK).addEventListener(t.CHANGE,this,this._onScreenChange),App.Device.TOUCH_SUPPORTED?this.tap=this._onClick:this.click=this._onClick,this._tween.addEventListener(t.COMPLETE,this,this._onTweenComplete),this.interactive=!0},App.Header.prototype.enableActions=function(){this._actionEnabled=!0},App.Header.prototype.disableActions=function(){this._actionEnabled=!1},App.Header.prototype._onScreenChange=function(){this._ticker.addEventListener(App.EventType.TICK,this,this._onTick),this._tween.restart()},App.Header.prototype.change=function(t,e,i){this._leftIcon.change(t),this._title.change(i),this._rightIcon.change(e)},App.Header.prototype._onTick=function(){this._onTweenUpdate()},App.Header.prototype._onTweenUpdate=function(){var t=this._tween.progress;this._leftIcon.update(t),this._title.update(t),this._rightIcon.update(t)},App.Header.prototype._onTweenComplete=function(){this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),this._onTweenUpdate()},App.Header.prototype._onClick=function(t){if(this._actionEnabled){var e=t.getLocalPosition(this).x,i=App.HeaderAction,n=i.NONE;e<=this._iconSize?n=this._leftIcon.getAction():e>=this._layout.width-this._iconSize&&(n=this._rightIcon.getAction()),n!==i.NONE&&this._eventDispatcher.dispatchEvent(App.EventType.CLICK,n)}},App.Header.prototype.addEventListener=function(t,e,i){this._eventDispatcher.addEventListener(t,e,i)},App.Header.prototype.removeEventListener=function(t,e,i){this._eventDispatcher.removeEventListener(t,e,i)},App.InfiniteList=function(t,e,i,n,o,s){PIXI.DisplayObjectContainer.call(this);var p=App.Direction,r=new e(0,t[0],s),h=i===p.X?r.boundingBox.width:r.boundingBox.height,a=i===p.X?Math.ceil(n/h)+1:Math.ceil(o/h)+1,l=t.length-1,c=0,d=0;for(this.boundingBox=new PIXI.Rectangle(0,0,n,o),this.hitArea=this.boundingBox,this._ticker=App.ModelLocator.getProxy(App.ModelName.TICKER),this._model=t,this._itemClass=e,this._direction=i,this._width=n,this._height=o,this._pixelRatio=s,this._items=new Array(a),this._itemSize=h,this._selectedModelIndex=-1,this._enabled=!1,this._state=null,this._mouseData=null,this._virtualPosition=0,this._oldMousePosition=0,this._speed=0,this._offset=0,this._friction=.9;a>d;d++,c++)c>l&&(c=0),d>0&&(r=new e(c,t[c],s)),this._items[d]=r,this.addChild(r);this._updateLayout(!1)},App.InfiniteList.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.InfiniteList.prototype.constructor=App.InfiniteList,App.InfiniteList.prototype.enable=function(){this._enabled||(this._enabled=!0,this._registerEventListeners(),this.interactive=!0)},App.InfiniteList.prototype.disable=function(){this.interactive=!1,this._unRegisterEventListeners(),this._enabled=!1},App.InfiniteList.prototype.selectItemByPosition=function(t){var e=0,i=this._items.length,n=this._itemSize,o=this._direction===App.Direction.X?"x":"y",s=null,p=0;for(this._selectedModelIndex=-1;i>e;)if(s=this._items[e++],p=s[o],t>=p&&p+n>t){this._selectedModelIndex=s.getModelIndex();break}for(e=0;i>e;)this._items[e++].select(this._selectedModelIndex);return s},App.InfiniteList.prototype.selectItemByValue=function(t){var e=0,i=this._model.length;for(this._selectedModelIndex=-1;i>e;e++)if(this._model[e]===t){this._selectedModelIndex=e;break}for(i=this._items.length,e=0;i>e;)this._items[e++].select(this._selectedModelIndex)},App.InfiniteList.prototype.getSelectedValue=function(){return this._model[this._selectedModelIndex]},App.InfiniteList.prototype.cancelScroll=function(){this._speed=0,this._state=null},App.InfiniteList.prototype._registerEventListeners=function(){App.Device.TOUCH_SUPPORTED?(this.touchstart=this._onPointerDown,this.touchend=this._onPointerUp,this.touchendoutside=this._onPointerUp):(this.mousedown=this._onPointerDown,this.mouseup=this._onPointerUp,
this.mouseupoutside=this._onPointerUp),this._ticker.addEventListener(App.EventType.TICK,this,this._onTick)},App.InfiniteList.prototype._unRegisterEventListeners=function(){this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),App.Device.TOUCH_SUPPORTED?(this.touchstart=null,this.touchend=null,this.touchendoutside=null):(this.mousedown=null,this.mouseup=null,this.mouseupoutside=null)},App.InfiniteList.prototype._onTick=function(){var t=App.InteractiveState;this._state===t.DRAGGING?this._drag(App.Direction):this._state===t.SCROLLING&&this._scroll(App.Direction)},App.InfiniteList.prototype._onPointerDown=function(t){this._mouseData=t;var e=this._mouseData.getLocalPosition(this.stage).x;this._direction===App.Direction.Y&&(e=this._mouseData.getLocalPosition(this.stage).y),this._offset=e-this._virtualPosition,this._speed=0,this._state=App.InteractiveState.DRAGGING},App.InfiniteList.prototype._onPointerUp=function(t){this._state=App.InteractiveState.SCROLLING,this._mouseData=null},App.InfiniteList.prototype._drag=function(t){if(this.stage){if(this._direction===t.X){var e=this._mouseData.getLocalPosition(this.stage).x;if(-1e4>=e)return;this._updateX(e-this._offset)}else if(this._direction===t.Y){if(e=this._mouseData.getLocalPosition(this.stage).y,-1e4>=e)return;this._updateY(e-this._offset)}this._speed=e-this._oldMousePosition,this._oldMousePosition=e}},App.InfiniteList.prototype._scroll=function(t){this._direction===t.X?this._updateX(this._virtualPosition+this._speed):this._direction===t.Y&&this._updateY(this._virtualPosition+this._speed),Math.abs(this._speed)<.1?(this._speed=0,this._state=null):this._speed*=this._friction},App.InfiniteList.prototype._updateX=function(t){t=Math.round(t);var e=0,i=this._items.length,n=this._itemSize,o=this._width,s=t-this._virtualPosition,p=0,r=Math.floor(t/n),h=0,a=0,l=this._model.length,c=0,d=null;for(this._virtualPosition=t;i>e;)d=this._items[e++],c=d.x+s,(0>c+n||c>o)&&(p=-Math.floor(c/o),c+=p*i*n,h=Math.floor(c/n),a=r>=0?(h-r%l)%l:(h-r)%l,0>a?a=l+a:a>=l&&(a=l-1),d.setModel(a,this._model[a],this._selectedModelIndex)),d.x=c},App.InfiniteList.prototype._updateY=function(t){t=Math.round(t);var e=0,i=this._items.length,n=this._itemSize,o=this._height,s=t-this._virtualPosition,p=0,r=Math.floor(t/n),h=0,a=0,l=this._model.length,c=0,d=null;for(this._virtualPosition=t;i>e;)d=this._items[e++],c=d.y+s,(0>c+n||c>o)&&(p=-Math.floor(c/o),c+=p*i*n,h=Math.floor(c/n),a=r>=0?(h-r%l)%l:(h-r)%l,0>a?a=l+a:a>=l&&(a=l-1),d.setModel(a,this._model[a],this._selectedModelIndex)),d.y=c},App.InfiniteList.prototype._updateLayout=function(t){var e=0,i=this._items.length,n=null,o=0,s=App.Direction;if(this._direction===s.X){for(;i>e;)n=this._items[e++],n.x=o,o=Math.round(o+n.boundingBox.width);t&&this._updateX(this.x)}else if(this._direction===s.Y){for(;i>e;)n=this._items[e++],n.y=o,o=Math.round(o+n.boundingBox.height);t&&this._updateY(this.y)}},App.InfiniteList.prototype.hitTest=function(t){return t>=this.y&&t<this.y+this.boundingBox.height},App.PopUpButton=function(t,e,i){PIXI.DisplayObjectContainer.call(this);var n=App.ModelLocator,o=App.ModelName,s=App.Button,p=PIXI.Graphics,r=App.FontStyle,h=App.ColorTheme,a=i.pixelRatio,l=i.width;this.boundingBox=new App.Rectangle(0,0,l,i.height),this._pixelRatio=a,this._popUpLayout=i.popUpLayout,this._backgroundColor=h.RED,this._transitionState=App.TransitionState.HIDDEN,this._eventsRegistered=App.EventLevel.NONE,this._overlay=this.addChild(new p),this._container=this.addChild(new p),this._popUpBackground=this._container.addChild(new p),this._labelField=this._container.addChild(new PIXI.Text(t,r.get(18,r.WHITE))),this._messageField=this._container.addChild(new PIXI.Text(e,r.get(18,r.BLUE,"center",r.LIGHT_CONDENSED))),this._cancelButton=this._container.addChild(new s("Cancel",{width:l,height:Math.round(50*a),pixelRatio:a,style:r.get(18,r.BLACK_LIGHT,null,r.LIGHT_CONDENSED),backgroundColor:h.GREY_DARK})),this._confirmButton=this._container.addChild(new s("Delete",{width:l,height:Math.round(30*a),pixelRatio:a,style:r.get(16,r.WHITE,null,r.LIGHT_CONDENSED),backgroundColor:h.RED})),this._containerMask=this._container.addChild(new p),this._container.mask=this._containerMask,this._ticker=n.getProxy(o.TICKER),this._eventDispatcher=new App.EventDispatcher(n.getProxy(o.EVENT_LISTENER_POOL)),this._tween=new App.TweenProxy(.3,App.Easing.outExpo,0,n.getProxy(o.EVENT_LISTENER_POOL)),this._updateLayout(0)},App.PopUpButton.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.PopUpButton.prototype.constructor=App.PopUpButton,App.PopUpButton.prototype.setPosition=function(t,e){this.boundingBox.x=t,this.boundingBox.y=e,this.x=t,this.y=e,this._overlay.x=-t,this._overlay.y=-e},App.PopUpButton.prototype.setMessage=function(t){this._messageField.setText(t)},App.PopUpButton.prototype.setPopUpLayout=function(t,e,i,n,o,s){this._popUpLayout.overlayWidth=i||this._popUpLayout.overlayWidth,this._popUpLayout.overlayHeight=n||this._popUpLayout.overlayHeight,this._popUpLayout.width=o||this._popUpLayout.width,this._popUpLayout.height=s||this._popUpLayout.height,this._popUpLayout.x=t||this._popUpLayout.x,this._popUpLayout.y=this._popUpLayout.height/2-this.boundingBox.y-e},App.PopUpButton.prototype.showPopUp=function(){var t=App.TransitionState;(this._transitionState===t.HIDDEN||this._transitionState===t.HIDING)&&(this._registerEventListeners(App.EventLevel.LEVEL_1),this._onShowStart(),this._transitionState=t.SHOWING,this._tween.restart())},App.PopUpButton.prototype.hidePopUp=function(t){var e=App.TransitionState;t?(this._unRegisterEventListeners(App.EventLevel.LEVEL_2),this._transitionState=e.HIDDEN,this._tween.stop(),this._updateLayout(0),this._onHideComplete()):(this._transitionState===e.SHOWN||this._transitionState===e.SHOWING)&&(this._unRegisterEventListeners(App.EventLevel.LEVEL_2),this._transitionState=e.HIDING,this._tween.start(!0))},App.PopUpButton.prototype._registerEventListeners=function(t){var e=App.EventLevel;t===e.LEVEL_1&&this._eventsRegistered!==e.LEVEL_1&&(this._ticker.addEventListener(App.EventType.TICK,this,this._onTick),this._tween.addEventListener(App.EventType.COMPLETE,this,this._onTweenComplete)),t===e.LEVEL_2&&this._eventsRegistered!==e.LEVEL_2&&(App.Device.TOUCH_SUPPORTED?this.tap=this._onClick:this.click=this._onClick,this.interactive=!0),this._eventsRegistered=t},App.PopUpButton.prototype._unRegisterEventListeners=function(t){var e=App.EventLevel;t===e.LEVEL_1&&(this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),this._tween.removeEventListener(App.EventType.COMPLETE,this,this._onTweenComplete),this._eventsRegistered=e.NONE),t===e.LEVEL_2&&(this.interactive=!1,App.Device.TOUCH_SUPPORTED?this.tap=null:this.click=null,this._eventsRegistered=e.LEVEL_1)},App.PopUpButton.prototype._onClick=function(t){var e=this.stage.getTouchData().getLocalPosition(this._container);this._cancelButton.hitTest(e)?this._eventDispatcher.dispatchEvent(App.EventType.CANCEL):this._confirmButton.hitTest(e)&&this._eventDispatcher.dispatchEvent(App.EventType.CONFIRM)},App.PopUpButton.prototype._onTick=function(){if(this._tween.isRunning()){var t=App.TransitionState;this._transitionState===t.SHOWING?this._updateLayout(this._tween.progress):this._transitionState===t.HIDING&&this._updateLayout(1-this._tween.progress)}},App.PopUpButton.prototype._onShowStart=function(){var t=Math.round(10*this._pixelRatio);this._cancelButton.x=t,this._confirmButton.x=t,App.GraphicUtils.drawRect(this._overlay,App.ColorTheme.BLUE,1,0,0,this._popUpLayout.overlayWidth,this._popUpLayout.overlayHeight),this._overlay.alpha=0,this._overlay.visible=!0,this._popUpBackground.alpha=0,this._popUpBackground.visible=!0,this._messageField.alpha=0,this._messageField.visible=!0,this._cancelButton.alpha=0,this._cancelButton.visible=!0,this._confirmButton.alpha=0,this._confirmButton.visible=!0},App.PopUpButton.prototype._updateLayout=function(t){var e=App.GraphicUtils,i=App.ColorTheme,n=this._pixelRatio,o=this.boundingBox.width,s=this.boundingBox.height,p=Math.round(o+(this._popUpLayout.width-o)*t),r=Math.round(s+(this._popUpLayout.height-s)*t),h=Math.round(10*n),a=Math.round(5*n),l=Math.round(p-2*h),c=this._cancelButton.boundingBox.height+this._confirmButton.boundingBox.height+h;e.drawRect(this._containerMask,i.BLACK,1,0,0,p,r),e.drawRoundedRect(this._container,i.RED,1,0,0,p,r,a),e.drawRoundedRect(this._popUpBackground,i.GREY,1,0,0,p,r,a),this._container.x=Math.round(this._popUpLayout.x*t),this._container.y=Math.round(this._popUpLayout.y*t),this._cancelButton.resize(l),this._cancelButton.y=r-c-h,this._confirmButton.resize(l),this._confirmButton.y=this._cancelButton.y+this._cancelButton.boundingBox.height+h,this._labelField.x=Math.round((p-this._labelField.width)/2),this._labelField.y=Math.round((r-this._labelField.height)/2),this._messageField.x=Math.round((p-this._messageField.width)/2),this._messageField.y=Math.round((r-c-h-this._messageField.height)/2),this._overlay.alpha=.8*t,this._popUpBackground.alpha=t,this._messageField.alpha=t,this._cancelButton.alpha=t,this._confirmButton.alpha=t,this._labelField.alpha=1-t},App.PopUpButton.prototype._onTweenComplete=function(){var t=App.TransitionState;this._transitionState===t.SHOWING?(this._transitionState=t.SHOWN,this._registerEventListeners(App.EventLevel.LEVEL_2),this._updateLayout(1)):this._transitionState===t.HIDING&&(this._transitionState=t.HIDDEN,this._updateLayout(0),this._onHideComplete())},App.PopUpButton.prototype._onHideComplete=function(){this._unRegisterEventListeners(App.EventLevel.LEVEL_1),this._overlay.visible=!1,this._popUpBackground.visible=!1,this._messageField.visible=!1,this._cancelButton.visible=!1,this._confirmButton.visible=!1,this._eventDispatcher.dispatchEvent(App.EventType.COMPLETE,{target:this,state:this._transitionState})},App.PopUpButton.prototype.hitTest=function(t){return t>=this.y&&t<this.y+this.boundingBox.height},App.PopUpButton.prototype.addEventListener=function(t,e,i){this._eventDispatcher.addEventListener(t,e,i)},App.PopUpButton.prototype.removeEventListener=function(t,e,i){this._eventDispatcher.removeEventListener(t,e,i)},App.AddTransactionScreen=function(t){App.InputScrollScreen.call(this,t);var e=App.TransactionOptionButton,i=App.TransactionToggleButton,n=App.FontStyle,o=App.ViewLocator.getViewSegment(App.ViewName.SKIN),s=t.pixelRatio,p=t.width,r=p-2*Math.round(10*s),h=Math.round(40*s),a={width:Math.round(p/3),height:Math.round(40*s),pixelRatio:s,style:n.get(14,n.BLUE),toggleStyle:n.get(14,n.WHITE)},l={pixelRatio:s,width:p,height:Math.round(50*s),skin:o.GREY_50,nameStyle:n.get(18,n.GREY_DARKER),valueStyle:n.get(18,n.BLUE,"right"),valueDetailStyle:n.get(14,n.BLUE)};this._pane=new App.Pane(App.ScrollPolicy.OFF,App.ScrollPolicy.AUTO,p,t.contentHeight,s,!1),this._container=new PIXI.DisplayObjectContainer,this._background=new PIXI.Graphics,this._transactionInput=new App.Input("00.00",24,r,h,s,!0),this._noteInput=new App.Input("Add Note",20,r,h,s,!0),this._separators=new PIXI.Graphics,this._deleteBackground=new PIXI.Sprite(o.GREY_60),this._deleteButton=new App.PopUpButton("Delete","Are you sure you want to\ndelete this transaction?",{width:r,height:h,pixelRatio:s,popUpLayout:{x:Math.round(10*s),y:0,width:Math.round(r-20*s),height:Math.round(t.height/2),overlayWidth:p,overlayHeight:0}}),this._optionList=new App.List(App.Direction.Y),this._accountOption=this._optionList.add(new e("account","Account",l)),this._categoryOption=this._optionList.add(new e("folder-app","Category",l)),this._timeOption=this._optionList.add(new e("calendar","Time",l)),this._methodOption=this._optionList.add(new e("credit-card","Method",l)),this._currencyOption=this._optionList.add(new e("currencies","Currency",l),!0),this._toggleButtonList=new App.List(App.Direction.X),this._typeToggle=this._toggleButtonList.add(new i("expense","Expense",a,{icon:"income",label:"Income",toggleColor:!1})),this._pendingToggle=this._toggleButtonList.add(new i("pending-app","Pending",a,{toggleColor:!0})),this._repeatToggle=this._toggleButtonList.add(new i("repeat-app","Repeat",a,{toggleColor:!0}),!0),this._renderAll=!0,this._transactionInput.restrict(/\d{1,}(\.\d*){0,1}/g),this._container.addChild(this._background),this._container.addChild(this._transactionInput),this._container.addChild(this._toggleButtonList),this._container.addChild(this._optionList),this._container.addChild(this._noteInput),this._container.addChild(this._separators),this._pane.setContent(this._container),this.addChild(this._pane),this._clickThreshold=10*s},App.AddTransactionScreen.prototype=Object.create(App.InputScrollScreen.prototype),App.AddTransactionScreen.prototype.constructor=App.AddTransactionScreen,App.AddTransactionScreen.prototype._render=function(){var t=this._layout.width,e=this._layout.pixelRatio,i=Math.round(10*e);if(this._renderAll){var n=App.ColorTheme,o=App.GraphicUtils,s=Math.round(60*e),p=this._toggleButtonList.boundingBox.height,r=Math.round(t/3),h=t-2*i,a=0;this._renderAll=!1,this._transactionInput.x=i,this._transactionInput.y=i,this._toggleButtonList.y=s,this._optionList.y=this._toggleButtonList.y+p,a=this._optionList.y+this._optionList.boundingBox.height,this._noteInput.x=i,this._noteInput.y=a+i,o.drawRects(this._separators,n.GREY_LIGHT,1,[i,s,h,1,r,s+i,1,p-2*i,2*r,s+i,1,p-2*i,i,a,h,1],!0,!1),a=this._noteInput.y+this._noteInput.boundingBox.height+i,this._deleteBackground.y=a,this._deleteButton.setPosition(i,this._deleteBackground.y+i),o.drawRects(this._separators,n.GREY_DARK,1,[i,s-1,h,1,r-1,s+i,1,p-2*i,2*r-1,s+i,1,p-2*i,i,s+p-1,h,1,i,a-1,h,1],!1,!0)}this._mode===App.ScreenMode.EDIT?(App.GraphicUtils.drawRect(this._background,App.ColorTheme.GREY,1,0,0,t,this._deleteButton.y+this._deleteButton.boundingBox.height+i),this._container.contains(this._deleteBackground)||this._container.addChild(this._deleteBackground),this._container.contains(this._deleteButton)||this._container.addChild(this._deleteButton)):(App.GraphicUtils.drawRect(this._background,App.ColorTheme.GREY,1,0,0,t,this._noteInput.y+this._noteInput.boundingBox.height+i),this._container.contains(this._deleteBackground)&&this._container.removeChild(this._deleteBackground),this._container.contains(this._deleteButton)&&this._container.removeChild(this._deleteButton))},App.AddTransactionScreen.prototype.update=function(t,e){this._model=t||this._model,this._mode=e||this._mode;var i=App.ModelLocator.getProxy(App.ModelName.SETTINGS),n=this._model.account?this._model.account:i.defaultAccount,o=this._model.category?this._model.category:i.defaultCategory,s=this._model.subCategory?this._model.subCategory:i.defaultSubCategory;this._transactionInput.setValue(this._model.amount),this._typeToggle.setState(this._model.type===App.TransactionType.INCOME),this._pendingToggle.setState(this._model.pending),this._repeatToggle.setState(this._model.repeat),this._accountOption.setValue(n.name),this._categoryOption.setValue(s.name,o.name),this._timeOption.setValue(App.DateUtils.getMilitaryTime(this._model.date),this._model.date.toDateString()),this._methodOption.setValue(this._model.method.name),this._currencyOption.setValue(this._model.currencyQuote),this._deleteButton.hidePopUp(!0),this._noteInput.setValue(this._model.note),this._render(),this._pane.resize(),this.resetScroll()},App.AddTransactionScreen.prototype.hide=function(){this._unRegisterDeleteButtonListeners(),App.Screen.prototype.hide.call(this)},App.AddTransactionScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._pane.enable()},App.AddTransactionScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._transactionInput.disable(),this._noteInput.disable(),this._pane.disable()},App.AddTransactionScreen.prototype._registerEventListeners=function(t){if(App.Screen.prototype._registerEventListeners.call(this,t),t===App.EventLevel.LEVEL_2){var e=App.EventType;this._scrollTween.addEventListener(e.COMPLETE,this,this._onScrollTweenComplete),this._transactionInput.addEventListener(e.BLUR,this,this._onInputBlur),this._noteInput.addEventListener(e.BLUR,this,this._onInputBlur)}},App.AddTransactionScreen.prototype._unRegisterEventListeners=function(t){App.Screen.prototype._unRegisterEventListeners.call(this,t);var e=App.EventType;this._scrollTween.removeEventListener(e.COMPLETE,this,this._onScrollTweenComplete),this._transactionInput.removeEventListener(e.BLUR,this,this._onInputBlur),this._noteInput.removeEventListener(e.BLUR,this,this._onInputBlur)},App.AddTransactionScreen.prototype._registerDeleteButtonListeners=function(){var t=App.EventType;this._deleteButton.addEventListener(t.CANCEL,this,this._onDeleteCancel),this._deleteButton.addEventListener(t.CONFIRM,this,this._onDeleteConfirm),this._deleteButton.addEventListener(t.COMPLETE,this,this._onHidePopUpComplete)},App.AddTransactionScreen.prototype._unRegisterDeleteButtonListeners=function(){var t=App.EventType;this._deleteButton.removeEventListener(t.CANCEL,this,this._onDeleteCancel),this._deleteButton.removeEventListener(t.CONFIRM,this,this._onDeleteConfirm),this._deleteButton.removeEventListener(t.COMPLETE,this,this._onHidePopUpComplete)},App.AddTransactionScreen.prototype._onDeleteCancel=function(){this._deleteButton.hidePopUp(),App.ViewLocator.getViewSegment(App.ViewName.HEADER).enableActions()},App.AddTransactionScreen.prototype._onDeleteConfirm=function(){var t=App.HeaderAction,e=this._getChangeTransactionData(App.ScreenName.TRANSACTIONS,0,null,t.MENU,t.ADD_TRANSACTION,App.ScreenTitle.TRANSACTIONS);this._onHidePopUpComplete(),App.ViewLocator.getViewSegment(App.ViewName.HEADER).enableActions(),App.ModelLocator.getProxy(App.ModelName.TRANSACTIONS).setCurrent(this._model),e.type=App.EventType.DELETE,App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,e)},App.AddTransactionScreen.prototype._onHidePopUpComplete=function(){this._unRegisterDeleteButtonListeners(),this.enable(),this._registerEventListeners(App.EventLevel.LEVEL_2)},App.AddTransactionScreen.prototype._onClick=function(){this._pane.cancelScroll();var t=this._scrollState===App.TransitionState.SHOWN&&this._scrollInput,e=this.stage.getTouchData(),i=e.getLocalPosition(this._container).y;if(this._transactionInput.hitTest(i))this._scrollInput=this._transactionInput,this._focusInput(this._scrollInput.y+this._container.y>0);else if(this._toggleButtonList.hitTest(i))t?this._scrollInput.blur():this._toggleButtonList.getItemUnderPoint(e).toggle();else if(this._optionList.hitTest(i)){t&&this._scrollInput.blur();var n=this._optionList.getItemUnderPoint(e);n===this._accountOption?this._onAccountOptionClick():n===this._categoryOption?this._onCategoryOptionClick():n===this._timeOption?this._onTimeOptionClick():n===this._methodOption?this._onMethodOptionClick():n===this._currencyOption&&this._onCurrencyOptionClick()}else this._noteInput.hitTest(i)?(this._scrollInput=this._noteInput,this._focusInput(!1)):this._deleteButton.hitTest(i)?t?this._scrollInput.blur():(this.disable(),this._unRegisterEventListeners(App.EventLevel.LEVEL_1),App.ViewLocator.getViewSegment(App.ViewName.HEADER).disableActions(),this._registerDeleteButtonListeners(),this._deleteButton.setPopUpLayout(0,this._container.y+this._layout.headerHeight,0,this._layout.contentHeight>this._container.height?this._layout.contentHeight:this._container.height),this._deleteButton.showPopUp()):t&&this._scrollInput.blur()},App.AddTransactionScreen.prototype._onAccountOptionClick=function(){App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,this._getChangeTransactionData(App.ScreenName.ACCOUNT,App.ScreenMode.SELECT,null,0,App.HeaderAction.NONE,App.ScreenTitle.SELECT_ACCOUNT))},App.AddTransactionScreen.prototype._onCategoryOptionClick=function(){var t=this._model.account;t&&t.lifeCycleState!==App.LifeCycleState.DELETED?App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,this._getChangeTransactionData(App.ScreenName.CATEGORY,App.ScreenMode.SELECT,t,0,App.HeaderAction.NONE,App.ScreenTitle.SELECT_CATEGORY)):App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,this._getChangeTransactionData(App.ScreenName.ACCOUNT,App.ScreenMode.SELECT,null,0,App.HeaderAction.NONE,App.ScreenTitle.SELECT_ACCOUNT))},App.AddTransactionScreen.prototype._onTimeOptionClick=function(){App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,this._getChangeTransactionData(App.ScreenName.SELECT_TIME,App.ScreenMode.SELECT,this._model.date,0,0,App.ScreenTitle.SELECT_TIME))},App.AddTransactionScreen.prototype._onMethodOptionClick=function(){this._methodOption.setValue(this._methodOption.getValue()===App.PaymentMethod.CASH?App.PaymentMethod.CREDIT_CARD:App.PaymentMethod.CASH)},App.AddTransactionScreen.prototype._onCurrencyOptionClick=function(){App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,this._getChangeTransactionData(App.ScreenName.CURRENCIES,App.ScreenMode.SELECT,null,0,App.HeaderAction.NONE,App.ScreenTitle.SELECT_CURRENCY))},App.AddTransactionScreen.prototype._onHeaderClick=function(t){var e=App.HeaderAction,i=this._getChangeTransactionData(App.ScreenName.TRANSACTIONS,0,App.ModelLocator.getProxy(App.ModelName.TRANSACTIONS).copySource().reverse(),e.MENU,e.ADD_TRANSACTION,App.ScreenTitle.TRANSACTIONS);this._scrollState===App.TransitionState.SHOWN&&this._scrollInput&&this._scrollInput.blur(),t===e.CONFIRM?(i.type=App.EventType.CONFIRM,App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,i)):(i.type=App.EventType.CANCEL,i.nextCommandData.screenName=App.ScreenName.BACK,i.nextCommandData.updateBackScreen=!0,App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,i))},App.AddTransactionScreen.prototype._getChangeTransactionData=function(t,e,i,n,o,s){return{type:App.EventType.CHANGE,amount:this._transactionInput.getValue(),transactionType:this._typeToggle.isSelected()?App.TransactionType.INCOME:App.TransactionType.EXPENSE,pending:this._pendingToggle.isSelected(),repeat:this._repeatToggle.isSelected(),method:this._methodOption.getValue(),note:this._noteInput.getValue(),nextCommand:new App.ChangeScreen,nextCommandData:App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(t,e,i,n,o,s)}},App.SwipeButton=function(t,e){PIXI.DisplayObjectContainer.call(this),this._width=t,this._interactionEnabled=!1,this._interactiveState=null,this._dragFriction=.5,this._snapForce=.5,this._openOffset=e,this._isOpen=!1,this._ticker=App.ModelLocator.getProxy(App.ModelName.TICKER)},App.SwipeButton.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.SwipeButton.prototype.constructor=App.SwipeButton,App.SwipeButton.prototype.disable=function(){this._disableInteraction(),this.close(!0)},App.SwipeButton.prototype._enableInteraction=function(){this._interactionEnabled||(this._interactionEnabled=!0,this._ticker.addEventListener(App.EventType.TICK,this,this._onTick),this.interactive=!0)},App.SwipeButton.prototype._disableInteraction=function(){this.interactive=!1,this._interactiveState=null,this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),this._interactionEnabled=!1},App.SwipeButton.prototype._onTick=function(){var t=App.InteractiveState;this._interactiveState===t.SWIPING?this._swipe():this._interactiveState===t.SNAPPING&&this._snap()},App.SwipeButton.prototype.swipeStart=function(t){var e=App.Direction,i=App.InteractiveState;this._interactiveState||(this._isOpen||t!==e.LEFT?this._isOpen&&t===e.RIGHT&&(this._interactiveState=i.SNAPPING,this._enableInteraction()):(this._interactiveState=i.SWIPING,this._enableInteraction()))},App.SwipeButton.prototype.swipeEnd=function(){this._interactiveState===App.InteractiveState.SWIPING&&(this._interactiveState=App.InteractiveState.SNAPPING)},App.SwipeButton.prototype._swipe=function(){if(this.stage&&!this._isOpen){var t=this.stage.getTouchPosition().x;if(-1e4>=t)return;this._updateSwipePosition(-Math.round(this._width*(1-t/this._width)*this._dragFriction))}},App.SwipeButton.prototype._snap=function(){var t=this._getSwipePosition(),e=Math.round(t*this._snapForce);t<-this._openOffset?e>=-this._openOffset?(this._isOpen=!0,this._disableInteraction(),this._updateSwipePosition(-this._openOffset)):this._updateSwipePosition(e):e>=-1?(this._isOpen=!1,this._disableInteraction(),this._updateSwipePosition(0)):this._updateSwipePosition(e)},App.SwipeButton.prototype.close=function(t){this._isOpen&&(t?(this._updateSwipePosition(0),this._isOpen=!1):(this._interactiveState=App.InteractiveState.SNAPPING,this._enableInteraction()))},App.SwipeButton.prototype._updateSwipePosition=function(t){},App.SwipeButton.prototype._getSwipePosition=function(){},App.ExpandButton=function(t,e,i){PIXI.DisplayObjectContainer.call(this);var n=App.ModelLocator,o=App.ModelName,s=n.getProxy(o.EVENT_LISTENER_POOL);this.boundingBox=new App.Rectangle(0,0,t,e),this._content=null,this._contentHeight=e,this._buttonHeight=e,this._useMask=i,this._updateBoundsInTransition=!1,this._eventsRegistered=!1,this._transitionState=App.TransitionState.CLOSED,this._expandTween=new App.TweenProxy(.4,App.Easing.outExpo,0,s),this._eventDispatcher=new App.EventDispatcher(s),this._ticker=n.getProxy(o.TICKER),this._useMask&&(this._mask=new PIXI.Graphics,this.mask=this._mask,this._updateMask(),this.addChild(this._mask))},App.ExpandButton.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.ExpandButton.prototype.constructor=App.ExpandButton,App.ExpandButton.prototype._setContent=function(t){this._content=t,this._contentHeight=this._content.boundingBox?this._content.boundingBox.height:this._content.height,this._content.visible=!1,this._content.y=this._buttonHeight},App.ExpandButton.prototype._registerEventListeners=function(){this._eventsRegistered||(this._eventsRegistered=!0,this._ticker.addEventListener(App.EventType.TICK,this,this._onTick),this._expandTween.addEventListener(App.EventType.COMPLETE,this,this._onTransitionComplete))},App.ExpandButton.prototype._unRegisterEventListeners=function(){this._expandTween.removeEventListener(App.EventType.COMPLETE,this,this._onTransitionComplete),this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),this._eventsRegistered=!1},App.ExpandButton.prototype._onTick=function(){this._expandTween.isRunning()&&this._updateTransition()},App.ExpandButton.prototype._updateTransition=function(){this._updateBounds(this._updateBoundsInTransition),this._useMask&&this._updateMask()},App.ExpandButton.prototype._onTransitionComplete=function(){var t=App.TransitionState;this._transitionState===t.OPENING?this._transitionState=t.OPEN:this._transitionState===t.CLOSING&&(this._transitionState=t.CLOSED,this._content.visible=!1),this._unRegisterEventListeners(),this._updateBounds(this._updateBoundsInTransition),this._useMask&&this._updateMask(),this.isInTransition()||(this._updateBoundsInTransition=!1,this._eventDispatcher.dispatchEvent(App.EventType.COMPLETE,this))},App.ExpandButton.prototype._updateBounds=function(t){var e=App.TransitionState;t&&(this._contentHeight=this._content.boundingBox?this._content.boundingBox.height:this._content.height),this._transitionState===e.OPENING?this.boundingBox.height=Math.round(this._buttonHeight+this._contentHeight*this._expandTween.progress):this._transitionState===e.OPEN?this.boundingBox.height=this._buttonHeight+this._contentHeight:this._transitionState===e.CLOSING?this.boundingBox.height=Math.round(this._buttonHeight+this._contentHeight*(1-this._expandTween.progress)):this._transitionState===e.CLOSED&&(this.boundingBox.height=this._buttonHeight)},App.ExpandButton.prototype._updateMask=function(){App.GraphicUtils.drawRect(this._mask,16711680,1,0,0,this.boundingBox.width,this.boundingBox.height)},App.ExpandButton.prototype.onClick=function(t){var e=App.TransitionState;this._transitionState===e.CLOSED||this._transitionState===e.CLOSING?this.open():(this._transitionState===e.OPEN||this._transitionState===e.OPENING)&&this.close()},App.ExpandButton.prototype.isOpen=function(){return this._transitionState!==App.TransitionState.CLOSED},App.ExpandButton.prototype.isInTransition=function(){return this._transitionState===App.TransitionState.OPENING||this._transitionState===App.TransitionState.CLOSING},App.ExpandButton.prototype.open=function(t){var e=App.TransitionState;(this._transitionState===e.CLOSED||this._transitionState===e.CLOSING)&&(this._registerEventListeners(),this._content.visible=!0,this._transitionState=e.OPENING,this._updateBoundsInTransition=t,this._expandTween.restart())},App.ExpandButton.prototype.close=function(t,e){var i=App.TransitionState,n=App.EventType;t?(this._transitionState=i.CLOSING,this._updateBoundsInTransition=e,this._expandTween.stop(),this._onTransitionComplete()):this._transitionState===i.OPEN||this._transitionState===i.OPENING?(this._registerEventListeners(),this._transitionState=i.CLOSING,this._updateBoundsInTransition=e,this._expandTween.start(!0)):this._eventDispatcher.dispatchEvent(n.COMPLETE,this)},App.ExpandButton.prototype.addEventListener=function(t,e,i){this._eventDispatcher.addEventListener(t,e,i)},App.ExpandButton.prototype.removeEventListener=function(t,e,i){this._eventDispatcher.removeEventListener(t,e,i)},App.EditScreen=function(t){App.Screen.call(this,t,.4);var e=t.pixelRatio,i=t.width-Math.round(20*e),n=Math.round(40*e);this._target=null,this._background=this.addChild(new PIXI.Graphics),this._input=this.addChild(new App.Input("",20,i,n,e,!0)),this._deleteButton=new App.PopUpButton("Delete","",{width:i,height:n,pixelRatio:e,popUpLayout:{x:Math.round(10*e),y:0,width:Math.round(i-20*e),height:Math.round(t.height/2),overlayWidth:t.width,overlayHeight:0}}),this._renderAll=!0},App.EditScreen.prototype=Object.create(App.Screen.prototype),App.EditScreen.prototype.constructor=App.EditScreen,App.EditScreen.prototype._render=function(){var t=App.GraphicUtils,e=App.ColorTheme,i=App.ScreenMode,n=this._layout.pixelRatio,o=Math.round(10*n),s=Math.round(60*n),p=this._layout.width-2*o;this._renderAll&&(this._renderAll=!1,this._input.x=o,this._input.y=o,this._deleteButton.setPosition(o,s+o)),this._mode===i.EDIT?(this.contains(this._deleteButton)||this.addChild(this._deleteButton),t.drawRects(this._background,e.GREY,1,[0,0,p+2*o,2*s],!0,!1),t.drawRects(this._background,e.GREY_DARK,1,[o,s-1,p,1],!1,!1),t.drawRects(this._background,e.GREY_LIGHT,1,[o,s,p,1],!1,!0)):this._mode===i.ADD&&(this.contains(this._deleteButton)&&this.removeChild(this._deleteButton),t.drawRect(this._background,e.GREY,1,0,0,p+2*o,s))},App.EditScreen.prototype.hide=function(){this._unRegisterDeleteButtonListeners(),App.Screen.prototype.hide.call(this)},App.EditScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._input.enable()},App.EditScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._input.disable()},App.EditScreen.prototype.update=function(t,e){this._model=t,this._mode=e,this._target=this._model instanceof App.Account?App.Account:App.SubCategory,this._deleteButton.hidePopUp(!0),this._target===App.Account?(this._input.setValue(this._model.name),this._deleteButton.setMessage("Are you sure you want to\ndelete this account with all its\ndata and categories?")):this._target===App.SubCategory&&this._model.subCategory&&(this._input.setValue(this._model.subCategory.name),this._deleteButton.setMessage("Are you sure you want to\ndelete this sub-category?")),this._render()},App.EditScreen.prototype._registerDeleteButtonListeners=function(){var t=App.EventType;this._deleteButton.addEventListener(t.CANCEL,this,this._onDeleteCancel),this._deleteButton.addEventListener(t.CONFIRM,this,this._onDeleteConfirm),this._deleteButton.addEventListener(t.COMPLETE,this,this._onHidePopUpComplete)},App.EditScreen.prototype._unRegisterDeleteButtonListeners=function(){var t=App.EventType;this._deleteButton.removeEventListener(t.CANCEL,this,this._onDeleteCancel),this._deleteButton.removeEventListener(t.CONFIRM,this,this._onDeleteConfirm),this._deleteButton.removeEventListener(t.COMPLETE,this,this._onHidePopUpComplete)},App.EditScreen.prototype._onDeleteCancel=function(){this._deleteButton.hidePopUp(),App.ViewLocator.getViewSegment(App.ViewName.HEADER).enableActions();

},App.EditScreen.prototype._onDeleteConfirm=function(){var t=App.EventType,e=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.BACK);this._onHidePopUpComplete(),App.ViewLocator.getViewSegment(App.ViewName.HEADER).enableActions(),e.updateBackScreen=!0,this._target===App.Account?App.Controller.dispatchEvent(t.CHANGE_ACCOUNT,{type:t.DELETE,account:this._model,nextCommand:new App.ChangeScreen,nextCommandData:e}):this._target===App.SubCategory&&App.Controller.dispatchEvent(t.CHANGE_SUB_CATEGORY,{type:t.DELETE,subCategory:this._model.subCategory,category:this._model.category,nextCommand:new App.ChangeCategory,nextCommandData:{type:t.CHANGE,category:this._model.category,nextCommand:new App.ChangeScreen,nextCommandData:e}})},App.EditScreen.prototype._onHidePopUpComplete=function(){this._unRegisterDeleteButtonListeners(),this.enable(),this._registerEventListeners(App.EventLevel.LEVEL_2)},App.EditScreen.prototype._onClick=function(){this._deleteButton.hitTest(this.stage.getTouchData().getLocalPosition(this).y)&&(this._input.isFocused()?this._input.blur():(this.disable(),this._unRegisterEventListeners(App.EventLevel.LEVEL_1),App.ViewLocator.getViewSegment(App.ViewName.HEADER).disableActions(),this._registerDeleteButtonListeners(),this._deleteButton.setPopUpLayout(0,this._layout.headerHeight,0,this._layout.contentHeight>this._background.height?this._layout.contentHeight:this._background.height),this._deleteButton.showPopUp()))},App.EditScreen.prototype._onHeaderClick=function(t){var e=App.EventType,i=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.BACK);this._input.blur(),t===App.HeaderAction.CONFIRM?(i.updateBackScreen=!0,this._target===App.Account?App.Controller.dispatchEvent(e.CHANGE_ACCOUNT,{type:e.CHANGE,account:this._model,name:this._input.getValue(),nextCommand:new App.ChangeScreen,nextCommandData:i}):this._target===App.SubCategory&&App.Controller.dispatchEvent(e.CHANGE_SUB_CATEGORY,{type:e.CHANGE,subCategory:this._model.subCategory,category:this._model.category,name:this._input.getValue(),nextCommand:new App.ChangeCategory,nextCommandData:{type:e.CHANGE,category:this._model.category,nextCommand:new App.ChangeScreen,nextCommandData:i}})):t===App.HeaderAction.CANCEL&&App.Controller.dispatchEvent(e.CHANGE_SCREEN,i)},App.Screen=function(t,e){PIXI.DisplayObjectContainer.call(this);var i=App.ModelLocator,n=App.ModelName,o=t.pixelRatio;this._model=null,this._layout=t,this._enabled=!1,this._eventsRegistered=App.EventLevel.NONE,this._transitionState=App.TransitionState.HIDDEN,this._interactiveState=null,this._mouseDownPosition=null,this._mouseX=0,this._mouseY=0,this._leftSwipeThreshold=15*o,this._rightSwipeThreshold=5*o,this._clickThreshold=5*o,this._swipeEnabled=!1,this._preferScroll=!0,this._mode=App.ScreenMode.DEFAULT,this._ticker=i.getProxy(n.TICKER),this._eventDispatcher=new App.EventDispatcher(i.getProxy(n.EVENT_LISTENER_POOL)),this._showHideTween=new App.TweenProxy(e,App.Easing.outExpo,0,i.getProxy(n.EVENT_LISTENER_POOL)),this.alpha=0},App.Screen.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.Screen.prototype.constructor=App.Screen,App.Screen.prototype.show=function(){var t=App.TransitionState;(this._transitionState===t.HIDDEN||this._transitionState===t.HIDING)&&(this.enable(),this._transitionState=t.SHOWING,this._showHideTween.restart(),this.visible=!0)},App.Screen.prototype.hide=function(){var t=App.TransitionState;(this._transitionState===t.SHOWN||this._transitionState===t.SHOWING)&&(this.disable(),this._transitionState=t.HIDING,this._showHideTween.start(!0))},App.Screen.prototype.enable=function(){this._enabled||(this._registerEventListeners(App.EventLevel.LEVEL_1),this._enabled=!0)},App.Screen.prototype.disable=function(){this._unRegisterEventListeners(App.EventLevel.LEVEL_2),this._enabled=!1,this._interactiveState=null},App.Screen.prototype.update=function(t,e){this._mode=e},App.Screen.prototype.addEventListener=function(t,e,i){this._eventDispatcher.addEventListener(t,e,i)},App.Screen.prototype.removeEventListener=function(t,e,i){this._eventDispatcher.removeEventListener(t,e,i)},App.Screen.prototype._registerEventListeners=function(t){var e=App.EventLevel;t===e.LEVEL_1&&this._eventsRegistered!==e.LEVEL_1&&(this._ticker.addEventListener(App.EventType.TICK,this,this._onTick),this._showHideTween.addEventListener(App.EventType.COMPLETE,this,this._onTweenComplete)),t===e.LEVEL_2&&this._eventsRegistered!==e.LEVEL_2&&(App.Device.TOUCH_SUPPORTED?(this.touchstart=this._onPointerDown,this.touchend=this._onPointerUp,this.touchendoutside=this._onPointerUp):(this.mousedown=this._onPointerDown,this.mouseup=this._onPointerUp,this.mouseupoutside=this._onPointerUp),App.ViewLocator.getViewSegment(App.ViewName.HEADER).addEventListener(App.EventType.CLICK,this,this._onHeaderClick),this.interactive=!0),this._eventsRegistered=t},App.Screen.prototype._unRegisterEventListeners=function(t){var e=App.EventLevel;t===e.LEVEL_1&&(this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),this._showHideTween.removeEventListener(App.EventType.COMPLETE,this,this._onTweenComplete),this._eventsRegistered=e.NONE),t===e.LEVEL_2&&(this.interactive=!1,App.ViewLocator.getViewSegment(App.ViewName.HEADER).removeEventListener(App.EventType.CLICK,this,this._onHeaderClick),App.Device.TOUCH_SUPPORTED?(this.touchstart=null,this.touchend=null,this.touchendoutside=null):(this.mousedown=null,this.mouseup=null,this.mouseupoutside=null),this._eventsRegistered=e.LEVEL_1)},App.Screen.prototype._onTick=function(){if(this._showHideTween.isRunning()){var t=App.TransitionState;this._transitionState===t.SHOWING?this.alpha=this._showHideTween.progress:this._transitionState===t.HIDING&&(this.alpha=1-this._showHideTween.progress)}this._swipeEnabled&&this._interactiveState===App.InteractiveState.DRAGGING&&this._drag()},App.Screen.prototype._onTweenComplete=function(){var t=App.TransitionState;this._transitionState===t.SHOWING?(this._transitionState=t.SHOWN,this.alpha=1,this._registerEventListeners(App.EventLevel.LEVEL_2)):this._transitionState===t.HIDING&&(this._transitionState=t.HIDDEN,this._unRegisterEventListeners(App.EventLevel.LEVEL_1),this.alpha=0,this.visible=!1,this._eventDispatcher.dispatchEvent(App.EventType.COMPLETE,{target:this,state:this._transitionState}))},App.Screen.prototype._onPointerDown=function(t){this.stage&&(this._mouseDownPosition=t.getLocalPosition(this.stage),this._mouseX=this._mouseDownPosition.x,this._mouseY=this._mouseDownPosition.y),this._swipeEnabled&&(this._interactiveState=App.InteractiveState.DRAGGING)},App.Screen.prototype._onPointerUp=function(t){if(this._swipeEnabled&&(this._interactiveState===App.InteractiveState.SWIPING&&this._swipeEnd(),this._interactiveState=null),this.stage&&this._mouseDownPosition&&this._enabled){var e=this._mouseDownPosition.x,i=this._mouseDownPosition.y;this._mouseDownPosition=t.getLocalPosition(this.stage,this._mouseDownPosition);var n=e-this._mouseDownPosition.x,o=i-this._mouseDownPosition.y,s=n*n-o*o,p=App.TransitionState;Math.abs(s)<this._clickThreshold&&(this._transitionState===p.SHOWING||this._transitionState===p.SHOWN)&&this._onClick(),this._mouseDownPosition=null}},App.Screen.prototype._drag=function(){var t=App.InteractiveState;if(this._interactiveState===t.DRAGGING&&this.stage&&this._mouseX){var e=this.stage.getTouchPosition(),i=e.x,n=e.y;this._mouseX-i>this._leftSwipeThreshold?(this._interactiveState=t.SWIPING,this._swipeStart(Math.abs(this._mouseY-n)>Math.abs(this._mouseX-i)&&this._preferScroll,App.Direction.LEFT)):i-this._mouseX>this._rightSwipeThreshold&&(this._interactiveState=t.SWIPING,this._swipeStart(Math.abs(this._mouseY-n)>Math.abs(this._mouseX-i)&&this._preferScroll,App.Direction.RIGHT)),this._mouseX=i,this._mouseY=n}},App.Screen.prototype._onClick=function(){this._eventDispatcher.dispatchEvent(App.EventType.CLICK)},App.Screen.prototype._onHeaderClick=function(t){},App.Screen.prototype._swipeStart=function(t){},App.Screen.prototype._swipeEnd=function(t){},App.LifeCycleState={CREATED:1,ACTIVE:2,DELETED:3},App.InputScrollScreen=function(t){App.Screen.call(this,t,.4),this._scrollTween=new App.TweenProxy(.5,App.Easing.outExpo,0,App.ModelLocator.getProxy(App.ModelName.EVENT_LISTENER_POOL)),this._scrollState=App.TransitionState.HIDDEN,this._scrollInput=null,this._scrollPosition=0,this._inputPadding=Math.round(10*t.pixelRatio)},App.InputScrollScreen.prototype=Object.create(App.Screen.prototype),App.InputScrollScreen.prototype.constructor=App.InputScrollScreen,App.InputScrollScreen.prototype._onTick=function(){App.Screen.prototype._onTick.call(this),this._scrollTween.isRunning()&&this._onScrollTweenUpdate()},App.InputScrollScreen.prototype._onScrollTweenUpdate=function(){var t=App.TransitionState;this._scrollState===t.SHOWING?this._pane.y=-Math.round((this._scrollPosition+this._container.y)*this._scrollTween.progress):this._scrollState===t.HIDING&&(this._pane.y=-Math.round((this._scrollPosition+this._container.y)*(1-this._scrollTween.progress)))},App.InputScrollScreen.prototype._onScrollTweenComplete=function(){var t=App.TransitionState;this._onScrollTweenUpdate(),this._scrollState===t.SHOWING?(this._scrollState=t.SHOWN,this._scrollInput.enable(),this._scrollInput.focus()):this._scrollState===t.HIDING&&(this._scrollState=t.HIDDEN,this._pane.enable(),App.ViewLocator.getViewSegment(App.ViewName.APPLICATION_VIEW).scrollTo(0))},App.InputScrollScreen.prototype._focusInput=function(t){var e=App.TransitionState;(this._scrollState===e.HIDDEN||this._scrollState===e.HIDING)&&(this._scrollState=e.SHOWING,this._pane.disable(),t?(this._scrollPosition=0,this._onScrollTweenComplete()):(this._scrollPosition=this._scrollInput.y-this._inputPadding,this._scrollTween.start()))},App.InputScrollScreen.prototype._onInputBlur=function(){var t=App.TransitionState;(this._scrollState===t.SHOWN||this._scrollState===t.SHOWING)&&(this._scrollState=t.HIDING,this._scrollInput.disable(),this._scrollPosition>0?this._scrollTween.restart():(this._pane.resetScroll(),this._onScrollTweenComplete()))},App.InputScrollScreen.prototype.resetScroll=function(){this._scrollInput&&this._scrollInput.blur(),this._scrollTween.stop(),this._pane.y=0,this._pane.resetScroll(),App.ViewLocator.getViewSegment(App.ViewName.APPLICATION_VIEW).scrollTo(0)},App.SelectTimeScreen=function(t){App.InputScrollScreen.call(this,t);var e=t.pixelRatio,i=t.width,n=App.ScrollPolicy;this._pane=new App.Pane(n.OFF,n.AUTO,i,t.contentHeight,e,!1),this._container=new PIXI.DisplayObjectContainer,this._inputBackground=new PIXI.Graphics,this._input=new App.TimeInput("00:00",30,i-Math.round(20*e),Math.round(40*e),e),this._header=new App.ListHeader("Select Date",i,e),this._calendar=new App.Calendar(i,e),this._render(),this._container.addChild(this._inputBackground),this._container.addChild(this._header),this._container.addChild(this._calendar),this._container.addChild(this._input),this._pane.setContent(this._container),this.addChild(this._pane)},App.SelectTimeScreen.prototype=Object.create(App.InputScrollScreen.prototype),App.SelectTimeScreen.prototype.constructor=App.SelectTimeScreen,App.SelectTimeScreen.prototype._render=function(){var t=App.ColorTheme,e=App.GraphicUtils,i=this._layout.pixelRatio,n=Math.round(60*i),o=this._layout.width;e.drawRects(this._inputBackground,t.GREY,1,[0,0,o,n],!0,!1),e.drawRects(this._inputBackground,t.GREY_DARK,1,[0,n-1,o,1],!1,!0),this._input.x=Math.round(10*i),this._input.y=Math.round((n-this._input.height)/2),this._header.y=n,this._calendar.y=Math.round(this._header.y+this._header.height)},App.SelectTimeScreen.prototype.enable=function(){App.InputScrollScreen.prototype.enable.call(this),this._pane.enable()},App.SelectTimeScreen.prototype.disable=function(){this.resetScroll(),App.InputScrollScreen.prototype.disable.call(this),this._input.disable(),this._pane.disable()},App.SelectTimeScreen.prototype.update=function(t,e){this._input.setValue(App.DateUtils.getMilitaryTime(t)),this._calendar.update(t)},App.SelectTimeScreen.prototype._registerEventListeners=function(t){if(App.Screen.prototype._registerEventListeners.call(this,t),t===App.EventLevel.LEVEL_2){var e=App.EventType;this._scrollTween.addEventListener(e.COMPLETE,this,this._onScrollTweenComplete),this._input.addEventListener(e.BLUR,this,this._onInputBlur)}},App.SelectTimeScreen.prototype._unRegisterEventListeners=function(t){App.Screen.prototype._unRegisterEventListeners.call(this,t);var e=App.EventType;this._scrollTween.removeEventListener(e.COMPLETE,this,this._onScrollTweenComplete),this._input.removeEventListener(e.BLUR,this,this._onInputBlur)},App.SelectTimeScreen.prototype._onClick=function(){this._pane.cancelScroll();var t=this._scrollState===App.TransitionState.SHOWN&&this._scrollInput,e=this.stage.getTouchData(),i=e.getLocalPosition(this._container).y;this._input.hitTest(i)?(this._scrollInput=this._input,this._focusInput(this._input.y+this._container.y>0)):t?this._scrollInput.blur():this._calendar.onClick()},App.SelectTimeScreen.prototype._onHeaderClick=function(t){var e=App.HeaderAction,i=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.BACK);this._scrollState===App.TransitionState.SHOWN&&this._scrollInput&&this._scrollInput.blur(),t===e.CANCEL?App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,i):t===e.CONFIRM&&(i.updateBackScreen=!0,App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,{type:App.EventType.CHANGE,date:this._calendar.getSelectedDate(),time:this._input.getValue(),nextCommand:new App.ChangeScreen,nextCommandData:i}))},App.EditCategoryScreen=function(t){App.InputScrollScreen.call(this,t);var e=App.ScrollPolicy,i=App.InfiniteList,n=App.Direction,o=App.IconSample,s=App.FontStyle,p=App.Input,r=t.pixelRatio,h=t.width,a=h-Math.round(20*r),l=Math.round(40*r),c=App.ModelLocator.getProxy(App.ModelName.ICONS),d=Math.round(64*r),_={width:h,height:l,pixelRatio:r,addButtonSkin:App.ViewLocator.getViewSegment(App.ViewName.SKIN).GREY_40,addLabelStyle:s.get(14,s.GREY_DARK),displayHeader:!0};this._pane=new App.Pane(e.OFF,e.AUTO,h,t.contentHeight,r,!1),this._container=new PIXI.DisplayObjectContainer,this._background=this._container.addChild(new PIXI.Graphics),this._colorStripe=this._container.addChild(new PIXI.Graphics),this._icon=PIXI.Sprite.fromFrame("currencies"),this._iconResizeRatio=Math.round(32*r)/this._icon.height,this._input=this._container.addChild(new p("Enter Category Name",20,h-Math.round(70*r),Math.round(40*r),r,!0)),this._separators=this._container.addChild(new PIXI.Graphics),this._colorList=this._container.addChild(new i(this._getColorSamples(),App.ColorSample,n.X,h,Math.round(50*r),r)),this._topIconList=this._container.addChild(new i(c.slice(0,Math.floor(c.length/2)),o,n.X,h,d,r)),this._bottomIconList=this._container.addChild(new i(c.slice(Math.floor(c.length/2)),o,n.X,h,d,r)),this._subCategoryList=this._container.addChild(new App.SubCategoryList(_)),this._budgetHeader=this._container.addChild(new App.ListHeader("Budget",h,r)),this._budget=this._container.addChild(new p("Enter Budget",20,a,l,r,!0)),this._deleteButton=new App.PopUpButton("Delete","Are you sure you want to\ndelete this category with all its\ndata and sub-categories?",{width:a,height:l,pixelRatio:r,popUpLayout:{x:Math.round(10*r),y:0,width:Math.round(a-20*r),height:Math.round(t.height/2),overlayWidth:h,overlayHeight:0}}),this._renderAll=!0,this._budget.restrict(/\d{1,}(\.\d{0,2}){0,1}/g),this._pane.setContent(this._container),this.addChild(this._pane),this._swipeEnabled=!0},App.EditCategoryScreen.prototype=Object.create(App.InputScrollScreen.prototype),App.EditCategoryScreen.prototype.constructor=App.EditCategoryScreen,App.EditCategoryScreen.prototype._render=function(){var t=App.GraphicUtils,e=App.ColorTheme,i=this._layout.pixelRatio,n=this._layout.width,o=Math.round(60*i),s=this._colorList.boundingBox.height,p=n-2*this._inputPadding,r=this._getSelectedIcon(),h=this._colorList.getSelectedValue(),a=0;t.drawRect(this._colorStripe,"0x"+h,1,0,0,Math.round(4*i),Math.round(59*i)),this._icon&&(this._icon.setTexture(PIXI.TextureCache[r]),this._icon.tint=parseInt(h,16)),this._renderAll&&(this._renderAll=!1,this._icon=PIXI.Sprite.fromFrame(r),this._iconResizeRatio=Math.round(32*i)/this._icon.height,this._icon.scale.x=this._iconResizeRatio,this._icon.scale.y=this._iconResizeRatio,this._icon.x=Math.round(15*i),this._icon.y=Math.round((o-this._icon.height)/2),this._icon.tint=parseInt(h,16),this._container.addChild(this._icon),this._input.x=Math.round(60*i),this._input.y=Math.round((o-this._input.height)/2),this._colorList.y=o,this._topIconList.y=o+this._colorList.boundingBox.height,this._bottomIconList.y=this._topIconList.y+this._topIconList.boundingBox.height,this._subCategoryList.y=this._bottomIconList.y+this._bottomIconList.boundingBox.height,this._budget.x=this._inputPadding,this._separators.x=this._inputPadding),this._budgetHeader.y=this._subCategoryList.y+this._subCategoryList.boundingBox.height,a=this._budgetHeader.y+this._budgetHeader.height,this._budget.y=a+this._inputPadding,this._mode===App.ScreenMode.EDIT?(a+=o,this._deleteButton.setPosition(this._inputPadding,a+this._inputPadding),this._container.contains(this._deleteButton)||this._container.addChild(this._deleteButton)):this._container.contains(this._deleteButton)&&this._container.removeChild(this._deleteButton),t.drawRect(this._background,e.GREY,1,0,0,n,a+o),t.drawRects(this._separators,e.GREY_DARK,1,[0,o-1,p,1,0,o+s,p,1,0,a-1,p,1],!0,!1),t.drawRects(this._separators,e.GREY_LIGHT,1,[0,o,p,1,0,o+s+1,p,1,0,a,p,1],!1,!0)},App.EditCategoryScreen.prototype.hide=function(){this._unRegisterDeleteButtonListeners(),App.Screen.prototype.hide.call(this)},App.EditCategoryScreen.prototype.update=function(t,e){this._model=t,this._mode=e,this._input.setValue(this._model.name),this._model.color?this._colorList.selectItemByValue(this._model.color):this._colorList.selectItemByPosition(0),this._model.icon?(this._topIconList.selectItemByValue(this._model.icon),this._bottomIconList.selectItemByValue(this._model.icon)):(this._topIconList.selectItemByPosition(0),this._bottomIconList.selectItemByValue(-1e4)),this._subCategoryList.update(this._model,App.ScreenMode.EDIT),this._budget.setValue(this._model.budget),this._deleteButton.hidePopUp(!0),this._render(),this._pane.resize(),this.resetScroll()},App.EditCategoryScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._colorList.enable(),this._topIconList.enable(),this._bottomIconList.enable(),this._pane.enable()},App.EditCategoryScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._input.disable(),this._colorList.disable(),this._topIconList.disable(),this._bottomIconList.disable(),this._budget.disable(),this._pane.disable()},App.EditCategoryScreen.prototype._registerEventListeners=function(t){if(App.Screen.prototype._registerEventListeners.call(this,t),t===App.EventLevel.LEVEL_2){var e=App.EventType;this._scrollTween.addEventListener(e.COMPLETE,this,this._onScrollTweenComplete),this._input.addEventListener(e.BLUR,this,this._onInputBlur),this._budget.addEventListener(e.BLUR,this,this._onInputBlur)}},App.EditCategoryScreen.prototype._unRegisterEventListeners=function(t){App.Screen.prototype._unRegisterEventListeners.call(this,t);var e=App.EventType;this._scrollTween.removeEventListener(e.COMPLETE,this,this._onScrollTweenComplete),this._budget.removeEventListener(e.BLUR,this,this._onInputBlur),this._input.removeEventListener(e.BLUR,this,this._onInputBlur)},App.EditCategoryScreen.prototype._registerDeleteButtonListeners=function(){var t=App.EventType;this._deleteButton.addEventListener(t.CANCEL,this,this._onDeleteCancel),this._deleteButton.addEventListener(t.CONFIRM,this,this._onDeleteConfirm),this._deleteButton.addEventListener(t.COMPLETE,this,this._onHidePopUpComplete)},App.EditCategoryScreen.prototype._unRegisterDeleteButtonListeners=function(){var t=App.EventType;this._deleteButton.removeEventListener(t.CANCEL,this,this._onDeleteCancel),this._deleteButton.removeEventListener(t.CONFIRM,this,this._onDeleteConfirm),this._deleteButton.removeEventListener(t.COMPLETE,this,this._onHidePopUpComplete)},App.EditCategoryScreen.prototype._onDeleteCancel=function(){this._deleteButton.hidePopUp(),App.ViewLocator.getViewSegment(App.ViewName.HEADER).enableActions()},App.EditCategoryScreen.prototype._onDeleteConfirm=function(){var t=App.EventType,e=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.BACK);this._onHidePopUpComplete(),App.ViewLocator.getViewSegment(App.ViewName.HEADER).enableActions(),e.updateBackScreen=!0,App.Controller.dispatchEvent(t.CHANGE_CATEGORY,{type:t.DELETE,category:this._model,nextCommand:new App.ChangeScreen,nextCommandData:e})},App.EditCategoryScreen.prototype._onHidePopUpComplete=function(){this._unRegisterDeleteButtonListeners(),this.enable(),this._registerEventListeners(App.EventLevel.LEVEL_2)},App.EditCategoryScreen.prototype._onClick=function(){this._pane.cancelScroll();var t=this._scrollState===App.TransitionState.SHOWN&&this._scrollInput,e=this.stage.getTouchData(),i=e.getLocalPosition(this._container),n=i.y;if(this._input.hitTest(n))this._scrollInput=this._input,this._focusInput(this._scrollInput.y+this._container.y>0),this._subCategoryList.closeButtons();else if(this._colorList.hitTest(n))this._onSampleClick(this._colorList,i.x,t);else if(this._topIconList.hitTest(n))this._onSampleClick(this._topIconList,i.x,t);else if(this._bottomIconList.hitTest(n))this._onSampleClick(this._bottomIconList,i.x,t);else if(this._subCategoryList.hitTest(n)){var o=this._subCategoryList.getItemUnderPoint(e);o&&(t&&this._scrollInput.blur(),o instanceof App.AddNewButton?App.Controller.dispatchEvent(App.EventType.CHANGE_SUB_CATEGORY,{type:App.EventType.CREATE,category:this._model,nextCommand:new App.ChangeScreen,nextCommandData:App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.EDIT,App.ScreenMode.ADD,null,0,0,App.ScreenTitle.ADD_SUB_CATEGORY)}):o.onClick(e,this._model)),this._subCategoryList.closeButtons()}else this._budget.hitTest(n)?(this._scrollInput=this._budget,this._focusInput(!1),this._subCategoryList.closeButtons()):this._deleteButton.hitTest(n)?t?this._scrollInput.blur():(this.disable(),this._unRegisterEventListeners(App.EventLevel.LEVEL_1),App.ViewLocator.getViewSegment(App.ViewName.HEADER).disableActions(),this._registerDeleteButtonListeners(),this._deleteButton.setPopUpLayout(0,this._container.y+this._layout.headerHeight,0,this._layout.contentHeight>this._container.height?this._layout.contentHeight:this._container.height),this._deleteButton.showPopUp()):t&&this._scrollInput.blur()},App.EditCategoryScreen.prototype._onSampleClick=function(t,e,i){i&&this._scrollInput.blur(),t.cancelScroll();var n=t.selectItemByPosition(e);n instanceof App.ColorSample?(App.GraphicUtils.drawRect(this._colorStripe,"0x"+n.getValue(),1,0,0,this._colorStripe.width,this._colorStripe.height),this._icon.tint=parseInt(n.getValue(),16)):n instanceof App.IconSample&&(this._icon.setTexture(PIXI.TextureCache[n.getValue()]),(t===this._topIconList?this._bottomIconList:this._topIconList).selectItemByPosition(-1e4))},App.EditCategoryScreen.prototype._onHeaderClick=function(t){var e=App.EventType,i=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.BACK),n={type:e.CONFIRM,category:this._model,name:this._input.getValue(),color:this._colorList.getSelectedValue(),icon:this._getSelectedIcon(),budget:this._budget.getValue(),nextCommand:new App.ChangeScreen,nextCommandData:i};this._scrollState===App.TransitionState.SHOWN&&this._scrollInput&&this._scrollInput.blur(),t===App.HeaderAction.CONFIRM?(this._model.clearSavedStates(),i.updateBackScreen=!0,App.Controller.dispatchEvent(e.CHANGE_CATEGORY,n)):t===App.HeaderAction.CANCEL&&(n.type=e.CANCEL,App.Controller.dispatchEvent(e.CHANGE_CATEGORY,n))},App.EditCategoryScreen.prototype._getSelectedIcon=function(){var t=this._topIconList.getSelectedValue();return t||(t=this._bottomIconList.getSelectedValue()),t},App.EditCategoryScreen.prototype._swipeStart=function(t,e){t||this._pane.cancelScroll(),this._subCategoryList.swipeStart(e)},App.EditCategoryScreen.prototype._swipeEnd=function(){this._subCategoryList.swipeEnd()},App.EditCategoryScreen.prototype._getColorSamples=function(){for(var t=App.MathUtils.rgbToHex,e=0,i=30,n=2*Math.PI/i,o=127,s=128,p=new Array(i);i>e;e++)p[e]=t(Math.round(Math.sin(n*e+0)*o+s),Math.round(Math.sin(n*e+2)*o+s),Math.round(Math.sin(n*e+4)*o+s));return p},App.TransactionScreen=function(t){App.Screen.call(this,t,.4);var e=App.ScrollPolicy,i=t.pixelRatio,n=t.width,o=t.contentHeight;this._interactiveButton=null,this._buttonList=new App.VirtualList(App.ViewLocator.getViewSegment(App.ViewName.TRANSACTION_BUTTON_POOL),App.Direction.Y,n,o,i),this._pane=this.addChild(new App.TilePane(e.OFF,e.AUTO,n,o,i,!1)),this._pane.setContent(this._buttonList)},App.TransactionScreen.prototype=Object.create(App.Screen.prototype),App.TransactionScreen.prototype.constructor=App.TransactionScreen,App.TransactionScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._pane.enable(),this._swipeEnabled=!0},App.TransactionScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._pane.disable(),this._swipeEnabled=!1},App.TransactionScreen.prototype.update=function(t){this._model=t,this._buttonList.update(t),this._pane.resize()},App.TransactionScreen.prototype._swipeStart=function(t,e){this._interactiveButton=this._buttonList.getItemUnderPoint(this.stage.getTouchData()),this._interactiveButton&&this._interactiveButton.swipeStart(e),this._closeButtons(!1)},App.TransactionScreen.prototype._swipeEnd=function(){this._interactiveButton&&(this._interactiveButton.swipeEnd(),this._interactiveButton=null)},App.TransactionScreen.prototype._closeButtons=function(t){for(var e=0,i=this._buttonList.children.length,n=null;i>e;)n=this._buttonList.getChildAt(e++),n!==this._interactiveButton&&n.close(t)},App.TransactionScreen.prototype._onClick=function(){var t=this.stage.getTouchData(),e=this._buttonList.getItemUnderPoint(t);e&&e.onClick(t)},App.TransactionScreen.prototype._onHeaderClick=function(t){var e=App.HeaderAction,i=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate();t===e.ADD_TRANSACTION?App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,{type:App.EventType.CREATE,nextCommand:new App.ChangeScreen,nextCommandData:i.update()}):t===e.MENU&&(i.update(App.ScreenName.MENU,0,null,e.NONE,e.CANCEL,App.ScreenTitle.MENU),App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,i))},App.SubCategoryButton=function(t,e){App.SwipeButton.call(this,e.width,e.openOffset),this.allocated=!1,this.poolIndex=t,this.boundingBox=new App.Rectangle(0,0,e.width,e.height),this._model=null,this._mode=null,this._options=e,this._pixelRatio=e.pixelRatio,this._background=this.addChild(new PIXI.Graphics),this._deleteLabel=this.addChild(new PIXI.Text("Edit",e.editLabelStyle)),this._swipeSurface=this.addChild(new PIXI.DisplayObjectContainer),this._skin=this._swipeSurface.addChild(new PIXI.Sprite(e.whiteSkin)),this._icon=PIXI.Sprite.fromFrame("subcategory-app"),this._nameLabel=this._swipeSurface.addChild(new PIXI.Text("",e.nameLabelStyle)),this._renderAll=!0},App.SubCategoryButton.prototype=Object.create(App.SwipeButton.prototype),App.SubCategoryButton.prototype.constructor=App.SubCategoryButton,App.SubCategoryButton.prototype._render=function(){if(this._nameLabel.setText(this._model.name),this._renderAll){this._renderAll=!1;var t=App.ColorTheme,e=this._pixelRatio,i=this.boundingBox.width,n=this.boundingBox.height,o=Math.round(25*e),s=Math.round(20*e)/this._icon.height;App.GraphicUtils.drawRect(this._background,t.RED,1,0,0,i,n),this._deleteLabel.x=Math.round(i-50*e),this._deleteLabel.y=Math.round((n-this._deleteLabel.height)/2),this._icon.scale.x=s,this._icon.scale.y=s,this._icon.x=o,this._icon.y=Math.round((n-this._icon.height)/2),this._icon.tint=t.GREY,this._nameLabel.y=Math.round((n-this._nameLabel.height)/2)}this._mode===App.ScreenMode.SELECT?(this._skin.setTexture(this._options.whiteSkin),this._nameLabel.x=Math.round(64*this._pixelRatio),this._swipeSurface.contains(this._icon)||this._swipeSurface.addChild(this._icon)):this._mode===App.ScreenMode.EDIT&&(this._skin.setTexture(this._options.greySkin),this._nameLabel.x=this._icon.x,this._swipeSurface.contains(this._icon)&&this._swipeSurface.removeChild(this._icon))},App.SubCategoryButton.prototype.disable=function(){App.SwipeButton.prototype.disable.call(this)},App.SubCategoryButton.prototype.update=function(t,e){this._model=t,this._mode=e,this._render(),this.close(!0)},App.SubCategoryButton.prototype.getModel=function(){return this._model},App.SubCategoryButton.prototype.onClick=function(t,e){this._mode===App.ScreenMode.EDIT&&this._isOpen&&t.getLocalPosition(this).x>=this._width-this._openOffset&&(this._model.saveState(),App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.EDIT,App.ScreenMode.EDIT,{subCategory:this._model,category:e},0,0,App.ScreenTitle.EDIT_SUB_CATEGORY)))},App.SubCategoryButton.prototype._updateSwipePosition=function(t){this._swipeSurface.x=t},App.SubCategoryButton.prototype._getSwipePosition=function(){return this._swipeSurface.x},App.CategoryScreen=function(t){App.Screen.call(this,t,.4);var e=App.ScrollPolicy,i=App.FontStyle,n=t.pixelRatio,o=t.contentHeight;this._interactiveButton=null,this._buttonsInTransition=[],this._layoutDirty=!1,this._buttonList=new App.TileList(App.Direction.Y,o),this._addNewButton=new App.AddNewButton("ADD CATEGORY",i.get(14,i.GREY_DARK),App.ViewLocator.getViewSegment(App.ViewName.SKIN).GREY_50,n),this._pane=new App.TilePane(e.OFF,e.AUTO,t.width,o,n,!1),this._pane.setContent(this._buttonList),this.addChild(this._pane)},App.CategoryScreen.prototype=Object.create(App.Screen.prototype),App.CategoryScreen.prototype.constructor=App.CategoryScreen,App.CategoryScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._pane.resetScroll(),this._pane.enable()},App.CategoryScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._layoutDirty=!1,this._pane.disable()},App.CategoryScreen.prototype.update=function(t,e){this._model=t,this._buttonList.remove(this._addNewButton);for(var i=App.ScreenMode,n=App.ViewLocator,o=App.ViewName,s=n.getViewSegment(o.CATEGORY_BUTTON_EXPAND_POOL),p=n.getViewSegment(o.CATEGORY_BUTTON_EDIT_POOL),r=this._mode===i.SELECT?s:p,h=this._model.categories,a=0,l=this._buttonList.length,c=null;l>a;a++)r.release(this._buttonList.removeItemAt(0));for(r=e===i.SELECT?s:p,a=0,l=h.length;l>a;)c=r.allocate(),c.update(h[a++],e),this._buttonList.add(c,!1);this._buttonList.add(this._addNewButton),this._updateLayout(),this._mode=e,this._swipeEnabled=e===i.EDIT},App.CategoryScreen.prototype._onTick=function(){App.Screen.prototype._onTick.call(this),this._layoutDirty&&this._updateLayout()},App.CategoryScreen.prototype._onTweenComplete=function(){App.Screen.prototype._onTweenComplete.call(this),this._transitionState===App.TransitionState.HIDDEN&&this._closeButtons(!0)},App.CategoryScreen.prototype._swipeStart=function(t,e){var i=this._buttonList.getItemUnderPoint(this.stage.getTouchData());!i||i instanceof App.AddNewButton||(t||this._pane.cancelScroll(),this._interactiveButton=i,this._interactiveButton.swipeStart(e),this._closeButtons(!1))},App.CategoryScreen.prototype._swipeEnd=function(){this._interactiveButton&&(this._interactiveButton.swipeEnd(),this._interactiveButton=null)},App.CategoryScreen.prototype._closeButtons=function(t){var e=0,i=this._buttonList.length-1,n=null,o=App.ScreenMode,s=App.EventType;if(this._mode===o.SELECT)for(;i>e;)n=this._buttonList.getItemAt(e++),n!==this._interactiveButton&&n.isOpen()&&(-1===this._buttonsInTransition.indexOf(n)&&(this._buttonsInTransition.push(n),
n.addEventListener(s.COMPLETE,this,this._onButtonTransitionComplete),this._layoutDirty=!0),n.close(t));else if(this._mode===o.EDIT)for(;i>e;)n=this._buttonList.getItemAt(e++),n!==this._interactiveButton&&n.close(t)},App.CategoryScreen.prototype._onClick=function(){var t=this.stage.getTouchData(),e=this._buttonList.getItemUnderPoint(t);if(e)if(e instanceof App.AddNewButton){var i=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.EDIT_CATEGORY);i.headerName=App.ScreenTitle.ADD_CATEGORY,App.Controller.dispatchEvent(App.EventType.CHANGE_CATEGORY,{type:App.EventType.CREATE,account:this._model,nextCommand:new App.ChangeScreen,nextCommandData:i})}else this._mode===App.ScreenMode.SELECT?(this._interactiveButton=e,-1===this._buttonsInTransition.indexOf(this._interactiveButton)&&(this._buttonsInTransition.push(this._interactiveButton),this._interactiveButton.addEventListener(App.EventType.COMPLETE,this,this._onButtonTransitionComplete),this._layoutDirty=!0),this._interactiveButton.onClick(t),this._pane.cancelScroll()):this._mode===App.ScreenMode.EDIT&&e.onClick(t)},App.CategoryScreen.prototype._onHeaderClick=function(t){var e=App.HeaderAction,i=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.MENU,0,null,e.NONE,e.CANCEL,App.ScreenTitle.MENU);t===e.ADD_TRANSACTION?App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,{type:App.EventType.CREATE,nextCommand:new App.ChangeScreen,nextCommandData:i.update()}):t===e.MENU?App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,i):t===e.CANCEL&&App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,i.update(App.ScreenName.BACK))},App.CategoryScreen.prototype._onButtonTransitionComplete=function(t){var e=0,i=this._buttonsInTransition.length,n=App.EventType;for(t.removeEventListener(n.COMPLETE,this,this._onButtonTransitionComplete);i>e;e++)if(t===this._buttonsInTransition[e]){this._buttonsInTransition.splice(e,1);break}0===this._buttonsInTransition.length&&(this._interactiveButton=null,this._layoutDirty=!1,this._updateLayout())},App.CategoryScreen.prototype._updateLayout=function(){this._buttonList.updateLayout(!0),this._pane.resize()},App.TilePane=function(t,e,i,n,o,s){App.Pane.call(this,t,e,i,n,o,s)},App.TilePane.prototype=Object.create(App.Pane.prototype),App.TilePane.prototype.constructor=App.TilePane,App.TilePane.prototype.setContent=function(t){this.removeContent(),this._content=t,this._contentHeight=Math.round(this._content.boundingBox.height),this._contentWidth=Math.round(this._content.boundingBox.width),this._contentBoundingBox.width=this._contentWidth,this._contentBoundingBox.height=this._contentHeight,this.addChildAt(this._content,0),this._updateScrollers(),this._useMask&&this._updateMask()},App.TilePane.prototype.resize=function(t,e){this.boundingBox.width=t||this.boundingBox.width,this.boundingBox.height=e||this.boundingBox.height,this._content&&(this._contentHeight=Math.round(this._content.boundingBox.height),this._contentWidth=Math.round(this._content.boundingBox.width),this._contentBoundingBox.width=this._contentWidth,this._contentBoundingBox.height=this._contentHeight,this._checkPosition(),this._updateScrollers(),this._useMask&&this._updateMask())},App.TilePane.prototype._updateX=function(t){this._content.updateX(t)},App.TilePane.prototype._updateY=function(t){this._content.updateY(t)},App.CategoryButtonEdit=function(t,e){App.SwipeButton.call(this,e.width,Math.round(80*e.pixelRatio)),this.allocated=!1,this.poolIndex=t,this.boundingBox=new App.Rectangle(0,0,e.width,e.height),this._model=null,this._mode=null,this._pixelRatio=e.pixelRatio,this._background=this.addChild(new PIXI.Graphics),this._editLabel=this.addChild(new PIXI.Text("Edit",e.editLabelStyle)),this._swipeSurface=this.addChild(new App.CategoryButtonSurface(e)),this._renderAll=!0},App.CategoryButtonEdit.prototype=Object.create(App.SwipeButton.prototype),App.CategoryButtonEdit.prototype.constructor=App.CategoryButtonEdit,App.CategoryButtonEdit.prototype._render=function(){var t=this.boundingBox.width,e=this.boundingBox.height;this._swipeSurface.render(this._model.name,this._model.icon,this._model.color),this._renderAll&&(this._renderAll=!1,App.GraphicUtils.drawRect(this._background,App.ColorTheme.RED,1,0,0,t,e),this._editLabel.x=Math.round(t-50*this._pixelRatio),this._editLabel.y=Math.round(18*this._pixelRatio))},App.CategoryButtonEdit.prototype.disable=function(){App.SwipeButton.prototype.disable.call(this)},App.CategoryButtonEdit.prototype.update=function(t,e){this._model=t,this._mode=e,this._render(),this.close(!0)},App.CategoryButtonEdit.prototype.onClick=function(t){this._isOpen&&t.getLocalPosition(this).x>=this._width-this._openOffset&&(this._model.saveState(),App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.EDIT_CATEGORY,App.ScreenMode.EDIT,this._model,0,0,App.ScreenTitle.EDIT_CATEGORY)))},App.CategoryButtonEdit.prototype._updateSwipePosition=function(t){this._swipeSurface.x=t},App.CategoryButtonEdit.prototype._getSwipePosition=function(){return this._swipeSurface.x},App.TransactionButton=function(t,e){App.SwipeButton.call(this,e.width,e.openOffset);var i=PIXI.Text,n=PIXI.Graphics,o=e.labelStyles.edit;this.allocated=!1,this.poolIndex=t,this.boundingBox=new App.Rectangle(0,0,e.width,e.height),this._model=null,this._pixelRatio=e.pixelRatio,this._labelStyles=e.labelStyles,this._isPending=void 0,this._background=this.addChild(new n),this._copyLabel=this.addChild(new i("Copy",o)),this._editLabel=this.addChild(new i("Edit",o)),this._icon=null,this._iconResizeRatio=-1,this._swipeSurface=this.addChild(new PIXI.DisplayObjectContainer),this._redSkin=this._swipeSurface.addChild(new PIXI.Sprite(e.redSkin)),this._greySkin=this._swipeSurface.addChild(new PIXI.Sprite(e.greySkin)),this._colorStripe=this._swipeSurface.addChild(new n),this._accountField=this._swipeSurface.addChild(new i("",o)),this._categoryField=this._swipeSurface.addChild(new i("",o)),this._amountField=this._swipeSurface.addChild(new i("",o)),this._currencyField=this._swipeSurface.addChild(new i("",o)),this._dateField=this._swipeSurface.addChild(new i("",o)),this._pendingFlag=this._swipeSurface.addChild(new n),this._pendingLabel=this._pendingFlag.addChild(new i("PENDING",this._labelStyles.pending))},App.TransactionButton.prototype=Object.create(App.SwipeButton.prototype),App.TransactionButton.prototype.constructor=App.TransactionButton,App.TransactionButton.prototype._update=function(t){var e=this._model.pending,i=this._model.date,n=i.getMonth()+1+"/"+i.getDate()+"/"+i.getFullYear();this._accountField.setText(this._model.account.name),this._amountField.setText(this._model.amount),this._currencyField.setText(" "+this._model.currencyQuote),this._categoryField.setText(this._model.subCategory.name+" / "+this._model.category.name),this._dateField.setText(e?"Due by\n"+n:n),this._icon?this._icon.setTexture(PIXI.TextureCache[this._model.category.icon]):this._icon=this._swipeSurface.addChild(PIXI.Sprite.fromFrame(this._model.category.icon)),e!==this._isPending&&(e?(this._accountField.setStyle(this._labelStyles.accountPending),this._amountField.setStyle(this._labelStyles.amountPending),this._currencyField.setStyle(this._labelStyles.currencyPending),this._categoryField.setStyle(this._labelStyles.accountPending),this._dateField.setStyle(this._labelStyles.datePending)):(this._accountField.setStyle(this._labelStyles.accountIncome),this._amountField.setStyle(this._labelStyles.amountIncome),this._currencyField.setStyle(this._labelStyles.currencyIncome),this._categoryField.setStyle(this._labelStyles.accountIncome),this._dateField.setStyle(this._labelStyles.date))),this._render(t,e),this._updateLayout(t,e),this.close(!0),this._isPending=e},App.TransactionButton.prototype._render=function(t,e){var i=App.GraphicUtils,n=App.ColorTheme,o=this._pixelRatio,s=this.boundingBox.width,p=this.boundingBox.height,r=Math.round(this._openOffset/2);t&&(i.drawRects(this._background,n.GREEN,1,[0,0,s-r,p],!0,!1),i.drawRects(this._background,n.RED,1,[s-r,0,r,p],!1,!0),i.drawRect(this._pendingFlag,0,1,0,0,Math.round(this._pendingLabel.width+10*o),Math.round(this._pendingLabel.height+6*o))),i.drawRect(this._colorStripe,"0x"+this._model.category.color,1,0,0,Math.round(4*o),p),e!==this._isPending&&(e?(this._greySkin.visible=!1,this._redSkin.visible=!0,this._pendingFlag.visible=!0):(this._greySkin.visible=!0,this._redSkin.visible=!1,this._pendingFlag.visible=!1)),this._icon.tint=e?n.RED_DARK:parseInt(this._model.category.color,16)},App.TransactionButton.prototype._updateLayout=function(t,e){var i=this._pixelRatio,n=this.boundingBox.width,o=this.boundingBox.height,s=Math.round(60*i),p=Math.round(10*i);t&&(this._copyLabel.x=n-2*s+Math.round((s-this._copyLabel.width)/2),this._copyLabel.y=Math.round((o-this._copyLabel.height)/2),this._editLabel.x=n-s+Math.round((s-this._editLabel.width)/2),this._editLabel.y=Math.round((o-this._editLabel.height)/2),-1===this._iconResizeRatio&&(this._iconResizeRatio=Math.round(32*this._pixelRatio)/this._icon.height),this._icon.scale.x=this._iconResizeRatio,this._icon.scale.y=this._iconResizeRatio,this._icon.x=Math.round(20*i),this._icon.y=Math.round((o-this._icon.height)/2),this._accountField.x=Math.round(70*i),this._accountField.y=Math.round(7*i),this._amountField.x=Math.round(70*i),this._amountField.y=Math.round(26*i),this._currencyField.y=Math.round(33*i),this._categoryField.x=Math.round(70*i),this._categoryField.y=Math.round(52*i),this._pendingLabel.x=Math.round(5*i),this._pendingLabel.y=Math.round(4*i),this._pendingFlag.x=Math.round(n-p-this._pendingFlag.width),this._pendingFlag.y=Math.round(7*i)),this._currencyField.x=Math.round(this._amountField.x+this._amountField.width),this._dateField.x=Math.round(n-p-this._dateField.width),this._dateField.y=Math.round(e?38*i:52*i)},App.TransactionButton.prototype.setModel=function(t){this._model=t,this._update(null===this._icon)},App.TransactionButton.prototype.onClick=function(t){var e=t.getLocalPosition(this).x;if(this._isOpen&&e>=this._width-this._openOffset){var i=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update();e>=this._width-this._openOffset/2?(App.ModelLocator.getProxy(App.ModelName.TRANSACTIONS).setCurrent(this._model),i.screenMode=App.ScreenMode.EDIT,i.updateData=this._model,i.headerName=App.ScreenTitle.EDIT_TRANSACTION,App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,i)):App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,{type:App.EventType.COPY,transaction:this._model,nextCommand:new App.ChangeScreen,nextCommandData:i})}},App.TransactionButton.prototype._updateSwipePosition=function(t){this._swipeSurface.x=t},App.TransactionButton.prototype._getSwipePosition=function(){return this._swipeSurface.x},App.SettingScreen=function(t){App.Screen.call(this,t,.4);var e=App.TransactionOptionButton,i=App.FontStyle,n=App.ViewLocator.getViewSegment(App.ViewName.SKIN),o=t.pixelRatio,s=t.width,p=s-2*Math.round(10*o),r={pixelRatio:o,width:s,height:Math.round(50*o),skin:n.GREY_50,nameStyle:i.get(18,i.GREY_DARKER,null,i.LIGHT_CONDENSED),valueStyle:i.get(18,i.BLUE,"right"),valueDetailStyle:i.get(14,i.BLUE)};this._model=App.ModelLocator.getProxy(App.ModelName.SETTINGS),this._container=new PIXI.DisplayObjectContainer,this._list=this._container.addChild(new App.List(App.Direction.Y)),this._weekDayOption=this._list.add(new e("calendar","Start Of Week",r)),this._baseCurrencyOption=this._list.add(new e("currencies","Base Currency",r)),this._defaultCurrencyOption=this._list.add(new e("currencies","Default Currency",r)),this._defaultAccountOption=this._list.add(new e("account","Default Account",r)),this._defaultCategoryOption=this._list.add(new e("folder-app","Default Category",r)),this._defaultSubCategoryOption=this._list.add(new e("subcategory-app","Default SubCategory",r)),this._defaultMethodOption=this._list.add(new e("credit-card","Default Payment",r),!0),this._deleteBackground=this._container.addChild(new PIXI.Sprite(n.GREY_60)),this._deleteButton=this._container.addChild(new App.PopUpButton("Delete All Transactions","Are you sure you want to\ndelete all transactions?",{width:p,height:Math.round(40*o),pixelRatio:o,popUpLayout:{x:Math.round(10*o),y:0,width:Math.round(p-20*o),height:Math.round(t.height/2),overlayWidth:s,overlayHeight:0}})),this._pane=this.addChild(new App.Pane(App.ScrollPolicy.OFF,App.ScrollPolicy.AUTO,s,t.contentHeight,o,!0)),this._pane.setContent(this._container),this._updateLayout(),this._clickThreshold=10*o},App.SettingScreen.prototype=Object.create(App.Screen.prototype),App.SettingScreen.prototype.constructor=App.SettingScreen,App.SettingScreen.prototype._updateLayout=function(){var t=Math.round(10*this._layout.pixelRatio);this._deleteBackground.y=this._list.y+this._list.boundingBox.height,this._deleteButton.setPosition(t,this._deleteBackground.y+t),this._pane.resize()},App.SettingScreen.prototype.update=function(){this._weekDayOption.setValue("Monday"),this._baseCurrencyOption.setValue(this._model.baseCurrency),this._defaultCurrencyOption.setValue(this._model.defaultCurrencyQuote),this._defaultAccountOption.setValue(this._model.defaultAccount.name),this._defaultCategoryOption.setValue(this._model.defaultCategory.name),this._defaultSubCategoryOption.setValue(this._model.defaultSubCategory.name),this._defaultMethodOption.setValue(this._model.defaultPaymentMethod.name),this._deleteButton.hidePopUp(!0),this._pane.resetScroll()},App.SettingScreen.prototype.hide=function(){this._unRegisterDeleteButtonListeners(),App.Screen.prototype.hide.call(this)},App.SettingScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._pane.enable()},App.SettingScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._pane.disable()},App.SettingScreen.prototype._registerDeleteButtonListeners=function(){var t=App.EventType;this._deleteButton.addEventListener(t.CANCEL,this,this._onDeleteCancel),this._deleteButton.addEventListener(t.CONFIRM,this,this._onDeleteConfirm),this._deleteButton.addEventListener(t.COMPLETE,this,this._onHidePopUpComplete)},App.SettingScreen.prototype._unRegisterDeleteButtonListeners=function(){var t=App.EventType;this._deleteButton.removeEventListener(t.CANCEL,this,this._onDeleteCancel),this._deleteButton.removeEventListener(t.CONFIRM,this,this._onDeleteConfirm),this._deleteButton.removeEventListener(t.COMPLETE,this,this._onHidePopUpComplete)},App.SettingScreen.prototype._onDeleteCancel=function(){this._deleteButton.hidePopUp(),App.ViewLocator.getViewSegment(App.ViewName.HEADER).enableActions()},App.SettingScreen.prototype._onDeleteConfirm=function(){},App.SettingScreen.prototype._onHidePopUpComplete=function(){this._unRegisterDeleteButtonListeners(),this.enable(),this._registerEventListeners(App.EventLevel.LEVEL_2)},App.SettingScreen.prototype._onClick=function(){this._pane.cancelScroll();var t=this.stage.getTouchData(),e=t.getLocalPosition(this._container).y;if(this._list.hitTest(e)){var i=this._optionList.getItemUnderPoint(t);i===this._weekDayOption?this._onAccountOptionClick():i===this._baseCurrencyOption?this._onCategoryOptionClick():i===this._defaultCurrencyOption?this._onTimeOptionClick():i===this._defaultAccountOption?this._onMethodOptionClick():i===this._defaultCategoryOption?this._onCurrencyOptionClick():i===this._defaultSubCategoryOption?this._onCurrencyOptionClick():i===this._defaultMethodOption&&this._onCurrencyOptionClick()}else this._deleteButton.hitTest(e)&&(this.disable(),this._unRegisterEventListeners(App.EventLevel.LEVEL_1),App.ViewLocator.getViewSegment(App.ViewName.HEADER).disableActions(),this._registerDeleteButtonListeners(),this._deleteButton.setPopUpLayout(0,this._container.y+this._layout.headerHeight,0,this._layout.contentHeight>this._container.height?this._layout.contentHeight:this._container.height),this._deleteButton.showPopUp())},App.SettingScreen.prototype._onAccountOptionClick=function(){},App.SettingScreen.prototype._onCategoryOptionClick=function(){},App.SettingScreen.prototype._onTimeOptionClick=function(){},App.SettingScreen.prototype._onMethodOptionClick=function(){},App.SettingScreen.prototype._onCurrencyOptionClick=function(){},App.SettingScreen.prototype._onHeaderClick=function(t){var e=App.HeaderAction,i=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate();t===e.ADD_TRANSACTION?App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,{type:App.EventType.CREATE,nextCommand:new App.ChangeScreen,nextCommandData:i.update()}):t===e.MENU&&App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,i.update(App.ScreenName.MENU,0,null,e.NONE,e.CANCEL,App.ScreenTitle.MENU))},App.SettingScreen.prototype._getChangeTransactionData=function(t,e,i,n,o,s){return{type:App.EventType.CHANGE,amount:this._transactionInput.getValue(),transactionType:this._typeToggle.isSelected()?App.TransactionType.INCOME:App.TransactionType.EXPENSE,pending:this._pendingToggle.isSelected(),repeat:this._repeatToggle.isSelected(),method:this._methodOption.getValue(),note:this._noteInput.getValue(),nextCommand:new App.ChangeScreen,nextCommandData:App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(t,e,i,n,o,s)}},App.ApplicationView=function(t,e,i,n,o){PIXI.DisplayObjectContainer.call(this);var s=App.ModelLocator,p=App.ModelName,r=App.ViewLocator,h=App.ViewName,a=s.getProxy(p.EVENT_LISTENER_POOL);this._renderer=e,this._stage=t,this._layout={originalWidth:i,originalHeight:n,width:Math.round(i*o),height:Math.round(n*o),headerHeight:Math.round(50*o),contentHeight:Math.round((n-50)*o),pixelRatio:o},this._eventDispatcher=new App.EventDispatcher(a),this._background=new PIXI.Graphics,this._backgroundPattern=new PIXI.TilingSprite(App.ViewLocator.getViewSegment(App.ViewName.SKIN).GREY_PATTERN,this._layout.width,this._layout.height),this._screenStack=r.addViewSegment(h.SCREEN_STACK,new App.ViewStack([new App.AccountScreen(this._layout),new App.CategoryScreen(this._layout),new App.SelectTimeScreen(this._layout),new App.EditCategoryScreen(this._layout),new App.TransactionScreen(this._layout),new App.ReportScreen(this._layout),new App.AddTransactionScreen(this._layout),new App.EditScreen(this._layout),new App.CurrencyPairScreen(this._layout),new App.EditCurrencyPairScreen(this._layout),new App.CurrencyScreen(this._layout),new App.SettingScreen(this._layout),new App.Menu(this._layout)],!1,a)),this._header=r.addViewSegment(h.HEADER,new App.Header(this._layout)),this._init(),this.addChild(this._background),this.addChild(this._backgroundPattern),this.addChild(this._screenStack),this.addChild(this._header)},App.ApplicationView.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.ApplicationView.prototype.constructor=App.ApplicationView,App.ApplicationView.prototype._init=function(){App.GraphicUtils.drawRect(this._background,App.ColorTheme.GREY,1,0,0,this._layout.width,this._layout.height),this._backgroundPattern.alpha=.4,this.scrollTo(0),this._registerEventListeners(),this._screenStack.y=this._layout.headerHeight},App.ApplicationView.prototype._registerEventListeners=function(){var t=App.EventType;this._screenStack.addEventListener(t.CHANGE,this,this._onScreenChange),App.ModelLocator.getProxy(App.ModelName.TICKER).addEventListener(t.TICK,this,this._onTick)},App.ApplicationView.prototype._onScreenChange=function(){this._screenStack.show(),this._screenStack.hide()},App.ApplicationView.prototype.scrollTo=function(t){document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop=t:document.body.scrollTop=t},App.ApplicationView.prototype._onTick=function(){this._renderer.render(this._stage)},App.ApplicationView.prototype._onResize=function(){},App.ApplicationView.prototype.addEventListener=function(t,e,i){this._eventDispatcher.addEventListener(t,e,i)},App.ApplicationView.prototype.removeEventListener=function(t,e,i){this._eventDispatcher.removeEventListener(t,e,i)},App.ViewStack=function(t,e,i){if(PIXI.DisplayObjectContainer.call(this),this._children=[],this._selectedChild=null,this._selectedIndex=-1,this._childrenToHide=[],this._eventDispatcher=new App.EventDispatcher(i),t)for(var n=0,o=t.length;o>n;)this.add(t[n++],e)},App.ViewStack.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.ViewStack.prototype.constructor=App.ViewStack,App.ViewStack.prototype.add=function(t,e){this._children[this._children.length]=t,e&&this.addChild(t)},App.ViewStack.prototype.selectChild=function(t){if(this._selectedChild){if(!t||this._selectedChild===t)return;this._childrenToHide[this._childrenToHide.length]=this._selectedChild}for(var e=0,i=this._children.length;i>e;)if(t===this._children[e++]){this._selectedChild=t,this._selectedIndex=e-1;break}this._eventDispatcher.dispatchEvent(App.EventType.CHANGE)},App.ViewStack.prototype.selectChildByIndex=function(t){if(!(0>t||t>=this._children.length)){if(this._selectedChild){if(this._selectedChild===this._children[t])return;this._childrenToHide[this._childrenToHide.length]=this._selectedChild}this._selectedChild=this._children[t],this._selectedIndex=t,this._eventDispatcher.dispatchEvent(App.EventType.CHANGE)}},App.ViewStack.prototype.getSelectedChild=function(){return this._selectedChild},App.ViewStack.prototype.getSelectedIndex=function(){return this._selectedIndex},App.ViewStack.prototype.getChildByIndex=function(t){return 0>t||t>=this._children.length?null:this._children[t]},App.ViewStack.prototype.show=function(){if(this._selectedChild){for(var t=0,e=this._childrenToHide.length;e>t;t++)if(this._selectedChild===this._childrenToHide[t]){this._selectedChild.removeEventListener(App.EventType.COMPLETE,this,this._onHideComplete),this._childrenToHide.splice(t,1);break}this.contains(this._selectedChild)||this.addChild(this._selectedChild),this._selectedChild.show()}},App.ViewStack.prototype.hide=function(){for(var t=0,e=this._childrenToHide.length,i=null,n=App.EventType;e>t;)i=this._childrenToHide[t++],i.addEventListener(n.COMPLETE,this,this._onHideComplete),i.hide()},App.ViewStack.prototype._onHideComplete=function(t){if(t.state===App.TransitionState.HIDDEN){var e=t.target;e.removeEventListener(App.EventType.COMPLETE,this,this._onHideComplete),this.contains(e)&&this.removeChild(e);for(var i=0,n=this._childrenToHide.length;n>i;i++)if(e===this._childrenToHide[i]){this._childrenToHide.splice(i,1);break}}},App.ViewStack.prototype.addEventListener=function(t,e,i){this._eventDispatcher.addEventListener(t,e,i)},App.ViewStack.prototype.removeEventListener=function(t,e,i){this._eventDispatcher.removeEventListener(t,e,i)},App.Initialize=function(){this._eventListenerPool=new App.ObjectPool(App.EventListener,10),App.Command.call(this,!1,this._eventListenerPool),this._loadDataCommand=new App.LoadData(this._eventListenerPool)},App.Initialize.prototype=Object.create(App.Command.prototype),App.Initialize.prototype.constructor=App.Initialize,App.Initialize.prototype.execute=function(){this._loadDataCommand.addEventListener(App.EventType.COMPLETE,this,this._onLoadDataComplete),this._loadDataCommand.execute()},App.Initialize.prototype._onLoadDataComplete=function(t){var e=App.HeaderAction,i=new App.ObjectPool(App.ChangeScreenData,5);this._loadDataCommand.destroy(),this._loadDataCommand=null,this._initModel(t,i),this._initController(),this._initView(),App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,i.allocate().update(App.ScreenName.MENU,0,null,e.NONE,e.CANCEL,App.ScreenTitle.MENU)),this.dispatchEvent(App.EventType.COMPLETE)},App.Initialize.prototype._initModel=function(t,e){var i=App.ModelName,n=App.Collection,o=App.PaymentMethod,s=JSON.parse(t.userData),p=new App.CurrencyPairCollection(s.currencyPairs,this._eventListenerPool);App.ModelLocator.init([i.EVENT_LISTENER_POOL,this._eventListenerPool,i.TICKER,new App.Ticker(this._eventListenerPool),i.ICONS,Object.keys(t.icons).filter(function(t){return-1===t.indexOf("-app")}),i.PAYMENT_METHODS,new n([o.CASH,o.CREDIT_CARD],o,null,this._eventListenerPool),i.CURRENCY_PAIRS,p,i.CURRENCY_SYMBOLS,new n(this._getCurrencySymbols(p),App.CurrencySymbol,null,this._eventListenerPool),i.SETTINGS,new App.Settings(s.settings),i.SUB_CATEGORIES,new n(s.subCategories,App.SubCategory,null,this._eventListenerPool),i.CATEGORIES,new n(s.categories,App.Category,null,this._eventListenerPool),i.ACCOUNTS,new n(s.accounts,App.Account,null,this._eventListenerPool),i.TRANSACTIONS,new n(s.transactions,App.Transaction,null,this._eventListenerPool),i.CHANGE_SCREEN_DATA_POOL,e,i.SCREEN_HISTORY,new App.Stack])},App.Initialize.prototype._getCurrencySymbols=function(t){for(var e=[],i=null,n=0,o=t.length();o>n;)i=t.getItemAt(n++),-1===e.indexOf(i.symbol)&&e.push(i.symbol),-1===e.indexOf(i.base)&&e.push(i.base);return e},App.Initialize.prototype._initController=function(){var t=App.EventType;App.Controller.init(this._eventListenerPool,[t.CHANGE_SCREEN,App.ChangeScreen,t.CHANGE_TRANSACTION,App.ChangeTransaction,t.CHANGE_ACCOUNT,App.ChangeAccount,t.CHANGE_CATEGORY,App.ChangeCategory,t.CHANGE_SUB_CATEGORY,App.ChangeSubCategory,t.CHANGE_CURRENCY_PAIR,App.ChangeCurrencyPair])},App.Initialize.prototype._initView=function(){var t=document.getElementsByTagName("canvas")[0],e=t.getContext("2d"),i=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,o=i/n>2?2:i/n,s=window.innerWidth,p=window.innerHeight,r=new PIXI.Stage(16777215),h=new PIXI.CanvasRenderer(s,p,{view:t,resolution:1,transparent:!1,autoResize:!1,clearBeforeRender:!1}),a=App.ViewLocator,l=App.ViewName;o>1&&(t.style.width=s+"px",t.style.height=p+"px",t.width=t.width*o,t.height=t.height*o,e.scale(o,o),r.interactionManager.setPixelRatio(o)),PIXI.CanvasTinter.tintMethod=PIXI.CanvasTinter.tintWithOverlay,e.lineCap="square",this._initButtonPools(a,l,Math.round(s*o),o),a.addViewSegment(l.APPLICATION_VIEW,r.addChild(new App.ApplicationView(r,h,s,p,o)))},App.Initialize.prototype._initButtonPools=function(t,e,i,n){var o=App.ObjectPool,s=App.FontStyle.init(n),p=new App.Skin(i,n),r={width:i,height:Math.round(50*n),pixelRatio:n,skin:p.GREY_50,addButtonSkin:p.WHITE_40,nameLabelStyle:s.get(18,s.BLUE),editLabelStyle:s.get(18,s.WHITE,null,s.LIGHT_CONDENSED),addLabelStyle:s.get(14,s.GREY_DARK),displayHeader:!1},h={width:i,height:Math.round(40*n),pixelRatio:n,whiteSkin:p.WHITE_40,greySkin:p.GREY_40,nameLabelStyle:s.get(14,s.BLUE),editLabelStyle:s.get(16,s.WHITE,null,s.LIGHT_CONDENSED),openOffset:Math.round(80*n)},a={width:i,height:Math.round(70*n),pixelRatio:n,skin:p.GREY_70,nameStyle:s.get(24,s.BLUE),detailStyle:s.get(12,s.GREY_DARKER,null,s.LIGHT_CONDENSED),editStyle:s.get(18,s.WHITE,null,s.LIGHT_CONDENSED),openOffset:Math.round(80*n)},l={labelStyles:{edit:s.get(18,s.WHITE,null,s.LIGHT_CONDENSED),accountIncome:s.get(14,s.BLUE_LIGHT,null,s.LIGHT_CONDENSED),amountIncome:s.get(26,s.BLUE),currencyIncome:s.get(16,s.BLUE_DARK,null,s.LIGHT_CONDENSED),date:s.get(14,s.GREY_DARK),pending:s.get(12,s.WHITE,null,s.LIGHT_CONDENSED),accountPending:s.get(14,s.RED_DARK),amountPending:s.get(26,s.WHITE),currencyPending:s.get(16,s.WHITE,null,s.LIGHT_CONDENSED),datePending:s.get(14,s.WHITE,"right",s.LIGHT_CONDENSED)},greySkin:p.GREY_70,redSkin:p.RED_70,width:i,height:Math.round(70*n),pixelRatio:n,openOffset:Math.round(120*n)};t.init([e.SKIN,p,e.ACCOUNT_BUTTON_POOL,new o(App.AccountButton,2,a),e.CATEGORY_BUTTON_EXPAND_POOL,new o(App.CategoryButtonExpand,5,r),e.CATEGORY_BUTTON_EDIT_POOL,new o(App.CategoryButtonEdit,5,r),e.SUB_CATEGORY_BUTTON_POOL,new o(App.SubCategoryButton,5,h),e.TRANSACTION_BUTTON_POOL,new o(App.TransactionButton,4,l)])},App.Initialize.prototype.destroy=function(){App.Command.prototype.destroy.call(this),this._loadDataCommand&&(this._loadDataCommand.destroy(),this._loadDataCommand=null),this._eventListenerPool=null},App.Easing={linear:function(t){return t},inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1/n),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)))},outElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1===t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/i)+1)},inOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:2===(t/=.5)?1:(i||(i=.3*1.5),e=i/(2*Math.PI)*Math.asin(1/n),1>t?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)*.5+1)}},App.LoadData=function(t){App.Command.call(this,!1,t),this._jsonLoader=null,this._fontLoadingInterval=-1,this._fontInfoElement=null,this._icons=null},App.LoadData.prototype=Object.create(App.Command.prototype),App.LoadData.prototype.constructor=App.LoadData,App.LoadData.prototype.execute=function(){this._loadAssets()},App.LoadData.prototype._loadAssets=function(){this._jsonLoader=new PIXI.JsonLoader("./data/icons-big.json"),this._jsonLoader.on("loaded",function(){this._icons=this._jsonLoader.json.frames,this._jsonLoader.removeAllListeners("loaded"),this._jsonLoader=null,this._loadFont()}.bind(this)),this._jsonLoader.load()},App.LoadData.prototype._loadFont=function(){this._fontInfoElement=document.getElementById("fontInfo");var t=App.FontStyle,e=this._fontInfoElement.offsetWidth,i=0;this._fontLoadingInterval=setInterval(function(){this._fontInfoElement.offsetWidth!==e&&(i++,1===i?(e=this._fontInfoElement.offsetWidth,this._fontInfoElement.style.fontFamily=t.LIGHT_CONDENSED):2===i&&(clearInterval(this._fontLoadingInterval),document.body.removeChild(this._fontInfoElement),this._loadData()))}.bind(this),100),this._fontInfoElement.style.fontFamily=t.CONDENSED},App.LoadData.prototype._loadData=function(){var t=new XMLHttpRequest;t.open("GET","./data/data.json",!0),t.onload=function(){t.status>=200&&t.status<400&&this.dispatchEvent(App.EventType.COMPLETE,{userData:t.responseText,icons:this._icons})}.bind(this),t.onerror=function(){this.dispatchEvent(App.EventType.COMPLETE)},t.send()},App.LoadData.prototype.destroy=function(){App.Command.prototype.destroy.call(this),this._jsonLoader=null,clearInterval(this._fontLoadingInterval),this._fontInfoElement=null},App.AccountScreen=function(t){App.Screen.call(this,t,.4);var e=App.ScrollPolicy,i=App.FontStyle,n=t.pixelRatio,o=t.contentHeight;this._model=App.ModelLocator.getProxy(App.ModelName.ACCOUNTS),this._interactiveButton=null,this._buttonList=new App.TileList(App.Direction.Y,o),this._addNewButton=new App.AddNewButton("ADD ACCOUNT",i.get(16,i.GREY_DARK),App.ViewLocator.getViewSegment(App.ViewName.SKIN).GREY_60,n),this._pane=new App.TilePane(e.OFF,e.AUTO,t.width,o,n,!1),this._pane.setContent(this._buttonList),this.addChild(this._pane)},App.AccountScreen.prototype=Object.create(App.Screen.prototype),App.AccountScreen.prototype.constructor=App.AccountScreen,App.AccountScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._pane.resetScroll(),this._pane.enable()},App.AccountScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._pane.disable()},App.AccountScreen.prototype.update=function(t,e){this._buttonList.remove(this._addNewButton);for(var i=App.ViewLocator.getViewSegment(App.ViewName.ACCOUNT_BUTTON_POOL),n=0,o=this._buttonList.length,s=App.LifeCycleState.DELETED,p=null,r=null;o>n;n++)i.release(this._buttonList.removeItemAt(0));for(n=0,o=this._model.length();o>n;)p=this._model.getItemAt(n++),p.lifeCycleState!==s&&(r=i.allocate(),r.setModel(p,e),
this._buttonList.add(r));this._buttonList.add(this._addNewButton),this._buttonList.updateLayout(!0),this._pane.resize(),this._mode=e,this._swipeEnabled=e===App.ScreenMode.EDIT},App.AccountScreen.prototype._onTweenComplete=function(){App.Screen.prototype._onTweenComplete.call(this),this._transitionState===App.TransitionState.HIDDEN&&this._closeButtons(!0)},App.AccountScreen.prototype._swipeStart=function(t,e){var i=this._buttonList.getItemUnderPoint(this.stage.getTouchData());!i||i instanceof App.AddNewButton||(t||this._pane.cancelScroll(),this._interactiveButton=i,this._interactiveButton.swipeStart(e),this._closeButtons(!1))},App.AccountScreen.prototype._swipeEnd=function(){this._interactiveButton&&(this._interactiveButton.swipeEnd(),this._interactiveButton=null)},App.AccountScreen.prototype._closeButtons=function(t){if(this._mode===App.ScreenMode.EDIT)for(var e=0,i=this._buttonList.length-1,n=null;i>e;)n=this._buttonList.getItemAt(e++),n!==this._interactiveButton&&n.close(t)},App.AccountScreen.prototype._onClick=function(){var t=this.stage.getTouchData(),e=this._buttonList.getItemUnderPoint(t);if(e){var i=App.EventType,n=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.EDIT);if(e instanceof App.AddNewButton)n.headerName=App.ScreenTitle.ADD_ACCOUNT,App.Controller.dispatchEvent(i.CHANGE_ACCOUNT,{type:i.CREATE,nextCommand:new App.ChangeScreen,nextCommandData:n});else{var o=App.ScreenMode,s=App.HeaderAction;this._mode===o.EDIT?e.getClickMode(t)===o.EDIT?App.Controller.dispatchEvent(i.CHANGE_SCREEN,n.update(App.ScreenName.EDIT,App.ScreenMode.EDIT,e.getModel(),0,0,App.ScreenTitle.EDIT_ACCOUNT)):App.Controller.dispatchEvent(i.CHANGE_SCREEN,n.update(App.ScreenName.CATEGORY,this._mode,e.getModel(),s.MENU,s.ADD_TRANSACTION,App.ScreenTitle.CATEGORIES)):App.Controller.dispatchEvent(i.CHANGE_SCREEN,n.update(App.ScreenName.CATEGORY,this._mode,e.getModel(),0,s.NONE,App.ScreenTitle.SELECT_CATEGORY))}}},App.AccountScreen.prototype._onHeaderClick=function(t){var e=App.HeaderAction,i=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate();t===e.ADD_TRANSACTION?App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,{type:App.EventType.CREATE,nextCommand:new App.ChangeScreen,nextCommandData:i.update()}):t===e.MENU?App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,i.update(App.ScreenName.MENU,0,null,e.NONE,e.CANCEL,App.ScreenTitle.MENU)):t===e.CANCEL&&App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,i.update(App.ScreenName.BACK))},App.IconSample=function(t,e,i){PIXI.DisplayObjectContainer.call(this);var n=Math.round(64*i);this.boundingBox=new App.Rectangle(0,0,n,n),this._modelIndex=t,this._model=e,this._pixelRatio=i,this._icon=PIXI.Sprite.fromFrame(e),this._iconResizeRatio=Math.round(32*i)/this._icon.height,this._selected=!1,this._render(),this.addChild(this._icon)},App.IconSample.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.IconSample.prototype.constructor=App.IconSample,App.IconSample.prototype._render=function(){var t=App.ColorTheme,e=this.boundingBox.width;this._icon.scale.x=this._iconResizeRatio,this._icon.scale.y=this._iconResizeRatio,this._icon.x=Math.round((e-this._icon.width)/2),this._icon.y=Math.round((e-this._icon.height)/2),this._icon.tint=this._selected?t.BLUE:t.GREY_DARK},App.IconSample.prototype.setModel=function(t,e,i){this._modelIndex=t,this._model=e,this._icon.setTexture(PIXI.TextureCache[e]),this._selected=i===this._modelIndex,this._render()},App.IconSample.prototype.getModelIndex=function(){return this._modelIndex},App.IconSample.prototype.getValue=function(){return this._model},App.IconSample.prototype.select=function(t){var e=this._modelIndex===t;this._selected!==e&&(this._selected=e,this._render())},App.EditCurrencyPairScreen=function(t){App.Screen.call(this,t,.4);var e=App.FontStyle,i=t.pixelRatio,n=t.width;this._background=this.addChild(new PIXI.Graphics),this._pairLabel=this.addChild(new PIXI.Text("EUR / USD",App.FontStyle.get(24,App.FontStyle.BLUE))),this._input=this.addChild(new App.Input("",20,Math.round(t.width-this._pairLabel.width-Math.round(50*i)),Math.round(40*i),i)),this._downloadButton=this.addChild(new App.Button("Update rate from internet",{width:Math.round(n-20*i),height:Math.round(40*i),pixelRatio:i,style:e.get(18,e.BLACK_LIGHT,null,e.LIGHT_CONDENSED),backgroundColor:App.ColorTheme.GREY_DARK})),this._input.restrict(/\d{1,}(\.\d*){0,1}/g),this._render()},App.EditCurrencyPairScreen.prototype=Object.create(App.Screen.prototype),App.EditCurrencyPairScreen.prototype.constructor=App.EditCurrencyPairScreen,App.EditCurrencyPairScreen.prototype._render=function(){var t=App.GraphicUtils,e=App.ColorTheme,i=this._layout.pixelRatio,n=this._layout.width,o=Math.round(10*i),s=Math.round(60*i);this._pairLabel.x=2*o,this._pairLabel.y=Math.round(22*i),this._input.x=Math.round(n-o-this._input.width),this._input.y=o,this._downloadButton.x=o,this._downloadButton.y=s+o,t.drawRects(this._background,e.GREY,1,[0,0,n,2*s],!0,!1),t.drawRects(this._background,e.GREY_DARK,1,[o,s-1,n-2*o,1],!1,!1),t.drawRects(this._background,e.GREY_LIGHT,1,[o,s,n-2*o,1],!1,!0)},App.EditCurrencyPairScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._input.enable()},App.EditCurrencyPairScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._input.disable()},App.EditCurrencyPairScreen.prototype.update=function(t,e){this._model=t,this._pairLabel.setText(this._model.base+" / "+this._model.symbol),this._input.setValue(this._model.rate)},App.EditCurrencyPairScreen.prototype._onHeaderClick=function(t){var e=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.BACK);e.updateBackScreen=!0,this._input.blur(),t===App.HeaderAction.CONFIRM?App.Controller.dispatchEvent(App.EventType.CHANGE_CURRENCY_PAIR,{currencyPair:this._model,rate:this._input.getValue(),nextCommand:new App.ChangeScreen,nextCommandData:e}):t===App.HeaderAction.CANCEL&&App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,e)},App.ReportScreen=function(t){App.Screen.call(this,t,.4);var e=App.ScrollPolicy,i=App.FontStyle,n=App.ObjectPool,o=t.contentHeight,s=t.pixelRatio,p=Math.round(.3*o-20*s),r=Math.round(t.width-20*s),h=Math.round(.7*o),a=Math.round(40*s),l=App.ViewLocator.getViewSegment(App.ViewName.SKIN),c={width:r,height:a,pixelRatio:s,labelStyles:{name:i.get(20,i.WHITE,null,i.LIGHT_CONDENSED),amount:i.get(16,i.WHITE)},categoryButtonPool:new n(App.ReportCategoryButton,5,{width:r,height:a,pixelRatio:s,skin:l.NARROW_GREY_40,labelStyles:{name:i.get(18,i.BLUE),percent:i.get(16,i.GREY_DARK),amount:i.get(16,i.BLUE)},subCategoryButtonPool:new n(App.ReportSubCategoryButton,5,{width:r,height:a,pixelRatio:s,skin:l.NARROW_WHITE_40,labelStyles:{name:i.get(14,i.BLUE),percent:i.get(14,i.GREY_DARK),amount:i.get(14,i.BLUE)}})})};this._model=App.ModelLocator.getProxy(App.ModelName.ACCOUNTS),this._buttonPool=new n(App.ReportAccountButton,2,c),this._chart=this.addChild(new App.ReportChart(null,p,p,s)),this._buttonList=new App.TileList(App.Direction.Y,h),this._pane=this.addChild(new App.TilePane(e.OFF,e.AUTO,r,h,s,!0)),this._pane.setContent(this._buttonList),this._updateLayout(),this._interactiveButton=null,this._layoutDirty=!1},App.ReportScreen.prototype=Object.create(App.Screen.prototype),App.ReportScreen.prototype.constructor=App.ReportScreen,App.ReportScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._pane.enable()},App.ReportScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._layoutDirty=!1,this._pane.disable()},App.ReportScreen.prototype.update=function(){for(var t=0,e=this._buttonList.length,i=App.LifeCycleState.DELETED,n=null,o=null;e>t;t++)this._buttonPool.release(this._buttonList.removeItemAt(0));for(t=0,e=this._model.length();e>t;)n=this._model.getItemAt(t++),n.lifeCycleState!==i&&(o=this._buttonPool.allocate(),o.setModel(n),this._buttonList.add(o));this._buttonList.updateLayout(!0),this._pane.resize()},App.ReportScreen.prototype._onTweenComplete=function(){App.Screen.prototype._onTweenComplete.call(this),this._transitionState===App.TransitionState.SHOWN&&this._chart.show()},App.ReportScreen.prototype._updateLayout=function(){var t=this._layout.width,e=Math.round(10*this._layout.pixelRatio),i=this._chart.boundingBox;this._chart.x=Math.round((t-i.width)/2),this._chart.y=e,this._pane.x=e,this._pane.y=Math.round(.3*this._layout.contentHeight)},App.ReportScreen.prototype._onTick=function(){App.Screen.prototype._onTick.call(this),this._layoutDirty&&(this._layoutDirty=this._buttonsInTransition(),this._updateListLayout(!1))},App.ReportScreen.prototype._closeButtons=function(t){for(var e=0,i=this._buttonList.children.length,n=null;i>e;)n=this._buttonList.getChildAt(e++),n!==this._interactiveButton&&n.isOpen()&&n.close(t)},App.ReportScreen.prototype._onClick=function(){var t=this.stage.getTouchData();this._interactiveButton=this._buttonList.getItemUnderPoint(t),this._interactiveButton&&(this._interactiveButton.onClick(t),this._pane.cancelScroll(),this._closeButtons(),this._chart.highlightSegment(this._buttonList.getChildIndex(this._interactiveButton)),this._layoutDirty=!0)},App.ReportScreen.prototype._onHeaderClick=function(t){var e=App.HeaderAction,i=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate();t===e.ADD_TRANSACTION?App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,{type:App.EventType.CREATE,nextCommand:new App.ChangeScreen,nextCommandData:i.update()}):t===e.MENU&&App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,i.update(App.ScreenName.MENU,0,null,e.NONE,e.CANCEL,App.ScreenTitle.MENU))},App.ReportScreen.prototype._updateListLayout=function(){this._interactiveButton&&this._interactiveButton.updateLayout(),this._buttonList.updateLayout(!0),this._pane.resize()},App.ReportScreen.prototype._buttonsInTransition=function(){for(var t=0,e=this._buttonList.children.length,i=!1;e>t;)if(this._buttonList.getChildAt(t++).isInTransition()){i=!0;break}return i},App.ChangeCategory=function(t){App.SequenceCommand.call(this,!1,t||App.ModelLocator.getProxy(App.ModelName.EVENT_LISTENER_POOL))},App.ChangeCategory.prototype=Object.create(App.SequenceCommand.prototype),App.ChangeCategory.prototype.constructor=App.ChangeCategory,App.ChangeCategory.prototype.execute=function(t){var e=App.EventType,i=t.category,n=t.type;this._nextCommand=t.nextCommand,this._nextCommandData=t.nextCommandData,n===e.CREATE?(i=new App.Category,i.account=t.account.id,this._nextCommandData.updateData=i):n===e.CHANGE?(i.name=t.name||i.name,i.icon=t.icon||i.icon,i.color=t.color||i.color,i.budget=t.budget||i.budget,this._registerSubCategories(i)):n===e.CONFIRM?(i.name=t.name,i.icon=t.icon,i.color=t.color,i.budget=t.budget,this._registerSubCategories(i),this._registerCategory(i)):n===e.CANCEL?this._cancelChanges(i):n===e.DELETE&&this._deleteCategory(i),this._nextCommand?this._executeNextCommand(this._nextCommandData):this.dispatchEvent(e.COMPLETE,this)},App.ChangeCategory.prototype._registerCategory=function(t){var e=App.ModelLocator,i=App.ModelName,n=e.getProxy(i.CATEGORIES);-1===n.indexOf(t)&&(n.addItem(t),e.getProxy(i.ACCOUNTS).find("id",t.account).addCategory(t))},App.ChangeCategory.prototype._registerSubCategories=function(t){for(var e=App.ModelLocator,i=App.ModelName,n=e.getProxy(i.SUB_CATEGORIES),o=t.subCategories,s=null,p=0,r=o.length;r>p;)s=o[p++],-1===n.indexOf(s)&&n.addItem(s)},App.ChangeCategory.prototype._cancelChanges=function(t){var e=App.ModelLocator.getProxy(App.ModelName.SUB_CATEGORIES),i=t.subCategories,n=0,o=i.length;t.revokeState();for(var s=t.subCategories;o>n;n++)-1===s.indexOf(i[n])&&e.indexOf(i[n])>-1&&e.removeItem(i[n]);for(n=0,o=s.length;o>n;)s[n++].revokeState()},App.ChangeCategory.prototype._deleteCategory=function(t){{var e=App.ModelLocator,i=App.ModelName,n=(e.getProxy(i.SUB_CATEGORIES),t.subCategories);n.length}e.getProxy(i.ACCOUNTS).find("id",t.account).removeCategory(t),t.destroy()},App.Menu=function(t){App.Screen.call(this,t);var e=App.MenuItem,i=App.ScreenName,n=App.FontStyle,o=t.pixelRatio,s=t.width,p=n.get(20,n.WHITE,null,n.LIGHT_CONDENSED),r={width:s,height:Math.round(40*o),pixelRatio:o,style:p};this._addTransactionItem=new e("Add Transaction","transactions",i.ADD_TRANSACTION,{width:s,height:Math.round(50*o),pixelRatio:o,style:p}),this._accountsItem=new e("Accounts","account",i.ACCOUNT,r),this._reportItem=new e("Report","chart",i.REPORT,r),this._budgetItem=new e("Budgets","budget",-1,r),this._transactionsItem=new e("Transactions","transactions",i.TRANSACTIONS,r),this._currenciesItem=new e("Currency rates","currencies",i.CURRENCY_PAIRS,r),this._settignsItem=new e("Settings","settings-app",i.SETTINGS,r),this._container=new PIXI.Graphics,this._pane=new App.Pane(App.ScrollPolicy.OFF,App.ScrollPolicy.AUTO,s,t.contentHeight,o,!1),this._background=new PIXI.Graphics,this._items=[],this._render(),this.addChild(this._background),this._items.push(this._container.addChild(this._addTransactionItem)),this._items.push(this._container.addChild(this._accountsItem)),this._items.push(this._container.addChild(this._reportItem)),this._items.push(this._container.addChild(this._budgetItem)),this._items.push(this._container.addChild(this._transactionsItem)),this._items.push(this._container.addChild(this._currenciesItem)),this._items.push(this._container.addChild(this._settignsItem)),this._pane.setContent(this._container),this.addChild(this._pane)},App.Menu.prototype=Object.create(App.Screen.prototype),App.Menu.prototype.constructor=App.Menu,App.Menu.prototype._render=function(){var t=this._layout.pixelRatio,e=Math.round(2*t),i=Math.round(25*t),n=App.GraphicUtils,o=App.ColorTheme.BLUE_DARK;this._accountsItem.y=this._addTransactionItem.boundingBox.height+i,this._reportItem.y=this._accountsItem.y+this._accountsItem.boundingBox.height+e,this._budgetItem.y=this._reportItem.y+this._reportItem.boundingBox.height+e,this._transactionsItem.y=this._budgetItem.y+this._budgetItem.boundingBox.height+e,this._currenciesItem.y=this._transactionsItem.y+this._transactionsItem.boundingBox.height+i,this._settignsItem.y=this._currenciesItem.y+this._currenciesItem.boundingBox.height+e,n.drawRect(this._container,o,1,0,0,this._layout.width,this._settignsItem.y+this._settignsItem.boundingBox.height),n.drawRect(this._background,o,1,0,0,this._layout.width,this._layout.contentHeight)},App.Menu.prototype.enable=function(){this._enabled||(this._registerEventListeners(App.EventLevel.LEVEL_1),this._registerEventListeners(App.EventLevel.LEVEL_2),this._pane.resetScroll(),this._pane.enable(),this._enabled=!0)},App.Menu.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._pane.disable()},App.Menu.prototype._onClick=function(){this._pane.cancelScroll();var t=App.ScreenName,e=App.ScreenTitle,i=App.HeaderAction,n=this._getItemByPosition(this.stage.getTouchData().getLocalPosition(this._container).y),o=n?n.getScreenName():t.BACK,s=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(o,0,null,i.MENU,i.ADD_TRANSACTION);switch(o){case t.ADD_TRANSACTION:App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,{type:App.EventType.CREATE,nextCommand:new App.ChangeScreen,nextCommandData:s.update()});break;case t.ACCOUNT:s.screenMode=App.ScreenMode.EDIT,s.headerName=e.ACCOUNTS,App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,s);break;case t.REPORT:s.headerName=e.REPORT,App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,s);break;case t.TRANSACTIONS:s.headerName=e.TRANSACTIONS,s.updateData=App.ModelLocator.getProxy(App.ModelName.TRANSACTIONS).copySource().reverse(),App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,s);break;case t.CURRENCY_PAIRS:s.screenMode=App.ScreenMode.EDIT,s.headerName=e.CURRENCY_RATES,App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,s);break;case t.SETTINGS:s.headerName=e.SETTINGS,App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,s)}},App.Menu.prototype._getItemByPosition=function(t){for(var e=0,i=this._items.length,n=null;i>e;)if(n=this._items[e++],t>=n.y&&t<n.y+n.boundingBox.height)return n;return null},App.ReportChartHighlight=function(t,e,i,n){PIXI.Graphics.call(this),this._width=e,this._height=i,this._center=t,this._thickness=n,this._oldStart=0,this._oldEnd=0,this._start=0,this._end=0,this._color=0},App.ReportChartHighlight.prototype=Object.create(PIXI.Graphics.prototype),App.ReportChartHighlight.prototype.constructor=App.ReportChartHighlight,App.ReportChartHighlight.prototype.change=function(t,e,i){this._oldStart=this._start,this._oldEnd=this._end,this._start=t,this._end=e,this._color=i},App.ReportChartHighlight.prototype.update=function(t){var e=this._oldStart+(this._start-this._oldStart)*t,i=this._oldEnd+(this._end-this._oldEnd)*t;App.GraphicUtils.drawArc(this,this._center,this._width,this._height,this._thickness,e,i,20,0,0,0,this._color,1)},App.AccountButton=function(t,e){App.SwipeButton.call(this,e.width,e.openOffset),this.allocated=!1,this.poolIndex=t,this.boundingBox=new PIXI.Rectangle(0,0,e.width,e.height),this._model=null,this._mode=App.ScreenMode.SELECT,this._pixelRatio=e.pixelRatio,this._background=this.addChild(new PIXI.Graphics),this._editLabel=this.addChild(new PIXI.Text("Edit",e.editStyle)),this._swipeSurface=this.addChild(new PIXI.DisplayObjectContainer),this._skin=this._swipeSurface.addChild(new PIXI.Sprite(e.skin)),this._nameLabel=this._swipeSurface.addChild(new PIXI.Text("",e.nameStyle)),this._detailsLabel=this._swipeSurface.addChild(new PIXI.Text("Balance: 2.876, Expenses: -250, Income: 1.500",e.detailStyle)),this._renderAll=!0},App.AccountButton.prototype=Object.create(App.SwipeButton.prototype),App.AccountButton.prototype.constructor=App.AccountButton,App.AccountButton.prototype._render=function(){if(this._renderAll){var t=this.boundingBox.width,e=this.boundingBox.height,i=this._pixelRatio,n=Math.round(15*i);this._renderAll=!1,App.GraphicUtils.drawRect(this._background,App.ColorTheme.RED,1,0,0,t,e),this._editLabel.x=Math.round(t-50*this._pixelRatio),this._editLabel.y=Math.round((e-this._editLabel.height)/2),this._nameLabel.x=n,this._nameLabel.y=n,this._detailsLabel.x=n,this._detailsLabel.y=Math.round(45*i)}},App.AccountButton.prototype.setModel=function(t,e){this._model=t,this._mode=e,this._nameLabel.setText(this._model.name),this._render()},App.AccountButton.prototype.getModel=function(){return this._model},App.AccountButton.prototype.getClickMode=function(t){return this._isOpen&&t.getLocalPosition(this).x>=this._width-this._openOffset?App.ScreenMode.EDIT:App.ScreenMode.SELECT},App.AccountButton.prototype._updateSwipePosition=function(t){this._swipeSurface.x=t},App.AccountButton.prototype._getSwipePosition=function(){return this._swipeSurface.x},App.ChangeTransaction=function(t){App.SequenceCommand.call(this,!1,t)},App.ChangeTransaction.prototype=Object.create(App.SequenceCommand.prototype),App.ChangeTransaction.prototype.constructor=App.ChangeTransaction,App.ChangeTransaction.prototype.execute=function(t){var e=App.EventType,i=App.ModelLocator,n=App.ModelName,o=i.getProxy(n.SETTINGS),s=i.getProxy(n.TRANSACTIONS),p=s.getCurrent(),r=t.type;this._nextCommand=t.nextCommand,this._nextCommandData=t.nextCommandData,r===e.CREATE?(p=new App.Transaction,s.addItem(p),s.setCurrent(p),t.nextCommandData.updateData=p):r===e.COPY?(p=t.transaction.copy(),s.addItem(p),s.setCurrent(p),t.nextCommandData.updateData=p):r===e.CHANGE?(this._setInputs(p,t,!1),this._setToggles(p,t),this._setCategories(p,t,o),this._setTime(p,t),this._setMethod(p,t,o),this._setCurrency(p,t,o)):r===e.CONFIRM?(this._setInputs(p,t,!0),this._setToggles(p,t),this._setMethod(p,t,o),p.currencyBase=o.baseCurrency,p.save(),s.setCurrent(null)):r===e.CANCEL?p.isSaved()?(p.revokeState(),s.setCurrent(null)):s.removeItem(p).destroy():r===e.DELETE&&(s.removeItem(p).destroy(),t.nextCommandData.updateData=s.copySource().reverse()),this._nextCommand?this._executeNextCommand(this._nextCommandData):this.dispatchEvent(e.COMPLETE,this)},App.ChangeTransaction.prototype._setInputs=function(t,e,i){t.amount=e.amount||t.amount,t.note=e.note||t.note,i&&!t.amount&&(t.amount="0")},App.ChangeTransaction.prototype._setToggles=function(t,e){t.type=e.transactionType||t.type,"boolean"==typeof e.pending&&(t.pending=e.pending),"boolean"==typeof e.repeat&&(t.repeat=e.repeat)},App.ChangeTransaction.prototype._setCategories=function(t,e,i){e.account&&e.category&&e.subCategory&&(t.account=e.account,t.category=e.category,t.subCategory=e.subCategory,i.defaultAccount=e.account,i.defaultCategory=e.category,i.defaultSubCategory=e.subCategory)},App.ChangeTransaction.prototype._setTime=function(t,e){var i=e.date,n=e.time;i&&n&&(t.date.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()),n.length>0&&t.date.setHours(parseInt(n.split(":")[0],10),parseInt(n.split(":")[1],10)))},App.ChangeTransaction.prototype._setMethod=function(t,e,i){if(e.method){var n=App.ModelLocator.getProxy(App.ModelName.PAYMENT_METHODS).find("name",e.method);t.method=n,i.defaultPaymentMethod=n}},App.ChangeTransaction.prototype._setCurrency=function(t,e,i){e.currencyQuote&&(t.currencyQuote=e.currencyQuote,i.defaultCurrencyQuote=e.currencyQuote)},App.ChangeScreen=function(){App.Command.call(this,!1,App.ModelLocator.getProxy(App.ModelName.EVENT_LISTENER_POOL))},App.ChangeScreen.prototype=Object.create(App.Command.prototype),App.ChangeScreen.prototype.constructor=App.ChangeScreen,App.ChangeScreen.prototype.execute=function(t){var e=App.ViewLocator,i=App.ViewName,n=App.ModelLocator,o=App.ModelName,s=n.getProxy(o.CHANGE_SCREEN_DATA_POOL),p=n.getProxy(o.SCREEN_HISTORY),r=e.getViewSegment(i.SCREEN_STACK),h=null;if(t.screenName===App.ScreenName.BACK){for(var a=t.updateBackScreen,l=0,c=t.backSteps;c>l;l++)s.release(p.pop());s.release(t),t=p.peek(),h=r.getChildByIndex(t.screenName),a&&h.update(t.updateData,t.screenMode)}else t.headerLeftAction!==App.HeaderAction.CANCEL&&t.headerRightAction!==App.HeaderAction.CANCEL&&t.screenMode!==App.ScreenMode.SELECT&&this._clearHistory(p,s),h=r.getChildByIndex(t.screenName),h.update(t.updateData,t.screenMode),p.push(t);e.getViewSegment(i.HEADER).change(t.headerLeftAction,t.headerRightAction,t.headerName),r.selectChild(h),this.dispatchEvent(App.EventType.COMPLETE,this)},App.ChangeScreen.prototype._clearHistory=function(t,e){for(var i=t.pop();i;)e.release(i),i=t.pop();t.clear()},App.ReportCategoryButton=function(t,e){App.ExpandButton.call(this,e.width,e.height,!1),this.allocated=!1,this.poolIndex=t,this._model=null,this._pixelRatio=e.pixelRatio,this._buttonPool=e.subCategoryButtonPool,this._background=this.addChild(new PIXI.Sprite(e.skin)),this._colorStripe=this.addChild(new PIXI.Graphics),this._nameField=this.addChild(new PIXI.Text("",e.labelStyles.name)),this._percentField=this.addChild(new PIXI.Text("%",e.labelStyles.percent)),this._amountField=this.addChild(new PIXI.Text("",e.labelStyles.amount)),this._subCategoryList=new App.List(App.Direction.Y),this._updated=!1,this._render(),this._setContent(this._subCategoryList),this.addChild(this._subCategoryList)},App.ReportCategoryButton.prototype=Object.create(App.ExpandButton.prototype),App.ReportCategoryButton.prototype.constructor=App.ReportCategoryButton,App.ReportCategoryButton.prototype._render=function(){var t=Math.round(10*this._pixelRatio),e=this.boundingBox.width,i=this.boundingBox.height;this._nameField.x=Math.round(15*this._pixelRatio),this._nameField.y=Math.round((i-this._nameField.height)/2),this._percentField.x=Math.round(.7*e-this._percentField.width),this._percentField.y=Math.round((i-this._percentField.height)/2),this._amountField.x=Math.round(e-t-this._amountField.width),this._amountField.y=Math.round((i-this._amountField.height)/2)},App.ReportCategoryButton.prototype.setModel=function(t){this._updated=!1,this._model=t,this.close(!0),this._nameField.setText(this._model.name),App.GraphicUtils.drawRect(this._colorStripe,"0x"+this._model.color,1,0,0,Math.round(4*this._pixelRatio),this.boundingBox.height)},App.ReportCategoryButton.prototype._update=function(){this._updated=!0;for(var t=0,e=this._subCategoryList.length,i=this._model.subCategories,n="0x"+this._model.color,o=null,s=null;e>t;t++)this._buttonPool.release(this._subCategoryList.removeItemAt(0));for(t=0,e=i.length;e>t;)o=i[t++],s=this._buttonPool.allocate(),s.setModel(o,n),this._subCategoryList.add(s);this._subCategoryList.updateLayout()},App.ReportCategoryButton.prototype.onClick=function(t){var e=App.TransitionState;this._transitionState===e.CLOSED||this._transitionState===e.CLOSING?(this._updated||this._update(),this.open(!0)):(this._transitionState===e.OPEN||this._transitionState===e.OPENING)&&this.close(!1,!0)},App.TransactionOptionButton=function(t,e,i){PIXI.DisplayObjectContainer.call(this);var n=PIXI.Text,o=PIXI.Sprite;this.boundingBox=new App.Rectangle(0,0,i.width,i.height),this._options=i,this._value=null,this._pixelRatio=i.pixelRatio,this._skin=new o(i.skin),this._icon=new o.fromFrame(t),this._nameField=new n(e,i.nameStyle),this._valueField=new n("",i.valueStyle),this._valueDetailField=null,this._arrow=new o.fromFrame("arrow-app"),this._iconResizeRatio=Math.round(20*this._pixelRatio)/this._icon.height,this._arrowResizeRatio=Math.round(12*this._pixelRatio)/this._arrow.height,this._render(),this._update(),this.addChild(this._skin),this.addChild(this._icon),this.addChild(this._nameField),this.addChild(this._valueField),this.addChild(this._arrow)},App.TransactionOptionButton.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.TransactionOptionButton.prototype.constructor=App.TransactionOptionButton,App.TransactionOptionButton.prototype._render=function(){var t=App.ColorTheme,e=this._pixelRatio,i=this.boundingBox.height;this._icon.scale.x=this._iconResizeRatio,this._icon.scale.y=this._iconResizeRatio,this._icon.x=Math.round(15*e),this._icon.y=Math.round((i-this._icon.height)/2),this._icon.tint=t.GREY_DARK,this._nameField.x=Math.round(50*e),this._nameField.y=Math.round((i-this._nameField.height)/2),this._arrow.scale.x=this._arrowResizeRatio,this._arrow.scale.y=this._arrowResizeRatio,this._arrow.x=Math.round(this.boundingBox.width-15*e-this._arrow.width),this._arrow.y=Math.round((i-this._arrow.height)/2),this._arrow.tint=t.GREY_DARK},App.TransactionOptionButton.prototype._update=function(){var t=this._pixelRatio,e=this.boundingBox.width-35*t;this._valueField.x=Math.round(e-this._valueField.width),this._valueDetailField&&this.contains(this._valueDetailField)?(this._valueField.y=Math.round(9*t),this._valueDetailField.y=Math.round(30*t),this._valueDetailField.x=Math.round(e-this._valueDetailField.width)):this._valueField.y=Math.round((this.boundingBox.height-this._valueField.height)/2)},App.TransactionOptionButton.prototype.setValue=function(t,e){this._value=t,this._valueField.setText(t),e?(this._valueDetailField?this._valueDetailField.setText(e):this._valueDetailField=new PIXI.Text(e,this._options.valueDetailStyle),this.contains(this._valueDetailField)||this.addChild(this._valueDetailField)):this._valueDetailField&&this.contains(this._valueDetailField)&&this.removeChild(this._valueDetailField),this._update()},App.TransactionOptionButton.prototype.getValue=function(){return this._value},App.CurrencyPairScreen=function(t){App.Screen.call(this,t,.4);var e=App.ScrollPolicy,i=App.FontStyle,n=t.pixelRatio,o=t.contentHeight-Math.round(60*n),s=t.width,p=App.ViewLocator.getViewSegment(App.ViewName.SKIN),r={width:s,height:Math.round(50*n),pixelRatio:n,skin:p.GREY_50,editLabelStyle:i.get(18,i.WHITE,null,i.LIGHT_CONDENSED),pairLabelStyle:i.get(18,i.BLUE),rateLabelStyle:i.get(18,i.BLUE,null,i.LIGHT_CONDENSED),openOffset:Math.round(80*n)};this._model=App.ModelLocator.getProxy(App.ModelName.CURRENCY_PAIRS),this._interactiveButton=null,this._downloadButtonBackground=this.addChild(new PIXI.Sprite(p.GREY_60)),this._downloadButton=this.addChild(new App.Button("Update rates from internet",{width:Math.round(s-20*n),height:Math.round(40*n),pixelRatio:n,style:i.get(18,i.BLACK_LIGHT,null,i.LIGHT_CONDENSED),backgroundColor:App.ColorTheme.GREY_DARK})),this._buttonPool=new App.ObjectPool(App.CurrencyPairButton,4,r),this._buttonList=new App.VirtualList(this._buttonPool,App.Direction.Y,s,o,n),this._pane=this.addChild(new App.TilePane(e.OFF,e.AUTO,s,o,n,!0)),this._pane.setContent(this._buttonList),this._swipeEnabled=!0,this._initialized=!1},App.CurrencyPairScreen.prototype=Object.create(App.Screen.prototype),App.CurrencyPairScreen.prototype.constructor=App.CurrencyPairScreen,App.CurrencyPairScreen.prototype._render=function(){var t=Math.round(10*this._layout.pixelRatio),e=this._downloadButton.boundingBox.height+2*t;this._downloadButton.x=t,this._downloadButton.y=t,this._pane.y=e},App.CurrencyPairScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._pane.resetScroll(),this._pane.enable()},App.CurrencyPairScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._pane.disable()},App.CurrencyPairScreen.prototype.update=function(t,e){this._initialized?(this._pane.resetScroll(),this._buttonList.reset()):(this._initialized=!0,this._render(),this._buttonList.update(this._model.copySource()),this._pane.resize())},App.CurrencyPairScreen.prototype._onTweenComplete=function(){App.Screen.prototype._onTweenComplete.call(this),this._transitionState===App.TransitionState.HIDDEN&&this._closeButtons(!0)},App.CurrencyPairScreen.prototype._swipeStart=function(t,e){var i=this._buttonList.getItemUnderPoint(this.stage.getTouchData());i&&(t||this._pane.cancelScroll(),this._interactiveButton=i,this._interactiveButton.swipeStart(e),this._closeButtons(!1))},App.CurrencyPairScreen.prototype._swipeEnd=function(){this._interactiveButton&&(this._interactiveButton.swipeEnd(),this._interactiveButton=null)},App.CurrencyPairScreen.prototype._closeButtons=function(t){for(var e=0,i=this._buttonList.children.length,n=null;i>e;)n=this._buttonList.getChildAt(e++),n!==this._interactiveButton&&n.close(t)},App.CurrencyPairScreen.prototype._onClick=function(){var t=this.stage.getTouchData(),e=this._buttonList.getItemUnderPoint(t);e&&e.onClick(t)},App.CurrencyPairScreen.prototype._onHeaderClick=function(t){var e=App.HeaderAction,i=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate();t===e.ADD_TRANSACTION?App.Controller.dispatchEvent(App.EventType.CHANGE_TRANSACTION,{type:App.EventType.CREATE,nextCommand:new App.ChangeScreen,nextCommandData:i.update()}):t===e.MENU&&App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,i.update(App.ScreenName.MENU,0,null,e.NONE,e.CANCEL,App.ScreenTitle.MENU))},App.AddNewButton=function(t,e,i,n){PIXI.DisplayObjectContainer.call(this),this.boundingBox=new App.Rectangle(0,0,i.width,i.height),this._label=t,this._pixelRatio=n,this._skin=new PIXI.Sprite(i),this._icon=PIXI.Sprite.fromFrame("plus-app"),this._iconResizeRatio=Math.round(20*n)/this._icon.height,this._labelField=new PIXI.Text(t,e),this._render(),this.addChild(this._skin),this.addChild(this._icon),this.addChild(this._labelField)},App.AddNewButton.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.AddNewButton.prototype.constructor=App.AddNewButton,App.AddNewButton.prototype._render=function(){var t=Math.round(10*this._pixelRatio),e=this.boundingBox.height,i=0;this._icon.scale.x=this._iconResizeRatio,this._icon.scale.y=this._iconResizeRatio,i=Math.round((this.boundingBox.width-(this._labelField.width+t+this._icon.width))/2),this._icon.x=i,this._icon.y=Math.round((e-this._icon.height)/2),this._icon.tint=App.ColorTheme.GREY_DARK,this._labelField.x=i+this._icon.width+t,this._labelField.y=Math.round((e-this._labelField.height)/2)},App.TileList=function(t,e){App.List.call(this,t),this._windowSize=e},App.TileList.prototype=Object.create(App.List.prototype),App.TileList.prototype.constructor=App.TileList,App.TileList.prototype.updateX=function(t){this.x=Math.round(t);for(var e=0,i=this._items.length,n=0,o=0,s=null;i>e;)s=this._items[e++],n=s.boundingBox.width,o=this.x+s.x,
s.visible=o+n>0&&o<this._windowSize},App.TileList.prototype.updateY=function(t){this.y=Math.round(t);for(var e=0,i=this._items.length,n=0,o=0,s=null;i>e;)s=this._items[e++],n=s.boundingBox.height,o=this.y+s.y,s.visible=o+n>0&&o<this._windowSize},App.TileList.prototype.updateLayout=function(t){App.List.prototype.updateLayout.call(this),t&&(this._direction===App.Direction.X?this.updateX(this.x):this._direction===App.Direction.Y&&this.updateY(this.y))},App.ReportChart=function(t,e,i,n){var o=App.ModelLocator,s=App.ModelName,p=PIXI.Graphics,r=[16711680,12609228,255],h=0,a=3,l=null;for(p.call(this),this.boundingBox=new App.Rectangle(0,0,e,i),this._ticker=o.getProxy(s.TICKER),this._tween=new App.TweenProxy(1,App.Easing.outExpo,0,o.getProxy(s.EVENT_LISTENER_POOL)),this._transitionState=App.TransitionState.HIDDEN,this._eventsRegistered=!1,this._center=new PIXI.Point(Math.round(e/2),Math.round(i/2)),this._thickness=Math.round(15*n),this._chartSize=e-Math.round(5*n*2),this._segments=new Array(a),this._highlight=new App.ReportChartHighlight(this._center,e,i,Math.round(3*n)),this._updateHighlight=!1,this._highlightSegment=void 0;a>h;h++)l=new p,this._segments[h]={graphics:l,progress:0,color:r[h]},this.addChild(l);this.addChild(this._highlight)},App.ReportChart.prototype=Object.create(PIXI.Graphics.prototype),App.ReportChart.prototype.constructor=App.ReportChart,App.ReportChart.prototype.show=function(){var t=App.TransitionState;this._transitionState===t.HIDDEN?(this._registerEventListeners(),this._transitionState=t.SHOWING,this._tween.start()):this._transitionState===t.HIDING&&(this._transitionState=t.SHOWING,this._tween.restart())},App.ReportChart.prototype.hide=function(){var t=App.TransitionState;this._transitionState===t.SHOWN?(this._registerEventListeners(),this._transitionState=t.HIDING,this._tween.start()):this._transitionState===t.SHOWING&&(this._transitionState=t.HIDING,this._tween.restart())},App.ReportChart.prototype.highlightSegment=function(t){t!==this._highlightSegment&&this._transitionState===App.TransitionState.SHOWN&&(this._registerEventListeners(),this._highlight.change(0===t?0:this._segments[t-1].progress,this._segments[t].progress,this._segments[t].color),this._highlightSegment=t,this._updateHighlight=!0,this._tween.restart())},App.ReportChart.prototype._registerEventListeners=function(){this._eventsRegistered||(this._eventsRegistered=!0,this._ticker.addEventListener(App.EventType.TICK,this,this._onTick),this._tween.addEventListener(App.EventType.COMPLETE,this,this._onTweenComplete))},App.ReportChart.prototype._unRegisterEventListeners=function(){this._ticker.removeEventListener(App.EventType.TICK,this,this._onTick),this._tween.removeEventListener(App.EventType.COMPLETE,this,this._onTweenComplete),this._eventsRegistered=!1},App.ReportChart.prototype._onTick=function(){this._tween.isRunning()&&(this._updateHighlight?this._highlight.update(this._tween.progress):this._updateTween(!1))},App.ReportChart.prototype._updateTween=function(t){var e=App.GraphicUtils,i=App.TransitionState,n=this._tween.progress,o=0,s=this._segments.length,p=t?20:10,r=0,h=0,a=null;for((this._transitionState===i.HIDING||this._transitionState===i.HIDDEN)&&(n=1-n);s>o;o++)a=this._segments[o],h=(o+1)*(1/s),a.progress=360*(h>n?n:h),r=0===o?0:this._segments[o-1].progress,e.drawArc(a.graphics,this._center,this._chartSize,this._chartSize,this._thickness,r,a.progress,p,0,0,0,a.color,1)},App.ReportChart.prototype._onTweenComplete=function(){var t=App.TransitionState;this._transitionState===t.SHOWING?this._transitionState=t.SHOWN:this._transitionState===t.HIDING&&(this._transitionState=t.HIDDEN),this._updateTween(!0),this._unRegisterEventListeners(),this._updateHighlight&&(this._updateHighlight=!1,this._highlight.update(1))},App.ViewLocator={_viewSegments:{},init:function(t){for(var e=0,i=t.length;i>e;)this._viewSegments[t[e++]]=t[e++]},addViewSegment:function(t,e){if(this._viewSegments[t])throw Error("View segment "+t+" already exist");return this._viewSegments[t]=e,e},hasViewSegment:function(t){return this._viewSegments[t]},getViewSegment:function(t){return this._viewSegments[t]}},App.Button=function(t,e){PIXI.Graphics.call(this),this.boundingBox=new App.Rectangle(0,0,e.width,e.height),this._pixelRatio=e.pixelRatio,this._label=t,this._style=e.style,this._backgroundColor=e.backgroundColor,this._labelField=new PIXI.Text(t,this._style),this._render(),this.addChild(this._labelField)},App.Button.prototype=Object.create(PIXI.Graphics.prototype),App.Button.prototype.constructor=App.Button,App.Button.prototype._render=function(){var t=this.boundingBox.width,e=this.boundingBox.height;App.GraphicUtils.drawRoundedRect(this,this._backgroundColor,1,0,0,t,e,Math.round(5*this._pixelRatio)),this._labelField.x=Math.round((t-this._labelField.width)/2),this._labelField.y=Math.round((e-this._labelField.height)/2)},App.Button.prototype.resize=function(t,e){this.boundingBox.width=t||this.boundingBox.width,this.boundingBox.height=e||this.boundingBox.height,this._render()},App.Button.prototype.hitTest=function(t){return t.x>=this.x&&t.x<this.x+this.boundingBox.width&&t.y>=this.y&&t.y<this.y+this.boundingBox.height},App.CategoryButtonExpand=function(t,e){App.ExpandButton.call(this,e.width,e.height,!0),this.allocated=!1,this.poolIndex=t,this._model=null,this._mode=null,this._pixelRatio=e.pixelRatio,this._surface=new App.CategoryButtonSurface(e),this._subCategoryList=new App.SubCategoryList(e),this._layoutDirty=!0,this._setContent(this._subCategoryList),this.addChild(this._subCategoryList),this.addChild(this._surface)},App.CategoryButtonExpand.prototype=Object.create(App.ExpandButton.prototype),App.CategoryButtonExpand.prototype.constructor=App.CategoryButtonExpand,App.CategoryButtonExpand.prototype._render=function(){this._surface.render(this._model.name,this._model.icon,this._model.color)},App.CategoryButtonExpand.prototype.update=function(t,e){this._model=t,this._mode=e,this._layoutDirty=!0,this._render(),this.close(!0)},App.CategoryButtonExpand.prototype.onClick=function(t){var e=App.TransitionState;if(this._transitionState===e.CLOSED||this._transitionState===e.CLOSING)this.open();else if(t.getLocalPosition(this).y<=this._buttonHeight)this.close();else{this._eventDispatcher.dispatchEvent(App.EventType.COMPLETE,this);var i=this._subCategoryList.getItemUnderPoint(t);if(i){var n=App.ModelLocator,o=App.ModelName,s=App.EventType,p=n.getProxy(o.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.BACK);i instanceof App.AddNewButton?(p.screenName=App.ScreenName.EDIT,p.headerName=App.ScreenTitle.ADD_SUB_CATEGORY,App.Controller.dispatchEvent(s.CHANGE_SUB_CATEGORY,{type:s.CREATE,category:this._model,nextCommand:new App.ChangeScreen,nextCommandData:p})):(p.backSteps=n.getProxy(o.SCREEN_HISTORY).peek(2).screenName===App.ScreenName.ACCOUNT?2:1,p.updateBackScreen=!0,App.Controller.dispatchEvent(s.CHANGE_TRANSACTION,{type:s.CHANGE,account:n.getProxy(o.ACCOUNTS).find("id",this._model.account),category:this._model,subCategory:i.getModel(),nextCommand:new App.ChangeScreen,nextCommandData:p}))}}},App.CategoryButtonExpand.prototype.open=function(){this._layoutDirty&&(this._subCategoryList.update(this._model,this._mode),this._contentHeight=this._subCategoryList.boundingBox.height,this._layoutDirty=!1),App.ExpandButton.prototype.open.call(this)},App.CategoryButtonExpand.prototype.disable=function(){this.close(!0)},App.Controller={_eventListenerPool:null,_eventCommandMap:{},_commands:[],init:function(t,e){this._eventListenerPool=t;for(var i=0,n=e.length;n>i;)this._eventCommandMap[e[i++]]={constructor:e[i++]}},_onCommandComplete:function(t){this._destroyCommand(t)},_destroyCommand:function(t){for(var e=0,i=this._commands.length,n=null;i>e;)if(n=this._commands[e++],n===t){n.removeEventListener(App.EventType.COMPLETE,this,this._onCommandComplete),n.destroy(),this._commands.splice(e,1);break}},dispatchEvent:function(t,e,i){var n=this._eventCommandMap[t].constructor;if(n){var o=null;if(i)for(var s=0,p=this._commands.length;p>s;)o=this._commands[s++],o instanceof n&&!o.allowMultipleInstances&&this._destroyCommand(o);o=new n(this._eventListenerPool),this._commands.push(o),o.addEventListener(App.EventType.COMPLETE,this,this._onCommandComplete),o.execute(e)}}},App.SubCategoryList=function(t){PIXI.DisplayObjectContainer.call(this),this.boundingBox=new App.Rectangle(0,0,t.width,0),this._model=null,this._mode=null,this._width=t.width,this._pixelRatio=t.pixelRatio,this._interactiveButton=null,t.displayHeader&&(this._header=this.addChild(new App.ListHeader("Sub-Categories",this._width,this._pixelRatio))),this._buttonList=this.addChild(new App.List(App.Direction.Y)),this._addNewButton=new App.AddNewButton("ADD SUB-CATEGORY",t.addLabelStyle,t.addButtonSkin,this._pixelRatio)},App.SubCategoryList.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.SubCategoryList.prototype.constructor=App.SubCategoryList,App.SubCategoryList.prototype._render=function(){this._header&&(this._buttonList.y=this._header.height),this.boundingBox.height=this._buttonList.y+this._buttonList.boundingBox.height},App.SubCategoryList.prototype.update=function(t,e){this._model=t,this._buttonList.remove(this._addNewButton);for(var i=t.subCategories,n=App.ViewLocator.getViewSegment(App.ViewName.SUB_CATEGORY_BUTTON_POOL),o=0,s=this._buttonList.length,p=null;s>o;o++)n.release(this._buttonList.removeItemAt(0));for(o=0,s=i.length;s>o;)p=n.allocate(),p.update(i[o++],e),this._buttonList.add(p,!1);this._buttonList.add(this._addNewButton),this._buttonList.updateLayout(),this._render(),this._mode=e},App.SubCategoryList.prototype.swipeStart=function(t){var e=this._buttonList.getItemUnderPoint(this.stage.getTouchData());!e||e instanceof App.AddNewButton||(this._interactiveButton=e,this._interactiveButton.swipeStart(t),this.closeButtons(!1))},App.SubCategoryList.prototype.swipeEnd=function(){this._interactiveButton&&(this._interactiveButton.swipeEnd(),this._interactiveButton=null)},App.SubCategoryList.prototype.closeButtons=function(t){for(var e=0,i=this._buttonList.length-1,n=null;i>e;)n=this._buttonList.getItemAt(e++),n!==this._interactiveButton&&n.close(t)},App.SubCategoryList.prototype.getItemUnderPoint=function(t){return this._buttonList.getItemUnderPoint(t)},App.SubCategoryList.prototype.hitTest=function(t){return t>=this.y&&t<this.y+this.boundingBox.height},App.Radio=function(t,e){PIXI.Graphics.call(this),this._selected=e,this._size=Math.round(20*t),this._pixelRatio=t,this._check=new PIXI.Graphics,this.boundingBox=new App.Rectangle(0,0,this._size,this._size),this._render(),this._check.alpha=e?1:0,this.addChild(this._check)},App.Radio.prototype=Object.create(PIXI.Graphics.prototype),App.Radio.prototype.constructor=App.Radio,App.Radio.prototype._render=function(){var t=App.GraphicUtils.drawArc,e=App.ColorTheme,i=this._size,n=new PIXI.Point(Math.round(i/2),Math.round(i/2));t(this,n,i,i,Math.round(2*this._pixelRatio),0,360,20,0,0,0,e.GREY,1),i-=Math.round(8*this._pixelRatio),t(this._check,n,i,i,Math.round(6*this._pixelRatio),0,360,20,0,0,0,e.BLUE,1)},App.Radio.prototype.select=function(){this._selected=!0,this._check.alpha=1},App.Radio.prototype.deselect=function(){this._selected=!1,this._check.alpha=0},App.ReportAccountButton=function(t,e){App.ExpandButton.call(this,e.width,e.height,!0),this.allocated=!1,this.poolIndex=t,this._model=null,this._height=e.height,this._pixelRatio=e.pixelRatio,this._buttonPool=e.categoryButtonPool,this._background=this.addChild(new PIXI.Graphics),this._nameField=this.addChild(new PIXI.Text("",e.labelStyles.name)),this._amountField=this.addChild(new PIXI.Text("",e.labelStyles.amount)),this._categoryList=new App.List(App.Direction.Y),this._updated=!1,this._render(),this._setContent(this._categoryList),this.addChild(this._categoryList)},App.ReportAccountButton.prototype=Object.create(App.ExpandButton.prototype),App.ReportAccountButton.prototype.constructor=App.ReportAccountButton,App.ReportAccountButton.prototype._render=function(){var t=App.GraphicUtils,e=App.ColorTheme,i=this.boundingBox.width,n=this.boundingBox.height;t.drawRects(this._background,e.BLUE,1,[0,0,i,n],!0,!1),t.drawRects(this._background,e.BLUE_DARK,1,[0,n-1,i,1],!1,!0),this._nameField.x=Math.round(10*this._pixelRatio),this._nameField.y=Math.round((n-this._nameField.height)/2),this._amountField.x=Math.round(i-this._amountField.width-10*this._pixelRatio),this._amountField.y=Math.round((n-this._amountField.height)/2)},App.ReportAccountButton.prototype.setModel=function(t){this._updated=!1,this._model=t,this.close(!0),this._nameField.setText(this._model.name)},App.ReportAccountButton.prototype._update=function(){this._updated=!0;for(var t=0,e=this._categoryList.length,i=this._model.categories,n=null,o=null;e>t;t++)this._buttonPool.release(this._categoryList.removeItemAt(0));for(t=0,e=i.length;e>t;)n=i[t++],o=this._buttonPool.allocate(),o.setModel(n),this._categoryList.add(o);this._categoryList.updateLayout()},App.ReportAccountButton.prototype.onClick=function(t){var e=t.getLocalPosition(this).y,i=App.TransitionState,n=null;e<=this._height?this._transitionState===i.CLOSED||this._transitionState===i.CLOSING?(this._updated||this._update(),this.open(!0)):(this._transitionState===i.OPEN||this._transitionState===i.OPENING)&&this.close(!1,!0):e>this._height&&(n=this._categoryList.getItemUnderPoint(t),n&&n.onClick(e))},App.ReportAccountButton.prototype.updateLayout=function(){this._categoryList.updateLayout(),this._updateBounds(!0),this._updateMask()},App.ReportAccountButton.prototype.isInTransition=function(){var t=App.ExpandButton.prototype.isInTransition.call(this),e=0,i=this._categoryList.children.length;if(this.isOpen())for(;i>e;)if(this._categoryList.getChildAt(e++).isInTransition()){t=!0;break}return t},App.MenuItem=function(t,e,i,n){PIXI.Graphics.call(this),this.boundingBox=new App.Rectangle(0,0,n.width,n.height),this._screenName=i,this._pixelRatio=n.pixelRatio,this._icon=PIXI.Sprite.fromFrame(e),this._iconResizeRatio=Math.round(22*n.pixelRatio)/this._icon.height,this._labelField=new PIXI.Text(t,n.style),this._render(),this.addChild(this._icon),this.addChild(this._labelField)},App.MenuItem.prototype=Object.create(PIXI.Graphics.prototype),App.MenuItem.prototype.constructor=App.MenuItem,App.MenuItem.prototype._render=function(){var t=App.ColorTheme,e=this.boundingBox.height;this._icon.scale.x=this._iconResizeRatio,this._icon.scale.y=this._iconResizeRatio,this._icon.x=Math.round(15*this._pixelRatio),this._icon.y=Math.round((e-this._icon.height)/2),this._icon.tint=t.WHITE,this._labelField.x=Math.round(60*this._pixelRatio),this._labelField.y=Math.round((e-this._labelField.height)/2),App.GraphicUtils.drawRect(this,t.BLUE,1,0,0,this.boundingBox.width,e)},App.MenuItem.prototype.getScreenName=function(){return this._screenName},App.ChangeSubCategory=function(t){App.SequenceCommand.call(this,!1,t)},App.ChangeSubCategory.prototype=Object.create(App.SequenceCommand.prototype),App.ChangeSubCategory.prototype.constructor=App.ChangeSubCategory,App.ChangeSubCategory.prototype.execute=function(t){var e=App.EventType,i=t.subCategory,n=t.type;this._nextCommand=t.nextCommand,this._nextCommandData=t.nextCommandData,n===e.CREATE?(i=new App.SubCategory,i.category=t.category.id,this._nextCommandData.updateData={subCategory:i,category:t.category}):n===e.CHANGE?(i.name=t.name,t.category.addSubCategory(i)):n===e.DELETE&&t.category.removeSubCategory(i),this._nextCommand?this._executeNextCommand(this._nextCommandData):this.dispatchEvent(e.COMPLETE,this)},App.TweenProxy=function(t,e,i,n){App.EventDispatcher.call(this,n),this.progress=i||0,this._interval=-1,this._running=!1,this._reversed=!1,this._start=-1,this._end=-1,this._reversedEnd=-1,this._now=-1,this._duration=1e3*t||1e3,this._ease=e||App.Easing.linear,this._timeStamp=window.performance&&window.performance.now?window.performance:Date,this._intervalReference=this._tweenInterval.bind(this)},App.TweenProxy.prototype=Object.create(App.EventDispatcher.prototype),App.TweenProxy.prototype.constructor=App.TweenProxy,App.TweenProxy.prototype.setEase=function(t){this._ease=t},App.TweenProxy.prototype.start=function(t,e){e&&this.setEase(e),this._running?t&&(this._reversed?this._reversed=!1:(this._reversed=!0,this._reversedEnd=this._start+2*(this._now-this._start))):(this._running=!0,this._reversed=!1,this._tween())},App.TweenProxy.prototype.stop=function(){this._running=!1,clearInterval(this._interval),this._interval=-1},App.TweenProxy.prototype.restart=function(){this._running&&this.stop(),this.start()},App.TweenProxy.prototype.isRunning=function(){return this._running},App.TweenProxy.prototype._tween=function(){this._interval>0&&(clearInterval(this._interval),this._interval=-1),this.progress=0,this._start=this._timeStamp.now(),this._end=this._start+this._duration,this._interval=setInterval(this._intervalReference,1e3/120)},App.TweenProxy.prototype._tweenInterval=function(){this._now=this._timeStamp.now();var t=this._reversed?this._reversedEnd:this._end,e=(this._duration-(t-this._now))/this._duration;0>e?e=0:e>1&&(e=1),this.progress=this._ease(e),this._now>=t&&(this.progress=1,this.stop(),this.dispatchEvent(App.EventType.COMPLETE))},App.TweenProxy.prototype.destroy=function(){App.EventDispatcher.prototype.destroy.call(this),this.stop(),this._intervalReference=null,this._timeStamp=null,this._ease=null},App.List=function(t){PIXI.DisplayObjectContainer.call(this),this.boundingBox=new App.Rectangle,this._direction=t,this._items=[]},App.List.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.List.prototype.constructor=App.List,App.List.prototype.add=function(t,e){return this._items[this._items.length]=t,this.addChild(t),e&&this.updateLayout(),t},App.List.prototype.remove=function(t){this.removeItemAt(this._items.indexOf(t))},App.List.prototype.removeItemAt=function(t){var e=this._items.splice(t,1)[0];return this.removeChild(e),e},App.List.prototype.getItemAt=function(t){return this._items[t]},App.List.prototype.updateLayout=function(){var t=0,e=this._items.length,i=null,n=0,o=App.Direction;if(this._direction===o.X){for(;e>t;)i=this._items[t++],i.x=n,n=Math.round(n+i.boundingBox.width);this.boundingBox.width=n,this.boundingBox.height=i.boundingBox.height}else if(this._direction===o.Y){for(;e>t;)i=this._items[t++],i.y=n,n=Math.round(n+i.boundingBox.height);this.boundingBox.height=n,this.boundingBox.width=i.boundingBox.width}},App.List.prototype.getItemUnderPoint=function(t){var e=t.getLocalPosition(this).x,i="width",n=0,o="x",s=null,p=0,r=this._items.length;for(this._direction===App.Direction.Y&&(e=t.getLocalPosition(this).y,o="y",i="height");r>p;)if(s=this._items[p++],n=s[o],e>=n&&n+s.boundingBox[i]>=e)return s;return null},App.List.prototype.hitTest=function(t){return t>=this.y&&t<this.y+this.boundingBox.height},Object.defineProperty(App.List.prototype,"length",{get:function(){return this._items.length}}),App.ChangeAccount=function(t){App.SequenceCommand.call(this,!1,t)},App.ChangeAccount.prototype=Object.create(App.SequenceCommand.prototype),App.ChangeAccount.prototype.constructor=App.ChangeAccount,App.ChangeAccount.prototype.execute=function(t){var e=App.EventType,i=t.account,n=t.type;if(this._nextCommand=t.nextCommand,this._nextCommandData=t.nextCommandData,n===e.CREATE)i=new App.Account,this._nextCommandData.updateData=i;else if(n===e.CHANGE){if(i.name=t.name,i.lifeCycleState===App.LifeCycleState.CREATED){var o=App.ModelLocator.getProxy(App.ModelName.ACCOUNTS);-1===o.indexOf(i)&&o.addItem(i),i.lifeCycleState=App.LifeCycleState.ACTIVE}}else n===e.DELETE&&(i.lifeCycleState=App.LifeCycleState.DELETED);this._nextCommand?this._executeNextCommand(this._nextCommandData):this.dispatchEvent(e.COMPLETE,this)},App.HeaderSegment=function(t,e,i,n){PIXI.DisplayObjectContainer.call(this),this._action=t,this._width=e,this._height=i,this._pixelRatio=n,this._frontElement=null,this._backElement=null,this._middlePosition=Math.round(15*n),this._needsUpdate=!0,this._mask=new PIXI.Graphics,this.mask=this._mask,this.addChild(this._mask)},App.HeaderSegment.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.HeaderSegment.prototype.constructor=App.HeaderSegment,App.HeaderSegment.prototype._render=function(){var t=Math.round(10*this._pixelRatio);App.GraphicUtils.drawRect(this._mask,16711680,.5,0,0,this._width,this._height-2*t),this._mask.y=t},App.HeaderSegment.prototype.change=function(t){if(this._action===t)this._needsUpdate=!1;else{var e=this._frontElement;this._frontElement=this._backElement,this._backElement=e,this._needsUpdate=!0}this._action=t},App.HeaderSegment.prototype.update=function(t){this._needsUpdate&&(this._frontElement.y=Math.round((this._middlePosition+this._frontElement.height)*t-this._frontElement.height),this._backElement.y=Math.round(this._middlePosition+(this._height-this._middlePosition)*t))},App.HeaderSegment.prototype.getAction=function(){return this._action},App.SubCategory=function(t,e,i,n){t?(parseInt(t[0],10)>=App.SubCategory._UID&&(App.SubCategory._UID=parseInt(t[0],10)),this.id=t[0],this.name=t[1],this.category=t[2]):(this.id=String(++App.SubCategory._UID),this.name="SubCategory"+this.id,this.category=null),this._state=null},App.SubCategory._UID=0,App.SubCategory.prototype.saveState=function(){this._state||(this._state=this.name)},App.SubCategory.prototype.revokeState=function(){this._state&&(this.name=this._state)},App.SubCategory.prototype.clearSavedState=function(){this._state=null},App.ColorSample=function(t,e,i){PIXI.Graphics.call(this),this.boundingBox=new App.Rectangle(0,0,Math.round(40*i),Math.round(50*i)),this._modelIndex=t,this._pixelRatio=i,this._color=e.toString(),this._selected=!1,this._render()},App.ColorSample.prototype=Object.create(PIXI.Graphics.prototype),App.ColorSample.prototype.constructor=App.ColorSample,App.ColorSample.prototype._render=function(){var t=Math.round((this._selected?0:5)*this._pixelRatio),e=Math.round((this._selected?5:10)*this._pixelRatio),i=this.boundingBox.width,n=this.boundingBox.height;this.clear(),this.beginFill("0x"+this._color),this.drawRoundedRect(t,e,i-2*t,n-2*e,Math.round(5*this._pixelRatio)),this.endFill()},App.ColorSample.prototype.setModel=function(t,e,i){this._modelIndex=t,this._color=e,this._selected=i===this._modelIndex,this._render()},App.ColorSample.prototype.getModelIndex=function(){return this._modelIndex},App.ColorSample.prototype.getValue=function(){return this._color},App.ColorSample.prototype.select=function(t){var e=this._modelIndex===t;this._selected!==e&&(this._selected=e,this._render())},App.TransactionToggleButton=function(t,e,i,n){this._iconName=t,this._toggleStyle=i.toggleStyle,this._toggleOptions=n,this._icon=PIXI.Sprite.fromFrame(t),this._selected=!1,this._iconResizeRatio=Math.round(20*i.pixelRatio)/this._icon.height,App.Button.call(this,e,i),this._render(!0),this.addChild(this._icon)},App.TransactionToggleButton.prototype=Object.create(App.Button.prototype),App.TransactionToggleButton.prototype.constructor=App.TransactionToggleButton,App.TransactionToggleButton.prototype._render=function(t){var e=this._pixelRatio,i=this.boundingBox.width,n=this.boundingBox.height,o=Math.round(10*e),s=Math.round(5*e);this._selected?(this._toggleOptions.icon&&this._icon.setTexture(PIXI.TextureCache[this._toggleOptions.icon]),this._toggleOptions.label&&this._labelField.setText(this._toggleOptions.label),this._toggleOptions.toggleColor&&(this._icon.tint=16777214,this._labelField.setStyle(this._toggleStyle),this.clear(),this.beginFill(App.ColorTheme.BLUE),this.drawRoundedRect(s,s,i-2*s,n-2*s,s),this.endFill())):(this._toggleOptions.icon&&this._icon.setTexture(PIXI.TextureCache[this._iconName]),this._toggleOptions.label&&this._labelField.setText(this._label),this._toggleOptions.toggleColor&&(this._icon.tint=App.ColorTheme.BLUE,this._labelField.setStyle(this._style),this.clear())),t&&(this._icon.scale.x=this._iconResizeRatio,this._icon.scale.y=this._iconResizeRatio,this._icon.y=Math.round((n-this._icon.height)/2),this._icon.tint=App.ColorTheme.BLUE,this._labelField.y=Math.round((n-this._labelField.height)/2)),this._icon.x=Math.round((i-this._icon.width-o-this._labelField.width)/2),this._labelField.x=Math.round(this._icon.x+this._icon.width+o)},App.TransactionToggleButton.prototype.toggle=function(){this._selected=!this._selected,this._render(!1)},App.TransactionToggleButton.prototype.setState=function(t){this._selected=t,this._render(!1)},App.TransactionToggleButton.prototype.isSelected=function(){return this._selected},App.CategoryButtonSurface=function(t){PIXI.DisplayObjectContainer.call(this),this._width=t.width,this._height=t.height,this._pixelRatio=t.pixelRatio,this._skin=this.addChild(new PIXI.Sprite(t.skin)),this._colorStripe=this.addChild(new PIXI.Graphics),this._icon=null,this._nameLabel=this.addChild(new PIXI.Text("",t.nameLabelStyle)),this._renderAll=!0},App.CategoryButtonSurface.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.CategoryButtonSurface.prototype.constructor=App.CategoryButtonSurface,App.CategoryButtonSurface.prototype.render=function(t,e,i){this._nameLabel.setText(t),this._icon&&this._icon.setTexture(PIXI.TextureCache[e]),App.GraphicUtils.drawRect(this._colorStripe,"0x"+i,1,0,0,Math.round(4*this._pixelRatio),this._height),this._renderAll&&(this._renderAll=!1,this._icon=PIXI.Sprite.fromFrame(e),this.addChild(this._icon),this._icon.width=Math.round(20*this._pixelRatio),this._icon.height=Math.round(20*this._pixelRatio),this._icon.x=Math.round(25*this._pixelRatio),this._icon.y=Math.round((this._height-this._icon.height)/2),this._nameLabel.x=Math.round(64*this._pixelRatio),this._nameLabel.y=Math.round(18*this._pixelRatio)),this._icon.tint=parseInt(i,16)},App.CurrencyButton=function(t,e){App.SwipeButton.call(this,e.width,e.openOffset),this.allocated=!1,this.poolIndex=t,this.boundingBox=new PIXI.Rectangle(0,0,e.width,e.height),this._model=null,this._pixelRatio=e.pixelRatio,this._skin=this.addChild(new PIXI.Sprite(e.skin)),this._symbolLabel=this.addChild(new PIXI.Text("",e.symbolLabelStyle)),this._renderAll=!0,this._render()},App.CurrencyButton.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.CurrencyButton.prototype.constructor=App.CurrencyButton,App.CurrencyButton.prototype._render=function(){this._renderAll&&(this._renderAll=!1,this._symbolLabel.x=Math.round(20*this._pixelRatio),this._symbolLabel.y=Math.round((this.boundingBox.height-this._symbolLabel.height)/2))},App.CurrencyButton.prototype.setModel=function(t){this._model=t,this._symbolLabel.setText(this._model.symbol)},App.CurrencyButton.prototype.onClick=function(){var t=App.EventType,e=App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.BACK);e.updateBackScreen=!0,App.Controller.dispatchEvent(t.CHANGE_TRANSACTION,{type:t.CHANGE,currencyQuote:this._model.symbol,nextCommand:new App.ChangeScreen,nextCommandData:e})},App.CurrencyScreen=function(t){App.Screen.call(this,t,.4);var e=App.ScrollPolicy,i=App.FontStyle,n=t.contentHeight,o=t.width,s=t.pixelRatio,p={width:o,height:Math.round(50*s),pixelRatio:s,skin:App.ViewLocator.getViewSegment(App.ViewName.SKIN).GREY_50,symbolLabelStyle:i.get(18,i.BLUE)};this._model=App.ModelLocator.getProxy(App.ModelName.CURRENCY_SYMBOLS),this._interactiveButton=null,this._buttonPool=new App.ObjectPool(App.CurrencyButton,4,p),this._buttonList=new App.VirtualList(this._buttonPool,App.Direction.Y,o,n,s),this._pane=this.addChild(new App.TilePane(e.OFF,e.AUTO,o,n,s,!1)),this._pane.setContent(this._buttonList),this._initialized=!1},App.CurrencyScreen.prototype=Object.create(App.Screen.prototype),App.CurrencyScreen.prototype.constructor=App.CurrencyScreen,App.CurrencyScreen.prototype.enable=function(){App.Screen.prototype.enable.call(this),this._pane.resetScroll(),this._pane.enable()},App.CurrencyScreen.prototype.disable=function(){App.Screen.prototype.disable.call(this),this._pane.disable()},App.CurrencyScreen.prototype.update=function(t,e){this._initialized?(this._pane.resetScroll(),this._buttonList.reset()):(this._initialized=!0,this._buttonList.update(this._model.copySource()),this._pane.resize())},App.CurrencyScreen.prototype._onClick=function(){var t=this._buttonList.getItemUnderPoint(this.stage.getTouchData());t&&t.onClick()},App.CurrencyScreen.prototype._onHeaderClick=function(t){t===App.HeaderAction.CANCEL&&App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.BACK))},App.HeaderTitle=function(t,e,i,n,o){App.HeaderSegment.call(this,t,e,i,n),this._frontElement=new PIXI.Text(t,o),this._backElement=new PIXI.Text(t,o),this._render(),this.addChild(this._frontElement),this.addChild(this._backElement)},App.HeaderTitle.prototype=Object.create(App.HeaderSegment.prototype),App.HeaderTitle.prototype.constructor=App.HeaderTitle,App.HeaderTitle.prototype._render=function(){App.HeaderSegment.prototype._render.call(this),this._middlePosition=Math.round(18*this._pixelRatio),this._frontElement.x=Math.round((this._width-this._frontElement.width)/2),this._frontElement.y=this._height,this._frontElement.alpha=0,this._backElement.x=Math.round((this._width-this._backElement.width)/2),this._backElement.y=this._height,this._backElement.alpha=0},App.HeaderTitle.prototype.change=function(t){App.HeaderSegment.prototype.change.call(this,t),this._frontElement.setText(t),this._frontElement.x=Math.round((this._width-this._frontElement.width)/2),this._frontElement.alpha=1},App.ReportSubCategoryButton=function(t,e){PIXI.DisplayObjectContainer.call(this),this.allocated=!1,this.poolIndex=t,this.boundingBox=new App.Rectangle(0,0,e.width,e.height),this._model=null,this._pixelRatio=e.pixelRatio,this._background=this.addChild(new PIXI.Sprite(e.skin)),this._colorStripe=this.addChild(new PIXI.Graphics),this._nameField=this.addChild(new PIXI.Text("",e.labelStyles.name)),this._percentField=this.addChild(new PIXI.Text("%",e.labelStyles.percent)),this._amountField=this.addChild(new PIXI.Text("",e.labelStyles.amount)),this._render()},App.ReportSubCategoryButton.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),App.ReportSubCategoryButton.prototype.constructor=App.ReportSubCategoryButton,App.ReportSubCategoryButton.prototype._render=function(){var t=Math.round(10*this._pixelRatio),e=this.boundingBox.width,i=this.boundingBox.height;this._nameField.x=2*t,this._nameField.y=Math.round((i-this._nameField.height)/2),this._percentField.x=Math.round(.7*e-this._percentField.width),this._percentField.y=Math.round((i-this._percentField.height)/2),this._amountField.x=Math.round(e-t-this._amountField.width),this._amountField.y=Math.round((i-this._amountField.height)/2)},App.ReportSubCategoryButton.prototype.setModel=function(t,e){this._model=t,this._update(e)},App.ReportSubCategoryButton.prototype._update=function(t){this._nameField.setText(this._model.name),App.GraphicUtils.drawRect(this._colorStripe,t,1,0,0,Math.round(2*this._pixelRatio),this.boundingBox.height)},App.HeaderIcon=function(t,e,i,n){App.HeaderSegment.call(this,t,e,i,n),this._frontElement=PIXI.Sprite.fromFrame(this._getIconByAction(t)),this._backElement=PIXI.Sprite.fromFrame(this._getIconByAction(t)),this._iconResizeRatio=Math.round(20*n)/this._frontElement.height,this._render(),this.addChild(this._frontElement),this.addChild(this._backElement)},App.HeaderIcon.prototype=Object.create(App.HeaderSegment.prototype),App.HeaderIcon.prototype.constructor=App.HeaderIcon,App.HeaderIcon.prototype._render=function(){App.HeaderSegment.prototype._render.call(this);var t=App.ColorTheme;this._frontElement.scale.x=this._iconResizeRatio,this._frontElement.scale.y=this._iconResizeRatio,this._frontElement.x=this._middlePosition,this._frontElement.y=this._height,this._frontElement.tint=t.WHITE,this._frontElement.alpha=0,this._backElement.scale.x=this._iconResizeRatio,this._backElement.scale.y=this._iconResizeRatio,this._backElement.x=this._middlePosition,this._backElement.y=this._height,this._backElement.tint=t.WHITE,this._backElement.alpha=0;

},App.HeaderIcon.prototype._getIconByAction=function(t){var e=App.HeaderAction,i=null;return t===e.MENU?i="menu-app":t===e.CANCEL?i="close-app":t===e.CONFIRM?i="apply-app":t===e.ADD_TRANSACTION&&(i="plus-app"),i},App.HeaderIcon.prototype.change=function(t){App.HeaderSegment.prototype.change.call(this,t);var e=this._getIconByAction(t);null===e?this._frontElement.alpha=0:(this._frontElement.setTexture(PIXI.TextureCache[e]),this._frontElement.alpha=1)},App.Command=function(t,e){App.EventDispatcher.call(this,e),this.allowMultipleInstances=t},App.Command.prototype=Object.create(App.EventDispatcher.prototype),App.Command.prototype.constructor=App.Command,App.Command.prototype.execute=function(t){},App.Command.prototype.destroy=function(){App.EventDispatcher.prototype.destroy.call(this)},App.Ticker=function(t){App.EventDispatcher.call(this,t),this._rafListener=this._raf.bind(this),this._isRunning=!1},App.Ticker.prototype=Object.create(App.EventDispatcher.prototype),App.Ticker.prototype.constructor=App.Ticker,App.Ticker.prototype.addEventListener=function(t,e,i){App.EventDispatcher.prototype.addEventListener.call(this,t,e,i),this._isRunning||(this._isRunning=!0,window.requestAnimationFrame(this._rafListener))},App.Ticker.prototype.removeEventListener=function(t,e,i){App.EventDispatcher.prototype.removeEventListener.call(this,t,e,i),0===this._listeners.length&&(this._isRunning=!1)},App.Ticker.prototype.removeAllListeners=function(){App.EventDispatcher.prototype.removeAllListeners.call(this),this._isRunning=!1},App.Ticker.prototype._raf=function(){this._isRunning&&(window.requestAnimationFrame(this._rafListener),this.dispatchEvent(App.EventType.TICK))},App.ListHeader=function(t,e,i){PIXI.Graphics.call(this),this._width=e,this._pixelRatio=i,this._textField=new PIXI.Text(t,App.FontStyle.get(12,App.FontStyle.GREY_DARKER)),this._render(),this.addChild(this._textField)},App.ListHeader.prototype=Object.create(PIXI.Graphics.prototype),App.ListHeader.prototype.constructor=App.ListHeader,App.ListHeader.prototype._render=function(){var t=App.GraphicUtils,e=App.ColorTheme,i=Math.round(30*this._pixelRatio);t.drawRect(this,e.GREY_DARK,1,0,0,this._width,i),this._textField.x=Math.round((this._width-this._textField.width)/2),this._textField.y=Math.round((i-this._textField.height)/2)},App.SequenceCommand=function(t,e){App.Command.call(this,t,e),this._nextCommand=null,this._nextCommandData=null},App.SequenceCommand.prototype=Object.create(App.Command.prototype),App.SequenceCommand.prototype.constructor=App.SequenceCommand,App.SequenceCommand.prototype._executeNextCommand=function(t){this._nextCommand.addEventListener(App.EventType.COMPLETE,this,this._onNextCommandComplete),this._nextCommand.execute(t)},App.SequenceCommand.prototype._onNextCommandComplete=function(){this._nextCommand.removeEventListener(App.EventType.COMPLETE,this,this._onNextCommandComplete),this.dispatchEvent(App.EventType.COMPLETE,this)},App.SequenceCommand.prototype.destroy=function(){App.Command.prototype.destroy.call(this),this._nextCommand&&(this._nextCommand.destroy(),this._nextCommand=null),this._nextCommandData=null},App.Filter=function(t,e,i){this.startDate=t,this.endDate=e,this.categories=i},App.CurrencyPairButton=function(t,e){App.SwipeButton.call(this,e.width,e.openOffset),this.allocated=!1,this.poolIndex=t,this.boundingBox=new PIXI.Rectangle(0,0,e.width,e.height),this._model=null,this._pixelRatio=e.pixelRatio,this._background=this.addChild(new PIXI.Graphics),this._editLabel=this.addChild(new PIXI.Text("Edit",e.editLabelStyle)),this._swipeSurface=this.addChild(new PIXI.DisplayObjectContainer),this._skin=this._swipeSurface.addChild(new PIXI.Sprite(e.skin)),this._pairLabel=this._swipeSurface.addChild(new PIXI.Text("EUR/USD",e.pairLabelStyle)),this._rateLabel=this._swipeSurface.addChild(new PIXI.Text("@ 1.0",e.rateLabelStyle)),this._renderAll=!0,this._render()},App.CurrencyPairButton.prototype=Object.create(App.SwipeButton.prototype),App.CurrencyPairButton.prototype.constructor=App.CurrencyPairButton,App.CurrencyPairButton.prototype._render=function(){var t=this.boundingBox.width,e=this.boundingBox.height,i=this._pixelRatio,n=Math.round(15*i);App.GraphicUtils.drawRect(this._background,App.ColorTheme.RED,1,0,0,t,e),this._editLabel.x=Math.round(t-50*this._pixelRatio),this._editLabel.y=Math.round((e-this._editLabel.height)/2),this._pairLabel.x=n,this._pairLabel.y=Math.round((e-this._pairLabel.height)/2),this._rateLabel.x=Math.round(n+this._pairLabel.width+5*i),this._rateLabel.y=Math.round((e-this._rateLabel.height)/2)},App.CurrencyPairButton.prototype.setModel=function(t){this._model=t,this._pairLabel.setText(t.base+"/"+t.symbol),this._rateLabel.setText("@ "+t.rate)},App.CurrencyPairButton.prototype.onClick=function(t){this._isOpen&&t.getLocalPosition(this).x>=this._width-this._openOffset&&App.Controller.dispatchEvent(App.EventType.CHANGE_SCREEN,App.ModelLocator.getProxy(App.ModelName.CHANGE_SCREEN_DATA_POOL).allocate().update(App.ScreenName.EDIT_CURRENCY_RATE,App.ScreenMode.EDIT,this._model,0,0,App.ScreenTitle.EDIT_CURRENCY_RATE))},App.CurrencyPairButton.prototype._updateSwipePosition=function(t){this._swipeSurface.x=t},App.CurrencyPairButton.prototype._getSwipePosition=function(){return this._swipeSurface.x},App.ChangeCurrencyPair=function(t){App.SequenceCommand.call(this,!1,t)},App.ChangeCurrencyPair.prototype=Object.create(App.SequenceCommand.prototype),App.ChangeCurrencyPair.prototype.constructor=App.ChangeCurrencyPair,App.ChangeCurrencyPair.prototype.execute=function(t){this._nextCommand=t.nextCommand,this._nextCommandData=t.nextCommandData,t.currencyPair.rate=parseFloat(t.rate),this._nextCommand?this._executeNextCommand(this._nextCommandData):this.dispatchEvent(App.EventType.COMPLETE,this)},function(){function t(){e.destroy(),e=null}var e=new App.Initialize;e.addEventListener(App.EventType.COMPLETE,this,t),e.execute()}();